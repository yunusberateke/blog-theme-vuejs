{"remainingRequest":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/src/views/AdminTemplate/AddPost.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/src/views/AdminTemplate/AddPost.vue","mtime":1623001612982},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBZGRQb3N0Q2F0ZWdvcnlEaWFsb2cgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9BZGRQb3N0Q2F0ZWdvcnlEaWFsb2cvYWRkLXBvc3QtY2F0ZWdvcnktZGlhbG9nLnZ1ZSI7CmltcG9ydCBsb2FkZXIgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9Mb2FkZXIvbG9hZGVyLnZ1ZSI7CmltcG9ydCBzZXJ2ZXJDbGllbnQgZnJvbSAiQC9zdG9yZS9odHRwX2NsaWVudCI7CmltcG9ydCB7IFZ1ZUVkaXRvciB9IGZyb20gInZ1ZTItZWRpdG9yIjsKaW1wb3J0IEFkZFRhZ0RpYWxvZyBmcm9tICIuLi8uLi9jb21wb25lbnRzL0FkZFRhZ0RpYWxvZy9hZGQtdGFnLWRpYWxvZy52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgbG9hZGVyLCBBZGRQb3N0Q2F0ZWdvcnlEaWFsb2csIFZ1ZUVkaXRvciwgQWRkVGFnRGlhbG9nIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGNvbnRlbnQ6ICIiLAogICAgICBpbWFnZTogbnVsbCwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgZGlhbG9nVGFnOiBmYWxzZSwKICAgICAgY2hpcHM6IFtdLAogICAgICBzYXZlZFRhZ3M6IFtdLAogICAgICBmb3JtRGF0YTogewogICAgICAgIHRpdGxlOiBudWxsLAogICAgICAgIGNvbnRlbnQ6IG51bGwsCiAgICAgICAgaW1hZ2U6IG51bGwsCiAgICAgICAgY2F0ZWdvcnlfaWQ6IG51bGwsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlSW1hZ2VBZGRlZDogZnVuY3Rpb24gKGZpbGUsIEVkaXRvciwgY3Vyc29yTG9jYXRpb24sIHJlc2V0VXBsb2FkZXIpIHsKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZSIsIGZpbGUpOwoKICAgICAgc2VydmVyQ2xpZW50CiAgICAgICAgLnBvc3QoIi9maWxlIiwgZm9ybURhdGEpCiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgICAgbGV0IHVybCA9ICIvc3RvcmFnZS8iICsgcmVzdWx0LmRhdGEuZmlsZTsgLy8gR2V0IHVybCBmcm9tIHJlc3BvbnNlCiAgICAgICAgICBFZGl0b3IuaW5zZXJ0RW1iZWQoY3Vyc29yTG9jYXRpb24sICJpbWFnZSIsIHVybCk7CiAgICAgICAgICByZXNldFVwbG9hZGVyKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgIH0sCiAgICByZW1vdmUoaXRlbSkgewogICAgICB0aGlzLmNoaXBzLnNwbGljZSh0aGlzLmNoaXBzLmluZGV4T2YoaXRlbSksIDEpOwogICAgICB0aGlzLmNoaXBzID0gWy4uLnRoaXMuY2hpcHNdOwogICAgfSwKICAgIHNhdmVGb3JtRGF0YSgpIHsKICAgICAgdGhpcy5mb3JtRGF0YS5jb250ZW50ID0gdGhpcy5jb250ZW50OwogICAgICB2YXIgaW1hZ2UgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgaW1hZ2UuYXBwZW5kKCJmaWxlIiwgdGhpcy5pbWFnZSk7CgogICAgICBzZXJ2ZXJDbGllbnQKICAgICAgICAucG9zdCgiL2ZpbGUiLCBpbWFnZSkKICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgICB0aGlzLmZvcm1EYXRhLmltYWdlID0KICAgICAgICAgICAgIi9zdG9yYWdlLyIgKyByZXN1bHQuZGF0YS5maWxlOyAvLyBHZXQgdXJsIGZyb20gcmVzcG9uc2UKICAgICAgICAgIHRoaXMuJHN0b3JlCiAgICAgICAgICAgIC5kaXNwYXRjaCgiUG9zdE1vZHVsZS9zYXZlIiwgdGhpcy5mb3JtRGF0YSkKICAgICAgICAgICAgLnRoZW4oKGUpID0+IHsKICAgICAgICAgICAgICB0aGlzLmNoaXBzLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlCiAgICAgICAgICAgICAgICAgIC5kaXNwYXRjaCgiVGFnUG9zdE1vZHVsZS9zYXZlIiwgewogICAgICAgICAgICAgICAgICAgIHBvc3RJZDogZS5pZCwKICAgICAgICAgICAgICAgICAgICB0YWdJZDogZWxlbWVudC5pZCwKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LnN1Y2Nlc3MoCiAgICAgICAgICAgICAgICAgICAgICBgQmHFn2FyxLF5bGEgVGFnIEVrbGVuZGkgJHtlbGVtZW50Lm5hbWV9YCwKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICByaWdodDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLiR0b2FzdC5zdWNjZXNzKCJCYcWfYXLEsXlsYSBrYXlkZWRpbGRpIiwgewogICAgICAgICAgICAgICAgdG9wOiB0cnVlLAogICAgICAgICAgICAgICAgcmlnaHQ6IHRydWUsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgICB0aGlzLiR0b2FzdC5lcnJvcihgS2F5ZGVkaWxpcmtlbiBiaXIgaGF0YSBvbHXFn3R1ICR7ZXJyb3J9YCwgewogICAgICAgICAgICAgICAgdG9wOiB0cnVlLAogICAgICAgICAgICAgICAgcmlnaHQ6IHRydWUsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy4kdG9hc3QuZmFpbChgS2F5ZGVkaWxpcmtlbiBiaXIgaGF0YSBvbHXFn3R1ICR7ZXJyb3J9YCwgewogICAgICAgICAgICB0b3A6IHRydWUsCiAgICAgICAgICAgIHJpZ2h0OiB0cnVlLAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNhdGVnb3JpZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5DYXRlZ29yeU1vZHVsZS5wb3N0X2NhdGVnb3J5OwogICAgfSwKICAgIGl0ZW1zVGFncygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLlRhZ01vZHVsZS50YWdzOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICBQcm9taXNlLmFsbChbCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJDYXRlZ29yeU1vZHVsZS9maW5kQWxsIiksCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJUYWdNb2R1bGUvZmluZEFsbCIpLAogICAgXSkudGhlbigoKSA9PiB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICB9KTsKICB9LAp9Owo="},{"version":3,"sources":["AddPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddPost.vue","sourceRoot":"src/views/AdminTemplate","sourcesContent":["<template>\n  <div>\n    <loader v-if=\"isLoading\"></loader>\n    <v-card class=\"col-12 col-md-11 col-lg-10 mx-auto\" v-else>\n      <v-card-text style=\"min-height: 85vh\">\n        <v-form>\n          <v-file-input\n            v-model=\"image\"\n            prepend-icon=\"mdi-camera\"\n            accept=\"image/png, image/jpeg, image/bmp\"\n            label=\"Resim\"\n          ></v-file-input>\n          <v-text-field label=\"İsmi\" v-model=\"formData.title\"></v-text-field>\n          <v-row class=\"ma-0 pa-0\">\n            <v-autocomplete\n              item-text=\"name\"\n              item-value=\"id\"\n              :items=\"categories\"\n              v-model=\"formData.category_id\"\n              label=\"Kategori\"\n            ></v-autocomplete>\n            <add-post-category-dialog\n              class=\"my-auto ml-2\"\n              :dialog.sync=\"dialog\"\n              :categories=\"categories\"\n            ></add-post-category-dialog>\n          </v-row>\n        </v-form>\n        <v-row class=\"ma-0 pa-0\">\n          <v-combobox\n            v-model=\"chips\"\n            :items=\"itemsTags\"\n            chips\n            clearable\n            label=\"Taglar\"\n            item-text=\"name\"\n            item-value=\"id\"\n            multiple\n          >\n            <template v-slot:selection=\"{ attrs, item, select, selected }\">\n              <v-chip\n                v-bind=\"attrs\"\n                :input-value=\"selected\"\n                close\n                @click=\"select\"\n                @click:close=\"remove(item)\"\n              >\n                <strong>{{ item.name }}</strong>\n              </v-chip>\n            </template>\n          </v-combobox>\n          <add-tag-dialog\n            class=\"my-auto ml-2\"\n            :dialog.sync=\"dialogTag\"\n          ></add-tag-dialog>\n        </v-row>\n        <vue-editor\n          placeholder=\"İçerik\"\n          id=\"editor\"\n          use-custom-image-handler\n          @image-added=\"handleImageAdded\"\n          v-model=\"content\"\n          lang=\"tr\"\n          style=\"mim-height: 63vh\"\n        >\n        </vue-editor>\n        <v-row class=\"my-5\">\n          <v-btn\n            @click=\"saveFormData\"\n            outlined\n            class=\"my-2 mx-auto\"\n            color=\"primary\"\n            ><v-icon left>mdi-content-save</v-icon> Kaydet\n          </v-btn>\n        </v-row>\n      </v-card-text>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport AddPostCategoryDialog from \"../../components/AddPostCategoryDialog/add-post-category-dialog.vue\";\nimport loader from \"../../components/Loader/loader.vue\";\nimport serverClient from \"@/store/http_client\";\nimport { VueEditor } from \"vue2-editor\";\nimport AddTagDialog from \"../../components/AddTagDialog/add-tag-dialog.vue\";\n\nexport default {\n  components: { loader, AddPostCategoryDialog, VueEditor, AddTagDialog },\n  data() {\n    return {\n      isLoading: false,\n      content: \"\",\n      image: null,\n      dialog: false,\n      dialogTag: false,\n      chips: [],\n      savedTags: [],\n      formData: {\n        title: null,\n        content: null,\n        image: null,\n        category_id: null,\n      },\n    };\n  },\n  methods: {\n    handleImageAdded: function (file, Editor, cursorLocation, resetUploader) {\n      var formData = new FormData();\n      formData.append(\"file\", file);\n\n      serverClient\n        .post(\"/file\", formData)\n        .then((result) => {\n          let url = \"/storage/\" + result.data.file; // Get url from response\n          Editor.insertEmbed(cursorLocation, \"image\", url);\n          resetUploader();\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    remove(item) {\n      this.chips.splice(this.chips.indexOf(item), 1);\n      this.chips = [...this.chips];\n    },\n    saveFormData() {\n      this.formData.content = this.content;\n      var image = new FormData();\n      image.append(\"file\", this.image);\n\n      serverClient\n        .post(\"/file\", image)\n        .then((result) => {\n          this.formData.image =\n            \"/storage/\" + result.data.file; // Get url from response\n          this.$store\n            .dispatch(\"PostModule/save\", this.formData)\n            .then((e) => {\n              this.chips.forEach((element) => {\n                this.$store\n                  .dispatch(\"TagPostModule/save\", {\n                    postId: e.id,\n                    tagId: element.id,\n                  })\n                  .then(() => {\n                    this.$toast.success(\n                      `Başarıyla Tag Eklendi ${element.name}`,\n                      {\n                        top: true,\n                        right: true,\n                      }\n                    );\n                  });\n              });\n              this.$toast.success(\"Başarıyla kaydedildi\", {\n                top: true,\n                right: true,\n              });\n            })\n            .catch((error) => {\n              this.$toast.error(`Kaydedilirken bir hata oluştu ${error}`, {\n                top: true,\n                right: true,\n              });\n            });\n        })\n        .catch((error) => {\n          this.$toast.fail(`Kaydedilirken bir hata oluştu ${error}`, {\n            top: true,\n            right: true,\n          });\n        });\n    },\n  },\n  computed: {\n    categories() {\n      return this.$store.state.CategoryModule.post_category;\n    },\n    itemsTags() {\n      return this.$store.state.TagModule.tags;\n    },\n  },\n  mounted() {\n    this.isLoading = true;\n    Promise.all([\n      this.$store.dispatch(\"CategoryModule/findAll\"),\n      this.$store.dispatch(\"TagModule/findAll\"),\n    ]).then(() => {\n      this.isLoading = false;\n    });\n  },\n};\n</script>\n\n<style>\n</style>"]}]}