{"remainingRequest":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js?{}!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/view/observer/selectionobserver.js","dependencies":[{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/view/observer/selectionobserver.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS9la2ViZXJhdC9ZYW5kZXguRGlzay9Qcm9qZWxlcmltL0JlbmltUHJvamVsZXJpbS93ZWJzaXRlbS93ZWJzaXRlbS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9la2ViZXJhdC9ZYW5kZXguRGlzay9Qcm9qZWxlcmltL0JlbmltUHJvamVsZXJpbS93ZWJzaXRlbS93ZWJzaXRlbS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9nZXQgZnJvbSAiL2hvbWUvZWtlYmVyYXQvWWFuZGV4LkRpc2svUHJvamVsZXJpbS9CZW5pbVByb2plbGVyaW0vd2Vic2l0ZW0vd2Vic2l0ZW0td2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQiOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMud2Vhay1zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKCi8qKgogKiBAbGljZW5zZSBDb3B5cmlnaHQgKGMpIDIwMDMtMjAyMSwgQ0tTb3VyY2UgLSBGcmVkZXJpY28gS25hYmJlbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogRm9yIGxpY2Vuc2luZywgc2VlIExJQ0VOU0UubWQgb3IgaHR0cHM6Ly9ja2VkaXRvci5jb20vbGVnYWwvY2tlZGl0b3Itb3NzLWxpY2Vuc2UKICovCgovKioKICogQG1vZHVsZSBlbmdpbmUvdmlldy9vYnNlcnZlci9zZWxlY3Rpb25vYnNlcnZlcgogKi8KCi8qIGdsb2JhbCBzZXRJbnRlcnZhbCwgY2xlYXJJbnRlcnZhbCAqLwppbXBvcnQgT2JzZXJ2ZXIgZnJvbSAnLi9vYnNlcnZlcic7CmltcG9ydCBNdXRhdGlvbk9ic2VydmVyIGZyb20gJy4vbXV0YXRpb25vYnNlcnZlcic7CmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoLWVzJzsKLyoqCiAqIFNlbGVjdGlvbiBvYnNlcnZlciBjbGFzcyBvYnNlcnZlcyBzZWxlY3Rpb24gY2hhbmdlcyBpbiB0aGUgZG9jdW1lbnQuIElmIGEgc2VsZWN0aW9uIGNoYW5nZXMgb24gdGhlIGRvY3VtZW50IHRoaXMKICogb2JzZXJ2ZXIgY2hlY2tzIGlmIHRoZXJlIGFyZSBhbnkgbXV0YXRpb25zIGFuZCBpZiB0aGUgRE9NIHNlbGVjdGlvbiBpcyBkaWZmZXJlbnQgZnJvbSB0aGUKICoge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudH5Eb2N1bWVudCNzZWxlY3Rpb24gdmlldyBzZWxlY3Rpb259LiBUaGUgc2VsZWN0aW9uIG9ic2VydmVyIGZpcmVzCiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnR+RG9jdW1lbnQjZXZlbnQ6c2VsZWN0aW9uQ2hhbmdlfSBldmVudCBvbmx5IGlmIGEgc2VsZWN0aW9uIGNoYW5nZSB3YXMgdGhlIG9ubHkgY2hhbmdlIGluIHRoZSBkb2N1bWVudAogKiBhbmQgdGhlIERPTSBzZWxlY3Rpb24gaXMgZGlmZmVyZW50IHRoZW4gdGhlIHZpZXcgc2VsZWN0aW9uLgogKgogKiBOb3RlIHRoYXQgdGhpcyBvYnNlcnZlciBpcyBhdHRhY2hlZCBieSB0aGUge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy92aWV3flZpZXd9IGFuZCBpcyBhdmFpbGFibGUgYnkgZGVmYXVsdC4KICoKICogQHNlZSBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvbXV0YXRpb25vYnNlcnZlcn5NdXRhdGlvbk9ic2VydmVyCiAqIEBleHRlbmRzIG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9vYnNlcnZlcn5PYnNlcnZlcgogKi8KCnZhciBTZWxlY3Rpb25PYnNlcnZlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX09ic2VydmVyKSB7CiAgX2luaGVyaXRzKFNlbGVjdGlvbk9ic2VydmVyLCBfT2JzZXJ2ZXIpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFNlbGVjdGlvbk9ic2VydmVyKTsKCiAgZnVuY3Rpb24gU2VsZWN0aW9uT2JzZXJ2ZXIodmlldykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWxlY3Rpb25PYnNlcnZlcik7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB2aWV3KTsKICAgIC8qKgogICAgICogSW5zdGFuY2Ugb2YgdGhlIG11dGF0aW9uIG9ic2VydmVyLiBTZWxlY3Rpb24gb2JzZXJ2ZXIgY2FsbHMKICAgICAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvbXV0YXRpb25vYnNlcnZlcn5NdXRhdGlvbk9ic2VydmVyI2ZsdXNofSB0byBlbnN1cmUgdGhhdCB0aGUgbXV0YXRpb25zIHdpbGwgYmUgaGFuZGxlZAogICAgICogYmVmb3JlIHRoZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50I2V2ZW50OnNlbGVjdGlvbkNoYW5nZX0gZXZlbnQgaXMgZmlyZWQuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvbXV0YXRpb25vYnNlcnZlcn5NdXRhdGlvbk9ic2VydmVyfQogICAgICogbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyI211dGF0aW9uT2JzZXJ2ZXIKICAgICAqLwoKICAgIF90aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSB2aWV3LmdldE9ic2VydmVyKE11dGF0aW9uT2JzZXJ2ZXIpOwogICAgLyoqCiAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHZpZXcge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudHNlbGVjdGlvbn5Eb2N1bWVudFNlbGVjdGlvbn0gb2JqZWN0IHVzZWQgdG8gY29tcGFyZQogICAgICogbmV3IHNlbGVjdGlvbiB3aXRoIGl0LgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50c2VsZWN0aW9ufkRvY3VtZW50U2VsZWN0aW9ufQogICAgICogbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyI3NlbGVjdGlvbgogICAgICovCgogICAgX3RoaXMuc2VsZWN0aW9uID0gX3RoaXMuZG9jdW1lbnQuc2VsZWN0aW9uOwogICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqLwoKICAgIC8qKgogICAgICogUmVmZXJlbmNlIHRvIHRoZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3ZpZXd+VmlldyNkb21Db252ZXJ0ZXJ9LgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQG1lbWJlciB7bW9kdWxlOmVuZ2luZS92aWV3L2RvbWNvbnZlcnRlcn5Eb21Db252ZXJ0ZXJ9IG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9zZWxlY3Rpb25vYnNlcnZlcn5TZWxlY3Rpb25PYnNlcnZlciNkb21Db252ZXJ0ZXIKICAgICAqLwoKICAgIC8qIGVzbGludC1lbmFibGUgbWF4LWxlbiAqLwoKICAgIF90aGlzLmRvbUNvbnZlcnRlciA9IHZpZXcuZG9tQ29udmVydGVyOwogICAgLyoqCiAgICAgKiBBIHNldCBvZiBkb2N1bWVudHMgd2hpY2ggaGF2ZSBhZGRlZCBgc2VsZWN0aW9uY2hhbmdlYCBsaXN0ZW5lciB0byBhdm9pZCBhZGRpbmcgYSBsaXN0ZW5lciB0d2ljZSB0byB0aGUgc2FtZQogICAgICogZG9jdW1lbnQuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBtZW1iZXIge1dlYWtTZXQuPERvY3VtZW50Pn0gbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyI19kb2N1bWVudHMKICAgICAqLwoKICAgIF90aGlzLl9kb2N1bWVudHMgPSBuZXcgV2Vha1NldCgpOwogICAgLyoqCiAgICAgKiBGaXJlcyBkZWJvdW5jZWQgZXZlbnQgYHNlbGVjdGlvbkNoYW5nZURvbmVgLiBJdCB1c2VzIGBsb2Rhc2gjZGVib3VuY2VgIG1ldGhvZCB0byBkZWxheSBmdW5jdGlvbiBjYWxsLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBTZWxlY3Rpb24gY2hhbmdlIGRhdGEuCiAgICAgKiBAbWV0aG9kICNfZmlyZVNlbGVjdGlvbkNoYW5nZURvbmVEZWJvdW5jZWQKICAgICAqLwoKICAgIF90aGlzLl9maXJlU2VsZWN0aW9uQ2hhbmdlRG9uZURlYm91bmNlZCA9IGRlYm91bmNlKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHJldHVybiBfdGhpcy5kb2N1bWVudC5maXJlKCdzZWxlY3Rpb25DaGFuZ2VEb25lJywgZGF0YSk7CiAgICB9LCAyMDApOwogICAgX3RoaXMuX2NsZWFySW5maW5pdGVMb29wSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy5fY2xlYXJJbmZpbml0ZUxvb3AoKTsKICAgIH0sIDEwMDApOwogICAgLyoqCiAgICAgKiBQcml2YXRlIHByb3BlcnR5IHRvIGNoZWNrIGlmIHRoZSBjb2RlIGRvZXMgbm90IGVudGVyIGluZmluaXRlIGxvb3AuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBtZW1iZXIge051bWJlcn0gbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyI19sb29wYmFja0NvdW50ZXIKICAgICAqLwoKICAgIF90aGlzLl9sb29wYmFja0NvdW50ZXIgPSAwOwogICAgcmV0dXJuIF90aGlzOwogIH0KICAvKioKICAgKiBAaW5oZXJpdERvYwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFNlbGVjdGlvbk9ic2VydmVyLCBbewogICAga2V5OiAib2JzZXJ2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb2JzZXJ2ZShkb21FbGVtZW50KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGRvbURvY3VtZW50ID0gZG9tRWxlbWVudC5vd25lckRvY3VtZW50OyAvLyBBZGQgbGlzdGVuZXIgb25jZSBwZXIgZWFjaCBkb2N1bWVudC4KCiAgICAgIGlmICh0aGlzLl9kb2N1bWVudHMuaGFzKGRvbURvY3VtZW50KSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5saXN0ZW5Ubyhkb21Eb2N1bWVudCwgJ3NlbGVjdGlvbmNoYW5nZScsIGZ1bmN0aW9uIChldnQsIGRvbUV2ZW50KSB7CiAgICAgICAgX3RoaXMyLl9oYW5kbGVTZWxlY3Rpb25DaGFuZ2UoZG9tRXZlbnQsIGRvbURvY3VtZW50KTsKICAgICAgfSk7CgogICAgICB0aGlzLl9kb2N1bWVudHMuYWRkKGRvbURvY3VtZW50KTsKICAgIH0KICAgIC8qKgogICAgICogQGluaGVyaXREb2MKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkZXN0cm95IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkgewogICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihTZWxlY3Rpb25PYnNlcnZlci5wcm90b3R5cGUpLCAiZGVzdHJveSIsIHRoaXMpLmNhbGwodGhpcyk7CgogICAgICBjbGVhckludGVydmFsKHRoaXMuX2NsZWFySW5maW5pdGVMb29wSW50ZXJ2YWwpOwoKICAgICAgdGhpcy5fZmlyZVNlbGVjdGlvbkNoYW5nZURvbmVEZWJvdW5jZWQuY2FuY2VsKCk7CiAgICB9CiAgICAvKioKICAgICAqIFNlbGVjdGlvbiBjaGFuZ2UgbGlzdGVuZXIuIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvbXV0YXRpb25vYnNlcnZlcn5NdXRhdGlvbk9ic2VydmVyI2ZsdXNoIEZsdXNofSBtdXRhdGlvbnMsIGNoZWNrIGlmCiAgICAgKiBhIHNlbGVjdGlvbiBjaGFuZ2VzIGFuZCBmaXJlcyB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50I2V2ZW50OnNlbGVjdGlvbkNoYW5nZX0gZXZlbnQgb24gZXZlcnkgY2hhbmdlCiAgICAgKiBhbmQge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudH5Eb2N1bWVudCNldmVudDpzZWxlY3Rpb25DaGFuZ2VEb25lfSB3aGVuIGEgc2VsZWN0aW9uIHN0b3AgY2hhbmdpbmcuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBwYXJhbSB7RXZlbnR9IGRvbUV2ZW50IERPTSBldmVudC4KICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IGRvbURvY3VtZW50IERPTSBkb2N1bWVudC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfaGFuZGxlU2VsZWN0aW9uQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKGRvbUV2ZW50LCBkb21Eb2N1bWVudCkgewogICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgZG9tU2VsZWN0aW9uID0gZG9tRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0U2VsZWN0aW9uKCk7CgogICAgICBpZiAodGhpcy5jaGVja1Nob3VsZElnbm9yZUV2ZW50RnJvbVRhcmdldChkb21TZWxlY3Rpb24uYW5jaG9yTm9kZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gRW5zdXJlIHRoZSBtdXRhdGlvbiBldmVudCB3aWxsIGJlIGJlZm9yZSBzZWxlY3Rpb24gZXZlbnQgb24gYWxsIGJyb3dzZXJzLgoKCiAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci5mbHVzaCgpOyAvLyBJZiB0aGVyZSB3ZXJlIG11dGF0aW9ucyB0aGVuIHRoZSB2aWV3IHdpbGwgYmUgcmUtcmVuZGVyZWQgYnkgdGhlIG11dGF0aW9uIG9ic2VydmVyIGFuZCB0aGUgc2VsZWN0aW9uCiAgICAgIC8vIHdpbGwgYmUgdXBkYXRlZCwgc28gdGhlIHNlbGVjdGlvbnMgd2lsbCBlcXVhbCBhbmQgdGhlIGV2ZW50IHdpbGwgbm90IGJlIGZpcmVkLCBhcyBleHBlY3RlZC4KCiAgICAgIHZhciBuZXdWaWV3U2VsZWN0aW9uID0gdGhpcy5kb21Db252ZXJ0ZXIuZG9tU2VsZWN0aW9uVG9WaWV3KGRvbVNlbGVjdGlvbik7IC8vIERvIG5vdCBjb252ZXJ0IHNlbGVjdGlvbiBjaGFuZ2UgaWYgdGhlIG5ldyB2aWV3IHNlbGVjdGlvbiBoYXMgbm8gcmFuZ2VzIGluIGl0LgogICAgICAvLwogICAgICAvLyBJdCBtZWFucyB0aGF0IHRoZSBET00gc2VsZWN0aW9uIGlzIGluIHNvbWUgd2F5IGluY29ycmVjdC4gUmFuZ2VzIHRoYXQgd2VyZSBpbiB0aGUgRE9NIHNlbGVjdGlvbiBjb3VsZCBub3QgYmUKICAgICAgLy8gY29udmVydGVkIHRvIHRoZSB2aWV3LiBUaGlzIGhhcHBlbnMgd2hlbiB0aGUgRE9NIHNlbGVjdGlvbiB3YXMgbW92ZWQgb3V0c2lkZSBvZiB0aGUgZWRpdGFibGUgZWxlbWVudC4KCiAgICAgIGlmIChuZXdWaWV3U2VsZWN0aW9uLnJhbmdlQ291bnQgPT0gMCkgewogICAgICAgIHRoaXMudmlldy5oYXNEb21TZWxlY3Rpb24gPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMudmlldy5oYXNEb21TZWxlY3Rpb24gPSB0cnVlOwoKICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uLmlzRXF1YWwobmV3Vmlld1NlbGVjdGlvbikgJiYgdGhpcy5kb21Db252ZXJ0ZXIuaXNEb21TZWxlY3Rpb25Db3JyZWN0KGRvbVNlbGVjdGlvbikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gRW5zdXJlIHdlIGFyZSBub3QgaW4gdGhlIGluZmluaXRlIGxvb3AgKCM0MDApLgogICAgICAvLyBUaGlzIGNvdW50ZXIgaXMgcmVzZXQgZWFjaCBzZWNvbmQuIDYwIHNlbGVjdGlvbiBjaGFuZ2VzIGluIDEgc2Vjb25kIGlzIGVub3VnaCBoaWdoIG51bWJlcgogICAgICAvLyB0byBiZSB2ZXJ5IGRpZmZpY3VsdCAoaW1wb3NzaWJsZSkgdG8gYWNoaWV2ZSB1c2luZyBqdXN0IGtleWJvYXJkIGtleXMgKGR1cmluZyBub3JtYWwgZWRpdG9yIHVzZSkuCgoKICAgICAgaWYgKCsrdGhpcy5fbG9vcGJhY2tDb3VudGVyID4gNjApIHsKICAgICAgICAvLyBTZWxlY3Rpb24gY2hhbmdlIG9ic2VydmVyIGRldGVjdGVkIGFuIGluZmluaXRlIHJlbmRlcmluZyBsb29wLgogICAgICAgIC8vIE1vc3QgcHJvYmFibHkgeW91IHRyeSB0byBwdXQgdGhlIHNlbGVjdGlvbiBpbiB0aGUgcG9zaXRpb24gd2hpY2ggaXMgbm90IGFsbG93ZWQKICAgICAgICAvLyBieSB0aGUgYnJvd3NlciBhbmQgYnJvd3NlciBmaXhlcyBpdCBhdXRvbWF0aWNhbGx5IHdoYXQgY2F1c2VzIGBzZWxlY3Rpb25jaGFuZ2VgIGV2ZW50IG9uCiAgICAgICAgLy8gd2hpY2ggYSBsb29wYmFjayB0aHJvdWdoIGEgbW9kZWwgdHJpZXMgdG8gcmUtcmVuZGVyIHRoZSB3cm9uZyBzZWxlY3Rpb24gYW5kIGFnYWluLgogICAgICAgIC8vCiAgICAgICAgLy8gQGlmIENLX0RFQlVHIC8vIGNvbnNvbGUud2FybiggJ1NlbGVjdGlvbiBjaGFuZ2Ugb2JzZXJ2ZXIgZGV0ZWN0ZWQgYW4gaW5maW5pdGUgcmVuZGVyaW5nIGxvb3AuJyApOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uLmlzU2ltaWxhcihuZXdWaWV3U2VsZWN0aW9uKSkgewogICAgICAgIC8vIElmIHNlbGVjdGlvbiB3YXMgZXF1YWwgYW5kIHdlIGFyZSBhdCB0aGlzIHBvaW50IG9mIGFsZ29yaXRobSwgaXQgbWVhbnMgdGhhdCBpdCB3YXMgaW5jb3JyZWN0LgogICAgICAgIC8vIEp1c3QgcmUtcmVuZGVyIGl0LCBubyBuZWVkIHRvIGZpcmUgYW55IGV2ZW50cywgZXRjLgogICAgICAgIHRoaXMudmlldy5mb3JjZVJlbmRlcigpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgb2xkU2VsZWN0aW9uOiB0aGlzLnNlbGVjdGlvbiwKICAgICAgICAgIG5ld1NlbGVjdGlvbjogbmV3Vmlld1NlbGVjdGlvbiwKICAgICAgICAgIGRvbVNlbGVjdGlvbjogZG9tU2VsZWN0aW9uCiAgICAgICAgfTsgLy8gUHJlcGFyZSBkYXRhIGZvciBuZXcgc2VsZWN0aW9uIGFuZCBmaXJlIGFwcHJvcHJpYXRlIGV2ZW50cy4KCiAgICAgICAgdGhpcy5kb2N1bWVudC5maXJlKCdzZWxlY3Rpb25DaGFuZ2UnLCBkYXRhKTsgLy8gQ2FsbCBgI19maXJlU2VsZWN0aW9uQ2hhbmdlRG9uZURlYm91bmNlZGAgZXZlcnkgdGltZSB3aGVuIGBzZWxlY3Rpb25DaGFuZ2VgIGV2ZW50IGlzIGZpcmVkLgogICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgZGVib3VuY2VkIHdoYXQgbWVhbnMgdGhhdCBgc2VsZWN0aW9uQ2hhbmdlRG9uZWAgZXZlbnQgd2lsbCBiZSBmaXJlZCBvbmx5IHdoZW4KICAgICAgICAvLyBkZWZpbmVkIGludCB0aGUgZnVuY3Rpb24gdGltZSB3aWxsIGVsYXBzZSBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBmdW5jdGlvbiB3YXMgY2FsbGVkLgogICAgICAgIC8vIFNvIGBzZWxlY3Rpb25DaGFuZ2VEb25lYCB3aWxsIGJlIGZpcmVkIHdoZW4gc2VsZWN0aW9uIHdpbGwgc3RvcCBjaGFuZ2luZy4KCiAgICAgICAgdGhpcy5fZmlyZVNlbGVjdGlvbkNoYW5nZURvbmVEZWJvdW5jZWQoZGF0YSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xlYXJzIGBTZWxlY3Rpb25PYnNlcnZlcmAgaW50ZXJuYWwgcHJvcGVydGllcyBjb25uZWN0ZWQgd2l0aCBwcmV2ZW50aW5nIGluZmluaXRlIGxvb3AuCiAgICAgKgogICAgICogQHByb3RlY3RlZAogICAgICovCgogIH0sIHsKICAgIGtleTogIl9jbGVhckluZmluaXRlTG9vcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NsZWFySW5maW5pdGVMb29wKCkgewogICAgICB0aGlzLl9sb29wYmFja0NvdW50ZXIgPSAwOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFNlbGVjdGlvbk9ic2VydmVyOwp9KE9ic2VydmVyKTsKLyoqCiAqIEZpcmVkIHdoZW4gYSBzZWxlY3Rpb24gaGFzIGNoYW5nZWQuIFRoaXMgZXZlbnQgaXMgZmlyZWQgb25seSB3aGVuIHRoZSBzZWxlY3Rpb24gY2hhbmdlIHdhcyB0aGUgb25seSBjaGFuZ2UgdGhhdCBoYXBwZW5lZAogKiBpbiB0aGUgZG9jdW1lbnQsIGFuZCB0aGUgb2xkIHNlbGVjdGlvbiBpcyBkaWZmZXJlbnQgdGhlbiB0aGUgbmV3IHNlbGVjdGlvbi4KICoKICogSW50cm9kdWNlZCBieSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyfS4KICoKICogTm90ZSB0aGF0IGJlY2F1c2Uge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9zZWxlY3Rpb25vYnNlcnZlcn5TZWxlY3Rpb25PYnNlcnZlcn0gaXMgYXR0YWNoZWQgYnkgdGhlCiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvdmlld35WaWV3fSB0aGlzIGV2ZW50IGlzIGF2YWlsYWJsZSBieSBkZWZhdWx0LgogKgogKiBAc2VlIG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9zZWxlY3Rpb25vYnNlcnZlcn5TZWxlY3Rpb25PYnNlcnZlcgogKiBAZXZlbnQgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50I2V2ZW50OnNlbGVjdGlvbkNoYW5nZQogKiBAcGFyYW0ge09iamVjdH0gZGF0YQogKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudHNlbGVjdGlvbn5Eb2N1bWVudFNlbGVjdGlvbn0gZGF0YS5vbGRTZWxlY3Rpb24gT2xkIFZpZXcgc2VsZWN0aW9uIHdoaWNoIGlzCiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnR+RG9jdW1lbnQjc2VsZWN0aW9ufS4KICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvc2VsZWN0aW9uflNlbGVjdGlvbn0gZGF0YS5uZXdTZWxlY3Rpb24gTmV3IFZpZXcgc2VsZWN0aW9uIHdoaWNoIGlzIGNvbnZlcnRlZCBET00gc2VsZWN0aW9uLgogKiBAcGFyYW0ge1NlbGVjdGlvbn0gZGF0YS5kb21TZWxlY3Rpb24gTmF0aXZlIERPTSBzZWxlY3Rpb24uCiAqLwoKLyoqCiAqIEZpcmVkIHdoZW4gc2VsZWN0aW9uIHN0b3BzIGNoYW5naW5nLgogKgogKiBJbnRyb2R1Y2VkIGJ5IHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvc2VsZWN0aW9ub2JzZXJ2ZXJ+U2VsZWN0aW9uT2JzZXJ2ZXJ9LgogKgogKiBOb3RlIHRoYXQgYmVjYXVzZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyfSBpcyBhdHRhY2hlZCBieSB0aGUKICoge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy92aWV3flZpZXd9IHRoaXMgZXZlbnQgaXMgYXZhaWxhYmxlIGJ5IGRlZmF1bHQuCiAqCiAqIEBzZWUgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyCiAqIEBldmVudCBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnR+RG9jdW1lbnQjZXZlbnQ6c2VsZWN0aW9uQ2hhbmdlRG9uZQogKiBAcGFyYW0ge09iamVjdH0gZGF0YQogKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudHNlbGVjdGlvbn5Eb2N1bWVudFNlbGVjdGlvbn0gZGF0YS5vbGRTZWxlY3Rpb24gT2xkIFZpZXcgc2VsZWN0aW9uIHdoaWNoIGlzCiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnR+RG9jdW1lbnQjc2VsZWN0aW9ufS4KICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvc2VsZWN0aW9uflNlbGVjdGlvbn0gZGF0YS5uZXdTZWxlY3Rpb24gTmV3IFZpZXcgc2VsZWN0aW9uIHdoaWNoIGlzIGNvbnZlcnRlZCBET00gc2VsZWN0aW9uLgogKiBAcGFyYW0ge1NlbGVjdGlvbn0gZGF0YS5kb21TZWxlY3Rpb24gTmF0aXZlIERPTSBzZWxlY3Rpb24uCiAqLwoKCmV4cG9ydCB7IFNlbGVjdGlvbk9ic2VydmVyIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/view/observer/selectionobserver.js"],"names":["Observer","MutationObserver","debounce","SelectionObserver","view","mutationObserver","getObserver","selection","document","domConverter","_documents","WeakSet","_fireSelectionChangeDoneDebounced","data","fire","_clearInfiniteLoopInterval","setInterval","_clearInfiniteLoop","_loopbackCounter","domElement","domDocument","ownerDocument","has","listenTo","evt","domEvent","_handleSelectionChange","add","clearInterval","cancel","isEnabled","domSelection","defaultView","getSelection","checkShouldIgnoreEventFromTarget","anchorNode","flush","newViewSelection","domSelectionToView","rangeCount","hasDomSelection","isEqual","isDomSelectionCorrect","isSimilar","forceRender","oldSelection","newSelection"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AAEA,OAAOA,QAAP,MAAqB,YAArB;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,SAASC,QAAT,QAAyB,WAAzB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IACqBC,iB;;;;;AACpB,6BAAaC,IAAb,EAAoB;AAAA;;AAAA;;AACnB,8BAAOA,IAAP;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACE,UAAKC,gBAAL,GAAwBD,IAAI,CAACE,WAAL,CAAkBL,gBAAlB,CAAxB;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AACE,UAAKM,SAAL,GAAiB,MAAKC,QAAL,CAAcD,SAA/B;AAEA;;AACA;AACF;AACA;AACA;AACA;AACA;;AACE;;AACA,UAAKE,YAAL,GAAoBL,IAAI,CAACK,YAAzB;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;;AACE,UAAKC,UAAL,GAAkB,IAAIC,OAAJ,EAAlB;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;;AACE,UAAKC,iCAAL,GAAyCV,QAAQ,CAAE,UAAAW,IAAI;AAAA,aAAI,MAAKL,QAAL,CAAcM,IAAd,CAAoB,qBAApB,EAA2CD,IAA3C,CAAJ;AAAA,KAAN,EAA6D,GAA7D,CAAjD;AAEA,UAAKE,0BAAL,GAAkCC,WAAW,CAAE;AAAA,aAAM,MAAKC,kBAAL,EAAN;AAAA,KAAF,EAAmC,IAAnC,CAA7C;AAEA;AACF;AACA;AACA;AACA;AACA;;AACE,UAAKC,gBAAL,GAAwB,CAAxB;AA5DmB;AA6DnB;AAED;AACD;AACA;;;;;WACC,iBAASC,UAAT,EAAsB;AAAA;;AACrB,UAAMC,WAAW,GAAGD,UAAU,CAACE,aAA/B,CADqB,CAGrB;;AACA,UAAK,KAAKX,UAAL,CAAgBY,GAAhB,CAAqBF,WAArB,CAAL,EAA0C;AACzC;AACA;;AAED,WAAKG,QAAL,CAAeH,WAAf,EAA4B,iBAA5B,EAA+C,UAAEI,GAAF,EAAOC,QAAP,EAAqB;AACnE,QAAA,MAAI,CAACC,sBAAL,CAA6BD,QAA7B,EAAuCL,WAAvC;AACA,OAFD;;AAIA,WAAKV,UAAL,CAAgBiB,GAAhB,CAAqBP,WAArB;AACA;AAED;AACD;AACA;;;;WACC,mBAAU;AACT;;AAEAQ,MAAAA,aAAa,CAAE,KAAKb,0BAAP,CAAb;;AACA,WAAKH,iCAAL,CAAuCiB,MAAvC;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACC,gCAAwBJ,QAAxB,EAAkCL,WAAlC,EAAgD;AAC/C,UAAK,CAAC,KAAKU,SAAX,EAAuB;AACtB;AACA;;AAED,UAAMC,YAAY,GAAGX,WAAW,CAACY,WAAZ,CAAwBC,YAAxB,EAArB;;AAEA,UAAK,KAAKC,gCAAL,CAAuCH,YAAY,CAACI,UAApD,CAAL,EAAwE;AACvE;AACA,OAT8C,CAW/C;;;AACA,WAAK9B,gBAAL,CAAsB+B,KAAtB,GAZ+C,CAc/C;AACA;;AACA,UAAMC,gBAAgB,GAAG,KAAK5B,YAAL,CAAkB6B,kBAAlB,CAAsCP,YAAtC,CAAzB,CAhB+C,CAkB/C;AACA;AACA;AACA;;AACA,UAAKM,gBAAgB,CAACE,UAAjB,IAA+B,CAApC,EAAwC;AACvC,aAAKnC,IAAL,CAAUoC,eAAV,GAA4B,KAA5B;AAEA;AACA;;AAED,WAAKpC,IAAL,CAAUoC,eAAV,GAA4B,IAA5B;;AAEA,UAAK,KAAKjC,SAAL,CAAekC,OAAf,CAAwBJ,gBAAxB,KAA8C,KAAK5B,YAAL,CAAkBiC,qBAAlB,CAAyCX,YAAzC,CAAnD,EAA6G;AAC5G;AACA,OAhC8C,CAkC/C;AACA;AACA;;;AACA,UAAK,EAAE,KAAKb,gBAAP,GAA0B,EAA/B,EAAoC;AACnC;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAED,UAAK,KAAKX,SAAL,CAAeoC,SAAf,CAA0BN,gBAA1B,CAAL,EAAoD;AACnD;AACA;AACA,aAAKjC,IAAL,CAAUwC,WAAV;AACA,OAJD,MAIO;AACN,YAAM/B,IAAI,GAAG;AACZgC,UAAAA,YAAY,EAAE,KAAKtC,SADP;AAEZuC,UAAAA,YAAY,EAAET,gBAFF;AAGZN,UAAAA,YAAY,EAAZA;AAHY,SAAb,CADM,CAON;;AACA,aAAKvB,QAAL,CAAcM,IAAd,CAAoB,iBAApB,EAAuCD,IAAvC,EARM,CAUN;AACA;AACA;AACA;;AACA,aAAKD,iCAAL,CAAwCC,IAAxC;AACA;AACD;AAED;AACD;AACA;AACA;AACA;;;;WACC,8BAAqB;AACpB,WAAKK,gBAAL,GAAwB,CAAxB;AACA;;;;EAlL6ClB,Q;AAqL/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;SAtNqBG,iB","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/observer/selectionobserver\n */\n\n/* global setInterval, clearInterval */\n\nimport Observer from './observer';\nimport MutationObserver from './mutationobserver';\nimport { debounce } from 'lodash-es';\n\n/**\n * Selection observer class observes selection changes in the document. If a selection changes on the document this\n * observer checks if there are any mutations and if the DOM selection is different from the\n * {@link module:engine/view/document~Document#selection view selection}. The selection observer fires\n * {@link module:engine/view/document~Document#event:selectionChange} event only if a selection change was the only change in the document\n * and the DOM selection is different then the view selection.\n *\n * Note that this observer is attached by the {@link module:engine/view/view~View} and is available by default.\n *\n * @see module:engine/view/observer/mutationobserver~MutationObserver\n * @extends module:engine/view/observer/observer~Observer\n */\nexport default class SelectionObserver extends Observer {\n\tconstructor( view ) {\n\t\tsuper( view );\n\n\t\t/**\n\t\t * Instance of the mutation observer. Selection observer calls\n\t\t * {@link module:engine/view/observer/mutationobserver~MutationObserver#flush} to ensure that the mutations will be handled\n\t\t * before the {@link module:engine/view/document~Document#event:selectionChange} event is fired.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/observer/mutationobserver~MutationObserver}\n\t\t * module:engine/view/observer/selectionobserver~SelectionObserver#mutationObserver\n\t\t */\n\t\tthis.mutationObserver = view.getObserver( MutationObserver );\n\n\t\t/**\n\t\t * Reference to the view {@link module:engine/view/documentselection~DocumentSelection} object used to compare\n\t\t * new selection with it.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/documentselection~DocumentSelection}\n\t\t * module:engine/view/observer/selectionobserver~SelectionObserver#selection\n\t\t */\n\t\tthis.selection = this.document.selection;\n\n\t\t/* eslint-disable max-len */\n\t\t/**\n\t\t * Reference to the {@link module:engine/view/view~View#domConverter}.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/domconverter~DomConverter} module:engine/view/observer/selectionobserver~SelectionObserver#domConverter\n\t\t */\n\t\t/* eslint-enable max-len */\n\t\tthis.domConverter = view.domConverter;\n\n\t\t/**\n\t\t * A set of documents which have added `selectionchange` listener to avoid adding a listener twice to the same\n\t\t * document.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakSet.<Document>} module:engine/view/observer/selectionobserver~SelectionObserver#_documents\n\t\t */\n\t\tthis._documents = new WeakSet();\n\n\t\t/**\n\t\t * Fires debounced event `selectionChangeDone`. It uses `lodash#debounce` method to delay function call.\n\t\t *\n\t\t * @private\n\t\t * @param {Object} data Selection change data.\n\t\t * @method #_fireSelectionChangeDoneDebounced\n\t\t */\n\t\tthis._fireSelectionChangeDoneDebounced = debounce( data => this.document.fire( 'selectionChangeDone', data ), 200 );\n\n\t\tthis._clearInfiniteLoopInterval = setInterval( () => this._clearInfiniteLoop(), 1000 );\n\n\t\t/**\n\t\t * Private property to check if the code does not enter infinite loop.\n\t\t *\n\t\t * @private\n\t\t * @member {Number} module:engine/view/observer/selectionobserver~SelectionObserver#_loopbackCounter\n\t\t */\n\t\tthis._loopbackCounter = 0;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tobserve( domElement ) {\n\t\tconst domDocument = domElement.ownerDocument;\n\n\t\t// Add listener once per each document.\n\t\tif ( this._documents.has( domDocument ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.listenTo( domDocument, 'selectionchange', ( evt, domEvent ) => {\n\t\t\tthis._handleSelectionChange( domEvent, domDocument );\n\t\t} );\n\n\t\tthis._documents.add( domDocument );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\n\t\tclearInterval( this._clearInfiniteLoopInterval );\n\t\tthis._fireSelectionChangeDoneDebounced.cancel();\n\t}\n\n\t/**\n\t * Selection change listener. {@link module:engine/view/observer/mutationobserver~MutationObserver#flush Flush} mutations, check if\n\t * a selection changes and fires {@link module:engine/view/document~Document#event:selectionChange} event on every change\n\t * and {@link module:engine/view/document~Document#event:selectionChangeDone} when a selection stop changing.\n\t *\n\t * @private\n\t * @param {Event} domEvent DOM event.\n\t * @param {Document} domDocument DOM document.\n\t */\n\t_handleSelectionChange( domEvent, domDocument ) {\n\t\tif ( !this.isEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domSelection = domDocument.defaultView.getSelection();\n\n\t\tif ( this.checkShouldIgnoreEventFromTarget( domSelection.anchorNode ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure the mutation event will be before selection event on all browsers.\n\t\tthis.mutationObserver.flush();\n\n\t\t// If there were mutations then the view will be re-rendered by the mutation observer and the selection\n\t\t// will be updated, so the selections will equal and the event will not be fired, as expected.\n\t\tconst newViewSelection = this.domConverter.domSelectionToView( domSelection );\n\n\t\t// Do not convert selection change if the new view selection has no ranges in it.\n\t\t//\n\t\t// It means that the DOM selection is in some way incorrect. Ranges that were in the DOM selection could not be\n\t\t// converted to the view. This happens when the DOM selection was moved outside of the editable element.\n\t\tif ( newViewSelection.rangeCount == 0 ) {\n\t\t\tthis.view.hasDomSelection = false;\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.view.hasDomSelection = true;\n\n\t\tif ( this.selection.isEqual( newViewSelection ) && this.domConverter.isDomSelectionCorrect( domSelection ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure we are not in the infinite loop (#400).\n\t\t// This counter is reset each second. 60 selection changes in 1 second is enough high number\n\t\t// to be very difficult (impossible) to achieve using just keyboard keys (during normal editor use).\n\t\tif ( ++this._loopbackCounter > 60 ) {\n\t\t\t// Selection change observer detected an infinite rendering loop.\n\t\t\t// Most probably you try to put the selection in the position which is not allowed\n\t\t\t// by the browser and browser fixes it automatically what causes `selectionchange` event on\n\t\t\t// which a loopback through a model tries to re-render the wrong selection and again.\n\t\t\t//\n\t\t\t// @if CK_DEBUG // console.warn( 'Selection change observer detected an infinite rendering loop.' );\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.selection.isSimilar( newViewSelection ) ) {\n\t\t\t// If selection was equal and we are at this point of algorithm, it means that it was incorrect.\n\t\t\t// Just re-render it, no need to fire any events, etc.\n\t\t\tthis.view.forceRender();\n\t\t} else {\n\t\t\tconst data = {\n\t\t\t\toldSelection: this.selection,\n\t\t\t\tnewSelection: newViewSelection,\n\t\t\t\tdomSelection\n\t\t\t};\n\n\t\t\t// Prepare data for new selection and fire appropriate events.\n\t\t\tthis.document.fire( 'selectionChange', data );\n\n\t\t\t// Call `#_fireSelectionChangeDoneDebounced` every time when `selectionChange` event is fired.\n\t\t\t// This function is debounced what means that `selectionChangeDone` event will be fired only when\n\t\t\t// defined int the function time will elapse since the last time the function was called.\n\t\t\t// So `selectionChangeDone` will be fired when selection will stop changing.\n\t\t\tthis._fireSelectionChangeDoneDebounced( data );\n\t\t}\n\t}\n\n\t/**\n\t * Clears `SelectionObserver` internal properties connected with preventing infinite loop.\n\t *\n\t * @protected\n\t */\n\t_clearInfiniteLoop() {\n\t\tthis._loopbackCounter = 0;\n\t}\n}\n\n/**\n * Fired when a selection has changed. This event is fired only when the selection change was the only change that happened\n * in the document, and the old selection is different then the new selection.\n *\n * Introduced by {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n *\n * Note that because {@link module:engine/view/observer/selectionobserver~SelectionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/selectionobserver~SelectionObserver\n * @event module:engine/view/document~Document#event:selectionChange\n * @param {Object} data\n * @param {module:engine/view/documentselection~DocumentSelection} data.oldSelection Old View selection which is\n * {@link module:engine/view/document~Document#selection}.\n * @param {module:engine/view/selection~Selection} data.newSelection New View selection which is converted DOM selection.\n * @param {Selection} data.domSelection Native DOM selection.\n */\n\n/**\n * Fired when selection stops changing.\n *\n * Introduced by {@link module:engine/view/observer/selectionobserver~SelectionObserver}.\n *\n * Note that because {@link module:engine/view/observer/selectionobserver~SelectionObserver} is attached by the\n * {@link module:engine/view/view~View} this event is available by default.\n *\n * @see module:engine/view/observer/selectionobserver~SelectionObserver\n * @event module:engine/view/document~Document#event:selectionChangeDone\n * @param {Object} data\n * @param {module:engine/view/documentselection~DocumentSelection} data.oldSelection Old View selection which is\n * {@link module:engine/view/document~Document#selection}.\n * @param {module:engine/view/selection~Selection} data.newSelection New View selection which is converted DOM selection.\n * @param {Selection} data.domSelection Native DOM selection.\n */\n"]}]}