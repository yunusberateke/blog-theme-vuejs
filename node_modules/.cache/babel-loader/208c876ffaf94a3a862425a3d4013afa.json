{"remainingRequest":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js?{}!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-widget/src/verticalnavigation.js","dependencies":[{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-widget/src/verticalnavigation.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5hbmNob3IuanMiOwoKLyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDIxLCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KaW1wb3J0IHsga2V5Q29kZXMgfSBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9rZXlib2FyZCc7CmltcG9ydCBSZWN0IGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvc3JjL2RvbS9yZWN0JzsKLyoqCiAqIEBtb2R1bGUgd2lkZ2V0L3ZlcnRpY2FsbmF2aWdhdGlvbmhhbmRsZXIKICovCgovKioKICogUmV0dXJucyAna2V5ZG93bicgaGFuZGxlciBmb3IgdXAvZG93biBhcnJvdyBrZXlzIHRoYXQgbW9kaWZpZXMgdGhlIGNhcmV0IG1vdmVtZW50IGlmIGl0J3MgaW4gYSB0ZXh0IGxpbmUgbmV4dCB0byBhbiBvYmplY3QuCiAqCiAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9jb250cm9sbGVyL2VkaXRpbmdjb250cm9sbGVyfkVkaXRpbmdDb250cm9sbGVyfSBlZGl0aW5nIFRoZSBlZGl0aW5nIGNvbnRyb2xsZXIuCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0KICovCgpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB2ZXJ0aWNhbE5hdmlnYXRpb25IYW5kbGVyKGVkaXRpbmcpIHsKICB2YXIgbW9kZWwgPSBlZGl0aW5nLm1vZGVsOwogIHJldHVybiBmdW5jdGlvbiAoZXZ0LCBkYXRhKSB7CiAgICB2YXIgYXJyb3dVcFByZXNzZWQgPSBkYXRhLmtleUNvZGUgPT0ga2V5Q29kZXMuYXJyb3d1cDsKICAgIHZhciBhcnJvd0Rvd25QcmVzc2VkID0gZGF0YS5rZXlDb2RlID09IGtleUNvZGVzLmFycm93ZG93bjsKICAgIHZhciBleHBhbmRTZWxlY3Rpb24gPSBkYXRhLnNoaWZ0S2V5OwogICAgdmFyIHNlbGVjdGlvbiA9IG1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbjsKCiAgICBpZiAoIWFycm93VXBQcmVzc2VkICYmICFhcnJvd0Rvd25QcmVzc2VkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgaXNGb3J3YXJkID0gYXJyb3dEb3duUHJlc3NlZDsgLy8gTmF2aWdhdGlvbiBpcyBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uIHRoYW4gdGhlIHNlbGVjdGlvbiBkaXJlY3Rpb24gc28gdGhpcyBpcyBzaHJpbmtpbmcgb2YgdGhlIHNlbGVjdGlvbi4KICAgIC8vIFNlbGVjdGlvbiBmb3Igc3VyZSB3aWxsIG5vdCBhcHByb2FjaCBhbnkgb2JqZWN0LgoKICAgIGlmIChleHBhbmRTZWxlY3Rpb24gJiYgc2VsZWN0aW9uV2lsbFNocmluayhzZWxlY3Rpb24sIGlzRm9yd2FyZCkpIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBGaW5kIGEgcmFuZ2UgYmV0d2VlbiBzZWxlY3Rpb24gYW5kIGNsb3Nlc3QgbGltaXQgZWxlbWVudC4KCgogICAgdmFyIHJhbmdlID0gZmluZFRleHRSYW5nZUZyb21TZWxlY3Rpb24oZWRpdGluZywgc2VsZWN0aW9uLCBpc0ZvcndhcmQpOwoKICAgIGlmICghcmFuZ2UgfHwgcmFuZ2UuaXNDb2xsYXBzZWQpIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBJZiB0aGUgcmFuZ2UgaXMgYSBzaW5nbGUgbGluZSAodGhlcmUgaXMgbm8gd29yZCB3cmFwcGluZykgdGhlbiBtb3ZlIHRoZSBzZWxlY3Rpb24gdG8gdGhlIHBvc2l0aW9uIGNsb3Nlc3QgdG8gdGhlIGxpbWl0IGVsZW1lbnQuCiAgICAvLwogICAgLy8gV2UgY2FuJ3QgbW92ZSB0aGUgc2VsZWN0aW9uIGRpcmVjdGx5IHRvIHRoZSBpc09iamVjdCBlbGVtZW50IChlZy4gdGFibGUgY2VsbCkgYmVjYXVzZSBvZiBkdWFsIHBvc2l0aW9uIGF0IHRoZSBlbmQvYmVnaW5uaW5nCiAgICAvLyBvZiB3cmFwcGVkIGxpbmUgKGl0J3MgYXQgdGhlIHNhbWUgdGltZSBhdCB0aGUgZW5kIG9mIG9uZSBsaW5lIGFuZCBhdCB0aGUgc3RhcnQgb2YgdGhlIG5leHQgbGluZSkuCgoKICAgIGlmIChpc1NpbmdsZUxpbmVSYW5nZShlZGl0aW5nLCByYW5nZSwgaXNGb3J3YXJkKSkgewogICAgICBtb2RlbC5jaGFuZ2UoZnVuY3Rpb24gKHdyaXRlcikgewogICAgICAgIHZhciBuZXdQb3NpdGlvbiA9IGlzRm9yd2FyZCA/IHJhbmdlLmVuZCA6IHJhbmdlLnN0YXJ0OwoKICAgICAgICBpZiAoZXhwYW5kU2VsZWN0aW9uKSB7CiAgICAgICAgICB2YXIgbmV3U2VsZWN0aW9uID0gbW9kZWwuY3JlYXRlU2VsZWN0aW9uKHNlbGVjdGlvbi5hbmNob3IpOwogICAgICAgICAgbmV3U2VsZWN0aW9uLnNldEZvY3VzKG5ld1Bvc2l0aW9uKTsKICAgICAgICAgIHdyaXRlci5zZXRTZWxlY3Rpb24obmV3U2VsZWN0aW9uKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd3JpdGVyLnNldFNlbGVjdGlvbihuZXdQb3NpdGlvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgZXZ0LnN0b3AoKTsKICAgICAgZGF0YS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBkYXRhLnN0b3BQcm9wYWdhdGlvbigpOwogICAgfQogIH07Cn0gLy8gRmluZHMgdGhlIHJhbmdlIGJldHdlZW4gc2VsZWN0aW9uIGFuZCBjbG9zZXN0IGxpbWl0IGVsZW1lbnQgKGluIHRoZSBkaXJlY3Rpb24gb2YgbmF2aWdhdGlvbikuCi8vIFRoZSBwb3NpdGlvbiBuZXh0IHRvIGxpbWl0IGVsZW1lbnQgaXMgYWRqdXN0ZWQgdG8gdGhlIGNsb3Nlc3QgYWxsb3dlZCBgJHRleHRgIHBvc2l0aW9uLgovLwovLyBSZXR1cm5zIGBudWxsYCBpZiwgYWNjb3JkaW5nIHRvIHRoZSBzY2hlbWEsIHRoZSByZXN1bHRpbmcgcmFuZ2UgY2Fubm90IGNvbnRhaW4gYSBgJHRleHRgIGVsZW1lbnQuCi8vCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9jb250cm9sbGVyL2VkaXRpbmdjb250cm9sbGVyfkVkaXRpbmdDb250cm9sbGVyfSBlZGl0aW5nIFRoZSBlZGl0aW5nIGNvbnRyb2xsZXIuCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9zZWxlY3Rpb25+U2VsZWN0aW9ufSBzZWxlY3Rpb24gVGhlIGN1cnJlbnQgc2VsZWN0aW9uLgovLyBAcGFyYW0ge0Jvb2xlYW59IGlzRm9yd2FyZCBUaGUgZXhwZWN0ZWQgbmF2aWdhdGlvbiBkaXJlY3Rpb24uCi8vIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL21vZGVsL3JhbmdlflJhbmdlfG51bGx9Ci8vCgpmdW5jdGlvbiBmaW5kVGV4dFJhbmdlRnJvbVNlbGVjdGlvbihlZGl0aW5nLCBzZWxlY3Rpb24sIGlzRm9yd2FyZCkgewogIHZhciBtb2RlbCA9IGVkaXRpbmcubW9kZWw7CgogIGlmIChpc0ZvcndhcmQpIHsKICAgIHZhciBzdGFydFBvc2l0aW9uID0gc2VsZWN0aW9uLmlzQ29sbGFwc2VkID8gc2VsZWN0aW9uLmZvY3VzIDogc2VsZWN0aW9uLmdldExhc3RQb3NpdGlvbigpOwogICAgdmFyIGVuZFBvc2l0aW9uID0gZ2V0TmVhcmVzdE5vbklubGluZUxpbWl0KG1vZGVsLCBzdGFydFBvc2l0aW9uLCAnZm9yd2FyZCcpOyAvLyBUaGVyZSBpcyBubyBsaW1pdCBlbGVtZW50LCBicm93c2VyIHNob3VsZCBoYW5kbGUgdGhpcy4KCiAgICBpZiAoIWVuZFBvc2l0aW9uKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHZhciByYW5nZSA9IG1vZGVsLmNyZWF0ZVJhbmdlKHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uKTsKICAgIHZhciBsYXN0UmFuZ2VQb3NpdGlvbiA9IGdldE5lYXJlc3RUZXh0UG9zaXRpb24obW9kZWwuc2NoZW1hLCByYW5nZSwgJ2JhY2t3YXJkJyk7CgogICAgaWYgKGxhc3RSYW5nZVBvc2l0aW9uICYmIHN0YXJ0UG9zaXRpb24uaXNCZWZvcmUobGFzdFJhbmdlUG9zaXRpb24pKSB7CiAgICAgIHJldHVybiBtb2RlbC5jcmVhdGVSYW5nZShzdGFydFBvc2l0aW9uLCBsYXN0UmFuZ2VQb3NpdGlvbik7CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfSBlbHNlIHsKICAgIHZhciBfZW5kUG9zaXRpb24gPSBzZWxlY3Rpb24uaXNDb2xsYXBzZWQgPyBzZWxlY3Rpb24uZm9jdXMgOiBzZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpOwoKICAgIHZhciBfc3RhcnRQb3NpdGlvbiA9IGdldE5lYXJlc3ROb25JbmxpbmVMaW1pdChtb2RlbCwgX2VuZFBvc2l0aW9uLCAnYmFja3dhcmQnKTsgLy8gVGhlcmUgaXMgbm8gbGltaXQgZWxlbWVudCwgYnJvd3NlciBzaG91bGQgaGFuZGxlIHRoaXMuCgoKICAgIGlmICghX3N0YXJ0UG9zaXRpb24pIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgdmFyIF9yYW5nZSA9IG1vZGVsLmNyZWF0ZVJhbmdlKF9zdGFydFBvc2l0aW9uLCBfZW5kUG9zaXRpb24pOwoKICAgIHZhciBmaXJzdFJhbmdlUG9zaXRpb24gPSBnZXROZWFyZXN0VGV4dFBvc2l0aW9uKG1vZGVsLnNjaGVtYSwgX3JhbmdlLCAnZm9yd2FyZCcpOwoKICAgIGlmIChmaXJzdFJhbmdlUG9zaXRpb24gJiYgX2VuZFBvc2l0aW9uLmlzQWZ0ZXIoZmlyc3RSYW5nZVBvc2l0aW9uKSkgewogICAgICByZXR1cm4gbW9kZWwuY3JlYXRlUmFuZ2UoZmlyc3RSYW5nZVBvc2l0aW9uLCBfZW5kUG9zaXRpb24pOwogICAgfQoKICAgIHJldHVybiBudWxsOwogIH0KfSAvLyBGaW5kcyB0aGUgbGltaXQgZWxlbWVudCBwb3NpdGlvbiB0aGF0IGlzIGNsb3Nlc3QgdG8gc3RhcnRQb3NpdGlvbi4KLy8KLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL21vZGVsfk1vZGVsfSBtb2RlbAovLyBAcGFyYW0gezxtb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9uPn0gc3RhcnRQb3NpdGlvbgovLyBAcGFyYW0geydmb3J3YXJkJ3wnYmFja3dhcmQnfSBkaXJlY3Rpb24gU2VhcmNoIGRpcmVjdGlvbi4KLy8gQHJldHVybnMgezxtb2R1bGU6ZW5naW5lL21vZGVsL3Bvc2l0aW9uflBvc2l0aW9uPnxudWxsfQovLwoKCmZ1bmN0aW9uIGdldE5lYXJlc3ROb25JbmxpbmVMaW1pdChtb2RlbCwgc3RhcnRQb3NpdGlvbiwgZGlyZWN0aW9uKSB7CiAgdmFyIHNjaGVtYSA9IG1vZGVsLnNjaGVtYTsKICB2YXIgcmFuZ2UgPSBtb2RlbC5jcmVhdGVSYW5nZUluKHN0YXJ0UG9zaXRpb24ucm9vdCk7CiAgdmFyIHdhbGtlclZhbHVlVHlwZSA9IGRpcmVjdGlvbiA9PSAnZm9yd2FyZCcgPyAnZWxlbWVudFN0YXJ0JyA6ICdlbGVtZW50RW5kJzsKCiAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJhbmdlLmdldFdhbGtlcih7CiAgICBzdGFydFBvc2l0aW9uOiBzdGFydFBvc2l0aW9uLAogICAgZGlyZWN0aW9uOiBkaXJlY3Rpb24KICB9KSksCiAgICAgIF9zdGVwOwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgdmFyIF9zdGVwJHZhbHVlID0gX3N0ZXAudmFsdWUsCiAgICAgICAgICBwcmV2aW91c1Bvc2l0aW9uID0gX3N0ZXAkdmFsdWUucHJldmlvdXNQb3NpdGlvbiwKICAgICAgICAgIGl0ZW0gPSBfc3RlcCR2YWx1ZS5pdGVtLAogICAgICAgICAgdHlwZSA9IF9zdGVwJHZhbHVlLnR5cGU7CgogICAgICBpZiAoc2NoZW1hLmlzTGltaXQoaXRlbSkgJiYgIXNjaGVtYS5pc0lubGluZShpdGVtKSkgewogICAgICAgIHJldHVybiBwcmV2aW91c1Bvc2l0aW9uOwogICAgICB9IC8vIFN0b3AgbG9va2luZyBmb3IgaXNMaW1pdCBlbGVtZW50IGlmIHRoZSBuZXh0IGVsZW1lbnQgaXMgYSBibG9jayBlbGVtZW50IChpdCBpcyBmb3Igc3VyZSBub3Qgc2luZ2xlIGxpbmUpLgoKCiAgICAgIGlmICh0eXBlID09IHdhbGtlclZhbHVlVHlwZSAmJiBzY2hlbWEuaXNCbG9jayhpdGVtKSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3IuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IuZigpOwogIH0KCiAgcmV0dXJuIG51bGw7Cn0gLy8gQmFzaW5nIG9uIHRoZSBwcm92aWRlZCByYW5nZSwgZmluZHMgdGhlIGZpcnN0IG9yIGxhc3QgKGRlcGVuZGluZyBvbiBgZGlyZWN0aW9uYCkgcG9zaXRpb24gaW5zaWRlIHRoZSByYW5nZQovLyB0aGF0IGNhbiBjb250YWluIGAkdGV4dGAgKGFjY29yZGluZyB0byBzY2hlbWEpLgovLwovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvc2NoZW1hflNjaGVtYX0gc2NoZW1hIFRoZSBzY2hlbWEuCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9yYW5nZX5SYW5nZX0gcmFuZ2UgVGhlIHJhbmdlIHRvIGZpbmQgdGhlIHBvc2l0aW9uIGluLgovLyBAcGFyYW0geydmb3J3YXJkJ3wnYmFja3dhcmQnfSBkaXJlY3Rpb24gU2VhcmNoIGRpcmVjdGlvbi4KLy8gQHJldHVybnMge21vZHVsZTplbmdpbmUvbW9kZWwvcG9zaXRpb25+UG9zaXRpb259IFRoZSBuZWFyZXN0IHNlbGVjdGlvbiByYW5nZS4KLy8KCgpmdW5jdGlvbiBnZXROZWFyZXN0VGV4dFBvc2l0aW9uKHNjaGVtYSwgcmFuZ2UsIGRpcmVjdGlvbikgewogIHZhciBwb3NpdGlvbiA9IGRpcmVjdGlvbiA9PSAnYmFja3dhcmQnID8gcmFuZ2UuZW5kIDogcmFuZ2Uuc3RhcnQ7CgogIGlmIChzY2hlbWEuY2hlY2tDaGlsZChwb3NpdGlvbiwgJyR0ZXh0JykpIHsKICAgIHJldHVybiBwb3NpdGlvbjsKICB9CgogIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmFuZ2UuZ2V0V2Fsa2VyKHsKICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uCiAgfSkpLAogICAgICBfc3RlcDI7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICB2YXIgbmV4dFBvc2l0aW9uID0gX3N0ZXAyLnZhbHVlLm5leHRQb3NpdGlvbjsKCiAgICAgIGlmIChzY2hlbWEuY2hlY2tDaGlsZChuZXh0UG9zaXRpb24sICckdGV4dCcpKSB7CiAgICAgICAgcmV0dXJuIG5leHRQb3NpdGlvbjsKICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjIuZigpOwogIH0KfSAvLyBDaGVja3MgaWYgdGhlIERPTSByYW5nZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm92aWRlZCBtb2RlbCByYW5nZSByZW5kZXJzIGFzIGEgc2luZ2xlIGxpbmUgYnkgYW5hbHl6aW5nIERPTVJlY3RzCi8vICh2ZXJpZnlpbmcgaWYgdGhleSB2aXN1YWxseSB3cmFwIGNvbnRlbnQgdG8gdGhlIG5leHQgbGluZSkuCi8vCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9jb250cm9sbGVyL2VkaXRpbmdjb250cm9sbGVyfkVkaXRpbmdDb250cm9sbGVyfSBlZGl0aW5nIFRoZSBlZGl0aW5nIGNvbnRyb2xsZXIuCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9yYW5nZX5SYW5nZX0gbW9kZWxSYW5nZSBUaGUgY3VycmVudCB0YWJsZSBjZWxsIGNvbnRlbnQgcmFuZ2UuCi8vIEBwYXJhbSB7Qm9vbGVhbn0gaXNGb3J3YXJkIFRoZSBleHBlY3RlZCBuYXZpZ2F0aW9uIGRpcmVjdGlvbi4KLy8gQHJldHVybnMge0Jvb2xlYW59Ci8vCgoKZnVuY3Rpb24gaXNTaW5nbGVMaW5lUmFuZ2UoZWRpdGluZywgbW9kZWxSYW5nZSwgaXNGb3J3YXJkKSB7CiAgdmFyIG1vZGVsID0gZWRpdGluZy5tb2RlbDsKICB2YXIgZG9tQ29udmVydGVyID0gZWRpdGluZy52aWV3LmRvbUNvbnZlcnRlcjsgLy8gV3JhcHBlZCBsaW5lcyBjb250YWluIGV4YWN0bHkgdGhlIHNhbWUgcG9zaXRpb24gYXQgdGhlIGVuZCBvZiBjdXJyZW50IGxpbmUKICAvLyBhbmQgYXQgdGhlIGJlZ2lubmluZyBvZiBuZXh0IGxpbmUuIFRoYXQgcG9zaXRpb24ncyBjbGllbnQgcmVjdCBpcyBhdCB0aGUgZW5kCiAgLy8gb2YgY3VycmVudCBsaW5lLiBJbiBjYXNlIG9mIGNhcmV0IGF0IGZpcnN0IHBvc2l0aW9uIG9mIHRoZSBsYXN0IGxpbmUgdGhhdCAnZHVhbCcKICAvLyBwb3NpdGlvbiB3b3VsZCBiZSBkZXRlY3RlZCBhcyBpdCdzIG5vdCB0aGUgbGFzdCBsaW5lLgoKICBpZiAoaXNGb3J3YXJkKSB7CiAgICB2YXIgcHJvYmUgPSBtb2RlbC5jcmVhdGVTZWxlY3Rpb24obW9kZWxSYW5nZS5zdGFydCk7CiAgICBtb2RlbC5tb2RpZnlTZWxlY3Rpb24ocHJvYmUpOyAvLyBJZiB0aGUgbmV3IHBvc2l0aW9uIGlzIGF0IHRoZSBlbmQgb2YgdGhlIGNvbnRhaW5lciB0aGVuIHdlIGNhbid0IHVzZSB0aGlzIHBvc2l0aW9uCiAgICAvLyBiZWNhdXNlIGl0IHdvdWxkIHByb3ZpZGUgaW5jb3JyZWN0IHJlc3VsdCBmb3IgZWcgY2FwdGlvbiBvZiBpbWFnZSBhbmQgc2VsZWN0aW9uCiAgICAvLyBqdXN0IGJlZm9yZSBlbmQgb2YgaXQuIEFsc28gaW4gdGhpcyBjYXNlIHRoZXJlIGlzIG5vICJkdWFsIiBwb3NpdGlvbi4KCiAgICBpZiAoIXByb2JlLmZvY3VzLmlzQXRFbmQgJiYgIW1vZGVsUmFuZ2Uuc3RhcnQuaXNFcXVhbChwcm9iZS5mb2N1cykpIHsKICAgICAgbW9kZWxSYW5nZSA9IG1vZGVsLmNyZWF0ZVJhbmdlKHByb2JlLmZvY3VzLCBtb2RlbFJhbmdlLmVuZCk7CiAgICB9CiAgfQoKICB2YXIgdmlld1JhbmdlID0gZWRpdGluZy5tYXBwZXIudG9WaWV3UmFuZ2UobW9kZWxSYW5nZSk7CiAgdmFyIGRvbVJhbmdlID0gZG9tQ29udmVydGVyLnZpZXdSYW5nZVRvRG9tKHZpZXdSYW5nZSk7CiAgdmFyIHJlY3RzID0gUmVjdC5nZXREb21SYW5nZVJlY3RzKGRvbVJhbmdlKTsKICB2YXIgYm91bmRhcnlWZXJ0aWNhbFBvc2l0aW9uOwoKICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlY3RzKSwKICAgICAgX3N0ZXAzOwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgdmFyIHJlY3QgPSBfc3RlcDMudmFsdWU7CgogICAgICBpZiAoYm91bmRhcnlWZXJ0aWNhbFBvc2l0aW9uID09PSB1bmRlZmluZWQpIHsKICAgICAgICBib3VuZGFyeVZlcnRpY2FsUG9zaXRpb24gPSBNYXRoLnJvdW5kKHJlY3QuYm90dG9tKTsKICAgICAgICBjb250aW51ZTsKICAgICAgfSAvLyBMZXQncyBjaGVjayBpZiB0aGlzIHJlY3QgaXMgaW4gbmV3IGxpbmUuCgoKICAgICAgaWYgKE1hdGgucm91bmQocmVjdC50b3ApID49IGJvdW5kYXJ5VmVydGljYWxQb3NpdGlvbikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgYm91bmRhcnlWZXJ0aWNhbFBvc2l0aW9uID0gTWF0aC5tYXgoYm91bmRhcnlWZXJ0aWNhbFBvc2l0aW9uLCBNYXRoLnJvdW5kKHJlY3QuYm90dG9tKSk7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yMy5mKCk7CiAgfQoKICByZXR1cm4gdHJ1ZTsKfQoKZnVuY3Rpb24gc2VsZWN0aW9uV2lsbFNocmluayhzZWxlY3Rpb24sIGlzRm9yd2FyZCkgewogIHJldHVybiAhc2VsZWN0aW9uLmlzQ29sbGFwc2VkICYmIHNlbGVjdGlvbi5pc0JhY2t3YXJkID09IGlzRm9yd2FyZDsKfQ=="},{"version":3,"sources":["/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-widget/src/verticalnavigation.js"],"names":["keyCodes","Rect","verticalNavigationHandler","editing","model","evt","data","arrowUpPressed","keyCode","arrowup","arrowDownPressed","arrowdown","expandSelection","shiftKey","selection","document","isForward","selectionWillShrink","range","findTextRangeFromSelection","isCollapsed","isSingleLineRange","change","writer","newPosition","end","start","newSelection","createSelection","anchor","setFocus","setSelection","stop","preventDefault","stopPropagation","startPosition","focus","getLastPosition","endPosition","getNearestNonInlineLimit","createRange","lastRangePosition","getNearestTextPosition","schema","isBefore","getFirstPosition","firstRangePosition","isAfter","direction","createRangeIn","root","walkerValueType","getWalker","previousPosition","item","type","isLimit","isInline","isBlock","position","checkChild","nextPosition","modelRange","domConverter","view","probe","modifySelection","isAtEnd","isEqual","viewRange","mapper","toViewRange","domRange","viewRangeToDom","rects","getDomRangeRects","boundaryVerticalPosition","rect","undefined","Math","round","bottom","top","max","isBackward"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\nimport { keyCodes } from '@ckeditor/ckeditor5-utils/src/keyboard';\nimport Rect from '@ckeditor/ckeditor5-utils/src/dom/rect';\n\n/**\n * @module widget/verticalnavigationhandler\n */\n\n/**\n * Returns 'keydown' handler for up/down arrow keys that modifies the caret movement if it's in a text line next to an object.\n *\n * @param {module:engine/controller/editingcontroller~EditingController} editing The editing controller.\n * @returns {Function}\n */\nexport default function verticalNavigationHandler( editing ) {\n\tconst model = editing.model;\n\n\treturn ( evt, data ) => {\n\t\tconst arrowUpPressed = data.keyCode == keyCodes.arrowup;\n\t\tconst arrowDownPressed = data.keyCode == keyCodes.arrowdown;\n\t\tconst expandSelection = data.shiftKey;\n\t\tconst selection = model.document.selection;\n\n\t\tif ( !arrowUpPressed && !arrowDownPressed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isForward = arrowDownPressed;\n\n\t\t// Navigation is in the opposite direction than the selection direction so this is shrinking of the selection.\n\t\t// Selection for sure will not approach any object.\n\t\tif ( expandSelection && selectionWillShrink( selection, isForward ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find a range between selection and closest limit element.\n\t\tconst range = findTextRangeFromSelection( editing, selection, isForward );\n\n\t\tif ( !range || range.isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If the range is a single line (there is no word wrapping) then move the selection to the position closest to the limit element.\n\t\t//\n\t\t// We can't move the selection directly to the isObject element (eg. table cell) because of dual position at the end/beginning\n\t\t// of wrapped line (it's at the same time at the end of one line and at the start of the next line).\n\t\tif ( isSingleLineRange( editing, range, isForward ) ) {\n\t\t\tmodel.change( writer => {\n\t\t\t\tconst newPosition = isForward ? range.end : range.start;\n\n\t\t\t\tif ( expandSelection ) {\n\t\t\t\t\tconst newSelection = model.createSelection( selection.anchor );\n\t\t\t\t\tnewSelection.setFocus( newPosition );\n\n\t\t\t\t\twriter.setSelection( newSelection );\n\t\t\t\t} else {\n\t\t\t\t\twriter.setSelection( newPosition );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tevt.stop();\n\t\t\tdata.preventDefault();\n\t\t\tdata.stopPropagation();\n\t\t}\n\t};\n}\n\n// Finds the range between selection and closest limit element (in the direction of navigation).\n// The position next to limit element is adjusted to the closest allowed `$text` position.\n//\n// Returns `null` if, according to the schema, the resulting range cannot contain a `$text` element.\n//\n// @param {module:engine/controller/editingcontroller~EditingController} editing The editing controller.\n// @param {module:engine/model/selection~Selection} selection The current selection.\n// @param {Boolean} isForward The expected navigation direction.\n// @returns {module:engine/model/range~Range|null}\n//\nfunction findTextRangeFromSelection( editing, selection, isForward ) {\n\tconst model = editing.model;\n\n\tif ( isForward ) {\n\t\tconst startPosition = selection.isCollapsed ? selection.focus : selection.getLastPosition();\n\t\tconst endPosition = getNearestNonInlineLimit( model, startPosition, 'forward' );\n\n\t\t// There is no limit element, browser should handle this.\n\t\tif ( !endPosition ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst range = model.createRange( startPosition, endPosition );\n\t\tconst lastRangePosition = getNearestTextPosition( model.schema, range, 'backward' );\n\n\t\tif ( lastRangePosition && startPosition.isBefore( lastRangePosition ) ) {\n\t\t\treturn model.createRange( startPosition, lastRangePosition );\n\t\t}\n\n\t\treturn null;\n\t} else {\n\t\tconst endPosition = selection.isCollapsed ? selection.focus : selection.getFirstPosition();\n\t\tconst startPosition = getNearestNonInlineLimit( model, endPosition, 'backward' );\n\n\t\t// There is no limit element, browser should handle this.\n\t\tif ( !startPosition ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst range = model.createRange( startPosition, endPosition );\n\t\tconst firstRangePosition = getNearestTextPosition( model.schema, range, 'forward' );\n\n\t\tif ( firstRangePosition && endPosition.isAfter( firstRangePosition ) ) {\n\t\t\treturn model.createRange( firstRangePosition, endPosition );\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n// Finds the limit element position that is closest to startPosition.\n//\n// @param {module:engine/model/model~Model} model\n// @param {<module:engine/model/position~Position>} startPosition\n// @param {'forward'|'backward'} direction Search direction.\n// @returns {<module:engine/model/position~Position>|null}\n//\nfunction getNearestNonInlineLimit( model, startPosition, direction ) {\n\tconst schema = model.schema;\n\tconst range = model.createRangeIn( startPosition.root );\n\n\tconst walkerValueType = direction == 'forward' ? 'elementStart' : 'elementEnd';\n\n\tfor ( const { previousPosition, item, type } of range.getWalker( { startPosition, direction } ) ) {\n\t\tif ( schema.isLimit( item ) && !schema.isInline( item ) ) {\n\t\t\treturn previousPosition;\n\t\t}\n\n\t\t// Stop looking for isLimit element if the next element is a block element (it is for sure not single line).\n\t\tif ( type == walkerValueType && schema.isBlock( item ) ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn null;\n}\n\n// Basing on the provided range, finds the first or last (depending on `direction`) position inside the range\n// that can contain `$text` (according to schema).\n//\n// @param {module:engine/model/schema~Schema} schema The schema.\n// @param {module:engine/model/range~Range} range The range to find the position in.\n// @param {'forward'|'backward'} direction Search direction.\n// @returns {module:engine/model/position~Position} The nearest selection range.\n//\nfunction getNearestTextPosition( schema, range, direction ) {\n\tconst position = direction == 'backward' ? range.end : range.start;\n\n\tif ( schema.checkChild( position, '$text' ) ) {\n\t\treturn position;\n\t}\n\n\tfor ( const { nextPosition } of range.getWalker( { direction } ) ) {\n\t\tif ( schema.checkChild( nextPosition, '$text' ) ) {\n\t\t\treturn nextPosition;\n\t\t}\n\t}\n}\n\n// Checks if the DOM range corresponding to the provided model range renders as a single line by analyzing DOMRects\n// (verifying if they visually wrap content to the next line).\n//\n// @param {module:engine/controller/editingcontroller~EditingController} editing The editing controller.\n// @param {module:engine/model/range~Range} modelRange The current table cell content range.\n// @param {Boolean} isForward The expected navigation direction.\n// @returns {Boolean}\n//\nfunction isSingleLineRange( editing, modelRange, isForward ) {\n\tconst model = editing.model;\n\tconst domConverter = editing.view.domConverter;\n\n\t// Wrapped lines contain exactly the same position at the end of current line\n\t// and at the beginning of next line. That position's client rect is at the end\n\t// of current line. In case of caret at first position of the last line that 'dual'\n\t// position would be detected as it's not the last line.\n\tif ( isForward ) {\n\t\tconst probe = model.createSelection( modelRange.start );\n\n\t\tmodel.modifySelection( probe );\n\n\t\t// If the new position is at the end of the container then we can't use this position\n\t\t// because it would provide incorrect result for eg caption of image and selection\n\t\t// just before end of it. Also in this case there is no \"dual\" position.\n\t\tif ( !probe.focus.isAtEnd && !modelRange.start.isEqual( probe.focus ) ) {\n\t\t\tmodelRange = model.createRange( probe.focus, modelRange.end );\n\t\t}\n\t}\n\n\tconst viewRange = editing.mapper.toViewRange( modelRange );\n\tconst domRange = domConverter.viewRangeToDom( viewRange );\n\tconst rects = Rect.getDomRangeRects( domRange );\n\n\tlet boundaryVerticalPosition;\n\n\tfor ( const rect of rects ) {\n\t\tif ( boundaryVerticalPosition === undefined ) {\n\t\t\tboundaryVerticalPosition = Math.round( rect.bottom );\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Let's check if this rect is in new line.\n\t\tif ( Math.round( rect.top ) >= boundaryVerticalPosition ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tboundaryVerticalPosition = Math.max( boundaryVerticalPosition, Math.round( rect.bottom ) );\n\t}\n\n\treturn true;\n}\n\nfunction selectionWillShrink( selection, isForward ) {\n\treturn !selection.isCollapsed && selection.isBackward == isForward;\n}\n"]}]}