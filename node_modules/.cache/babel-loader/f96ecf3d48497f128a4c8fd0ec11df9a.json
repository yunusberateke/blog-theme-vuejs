{"remainingRequest":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js?{}!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/model/utils/modifyselection.js","dependencies":[{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/model/utils/modifyselection.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL2hvbWUvZWtlYmVyYXQvWWFuZGV4LkRpc2svUHJvamVsZXJpbS9CZW5pbVByb2plbGVyaW0vd2Vic2l0ZW0vd2Vic2l0ZW0td2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwoKLyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDIxLCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGVuZ2luZS9tb2RlbC91dGlscy9tb2RpZnlzZWxlY3Rpb24KICovCmltcG9ydCBQb3NpdGlvbiBmcm9tICcuLi9wb3NpdGlvbic7CmltcG9ydCBUcmVlV2Fsa2VyIGZyb20gJy4uL3RyZWV3YWxrZXInOwppbXBvcnQgUmFuZ2UgZnJvbSAnLi4vcmFuZ2UnOwppbXBvcnQgeyBpc0luc2lkZVN1cnJvZ2F0ZVBhaXIsIGlzSW5zaWRlQ29tYmluZWRTeW1ib2wgfSBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy91bmljb2RlJzsKaW1wb3J0IERvY3VtZW50U2VsZWN0aW9uIGZyb20gJy4uL2RvY3VtZW50c2VsZWN0aW9uJzsKdmFyIHdvcmRCb3VuZGFyeUNoYXJhY3RlcnMgPSAnICwuPyE6OyItKCknOwovKioKICogTW9kaWZpZXMgdGhlIHNlbGVjdGlvbi4gQ3VycmVudGx5LCB0aGUgc3VwcG9ydGVkIG1vZGlmaWNhdGlvbnMgYXJlOgogKgogKiAqIEV4dGVuZGluZy4gVGhlIHNlbGVjdGlvbiBmb2N1cyBpcyBtb3ZlZCBpbiB0aGUgc3BlY2lmaWVkIGBvcHRpb25zLmRpcmVjdGlvbmAgd2l0aCBhIHN0ZXAgc3BlY2lmaWVkIGluIGBvcHRpb25zLnVuaXRgLgogKiBQb3NzaWJsZSB2YWx1ZXMgZm9yIGB1bml0YCBhcmU6CiAqICAqIGAnY2hhcmFjdGVyJ2AgKGRlZmF1bHQpIC0gbW92ZXMgc2VsZWN0aW9uIGJ5IG9uZSB1c2VyLXBlcmNlaXZlZCBjaGFyYWN0ZXIuIEluIG1vc3QgY2FzZXMgdGhpcyBtZWFucyBtb3ZpbmcgYnkgb25lCiAqICBjaGFyYWN0ZXIgaW4gYFN0cmluZ2Agc2Vuc2UuIEhvd2V2ZXIsIHVuaWNvZGUgYWxzbyBkZWZpbmVzICJjb21iaW5nIG1hcmtzIi4gVGhlc2UgYXJlIHNwZWNpYWwgc3ltYm9scywgdGhhdCBjb21iaW5lcwogKiAgd2l0aCBhIHN5bWJvbCBiZWZvcmUgaXQgKCJiYXNlIGNoYXJhY3RlciIpIHRvIGNyZWF0ZSBvbmUgdXNlci1wZXJjZWl2ZWQgY2hhcmFjdGVyLiBGb3IgZXhhbXBsZSwgYHHMh8yjYCBpcyBhIG5vcm1hbAogKiAgbGV0dGVyIGBxYCB3aXRoIHR3byAiY29tYmluaW5nIG1hcmtzIjogdXBwZXIgZG90IChgVXgwMzA3YCkgYW5kIGxvd2VyIGRvdCAoYFV4MDMyM2ApLiBGb3IgbW9zdCBhY3Rpb25zLCBpLmUuIGV4dGVuZGluZwogKiAgc2VsZWN0aW9uIGJ5IG9uZSBwb3NpdGlvbiwgaXQgaXMgY29ycmVjdCB0byBpbmNsdWRlIGJvdGggImJhc2UgY2hhcmFjdGVyIiBhbmQgYWxsIG9mIGl0J3MgImNvbWJpbmluZyBtYXJrcyIuIFRoYXQgaXMKICogIHdoeSBgJ2NoYXJhY3RlcidgIHZhbHVlIGlzIG1vc3QgbmF0dXJhbCBhbmQgY29tbW9uIG1ldGhvZCBvZiBtb2RpZnlpbmcgc2VsZWN0aW9uLgogKiAgKiBgJ2NvZGVQb2ludCdgIC0gbW92ZXMgc2VsZWN0aW9uIGJ5IG9uZSB1bmljb2RlIGNvZGUgcG9pbnQuIEluIGNvbnRyYXJ5IHRvLCBgJ2NoYXJhY3RlcidgIHVuaXQsIHRoaXMgd2lsbCBpbnNlcnQKICogIHNlbGVjdGlvbiBiZXR3ZWVuICJiYXNlIGNoYXJhY3RlciIgYW5kICJjb21iaW5pbmcgbWFyayIsIGJlY2F1c2UgImNvbWJpbmluZyBtYXJrcyIgaGF2ZSB0aGVpciBvd24gdW5pY29kZSBjb2RlIHBvaW50cy4KICogIEhvd2V2ZXIsIGZvciB0ZWNobmljYWwgcmVhc29ucywgdW5pY29kZSBjb2RlIHBvaW50cyB3aXRoIHZhbHVlcyBhYm92ZSBgVXhGRkZGYCBhcmUgcmVwcmVzZW50ZWQgaW4gbmF0aXZlIGBTdHJpbmdgIGJ5CiAqICB0d28gY2hhcmFjdGVycywgY2FsbGVkICJzdXJyb2dhdGUgcGFpcnMiLiBIYWx2ZXMgb2YgInN1cnJvZ2F0ZSBwYWlycyIgaGF2ZSBhIG1lYW5pbmcgb25seSB3aGVuIHBsYWNlZCBuZXh0IHRvIGVhY2ggb3RoZXIuCiAqICBGb3IgZXhhbXBsZSBg8KitjmAgaXMgcmVwcmVzZW50ZWQgaW4gYFN0cmluZ2AgYnkgYFx1RDg2Mlx1REY0RWAuIEJvdGggYFx1RDg2MmAgYW5kIGBcdURGNEVgIGRvIG5vdCBoYXZlIGFueSBtZWFuaW5nCiAqICBvdXRzaWRlIHRoZSBwYWlyIChhcmUgcmVuZGVyZWQgYXMgPyB3aGVuIGFsb25lKS4gUG9zaXRpb24gYmV0d2VlbiB0aGVtIHdvdWxkIGJlIGluY29ycmVjdC4gSW4gdGhpcyBjYXNlLCBzZWxlY3Rpb24KICogIGV4dGVuc2lvbiB3aWxsIGluY2x1ZGUgd2hvbGUgInN1cnJvZ2F0ZSBwYWlyIi4KICogICogYCd3b3JkJ2AgLSBtb3ZlcyBzZWxlY3Rpb24gYnkgYSB3aG9sZSB3b3JkLgogKgogKiAqKk5vdGU6KiogaWYgeW91IGV4dGVuZCBhIGZvcndhcmQgc2VsZWN0aW9uIGluIGEgYmFja3dhcmQgZGlyZWN0aW9uIHlvdSB3aWxsIGluIGZhY3Qgc2hyaW5rIGl0LgogKgogKiAqKk5vdGU6KiogVXNlIHtAbGluayBtb2R1bGU6ZW5naW5lL21vZGVsL21vZGVsfk1vZGVsI21vZGlmeVNlbGVjdGlvbn0gaW5zdGVhZCBvZiB0aGlzIGZ1bmN0aW9uLgogKiBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgZXhwb3NlZCB0byBiZSByZXVzYWJsZSBpbiBhbGdvcml0aG1zCiAqIHdoaWNoIGNoYW5nZSB0aGUge0BsaW5rIG1vZHVsZTplbmdpbmUvbW9kZWwvbW9kZWx+TW9kZWwjbW9kaWZ5U2VsZWN0aW9ufQogKiBtZXRob2QncyBiZWhhdmlvci4KICoKICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL21vZGVsfk1vZGVsfSBtb2RlbCBUaGUgbW9kZWwgaW4gY29udGV4dCBvZiB3aGljaAogKiB0aGUgc2VsZWN0aW9uIG1vZGlmaWNhdGlvbiBzaG91bGQgYmUgcGVyZm9ybWVkLgogKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvc2VsZWN0aW9uflNlbGVjdGlvbnxtb2R1bGU6ZW5naW5lL21vZGVsL2RvY3VtZW50c2VsZWN0aW9ufkRvY3VtZW50U2VsZWN0aW9ufSBzZWxlY3Rpb24KICogVGhlIHNlbGVjdGlvbiB0byBtb2RpZnkuCiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10KICogQHBhcmFtIHsnZm9yd2FyZCd8J2JhY2t3YXJkJ30gW29wdGlvbnMuZGlyZWN0aW9uPSdmb3J3YXJkJ10gVGhlIGRpcmVjdGlvbiBpbiB3aGljaCB0aGUgc2VsZWN0aW9uIHNob3VsZCBiZSBtb2RpZmllZC4KICogQHBhcmFtIHsnY2hhcmFjdGVyJ3wnY29kZVBvaW50J3wnd29yZCd9IFtvcHRpb25zLnVuaXQ9J2NoYXJhY3RlciddIFRoZSB1bml0IGJ5IHdoaWNoIHNlbGVjdGlvbiBzaG91bGQgYmUgbW9kaWZpZWQuCiAqLwoKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbW9kaWZ5U2VsZWN0aW9uKG1vZGVsLCBzZWxlY3Rpb24pIHsKICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgdmFyIHNjaGVtYSA9IG1vZGVsLnNjaGVtYTsKICB2YXIgaXNGb3J3YXJkID0gb3B0aW9ucy5kaXJlY3Rpb24gIT0gJ2JhY2t3YXJkJzsKICB2YXIgdW5pdCA9IG9wdGlvbnMudW5pdCA/IG9wdGlvbnMudW5pdCA6ICdjaGFyYWN0ZXInOwogIHZhciBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1czsKICB2YXIgd2Fsa2VyID0gbmV3IFRyZWVXYWxrZXIoewogICAgYm91bmRhcmllczogZ2V0U2VhcmNoUmFuZ2UoZm9jdXMsIGlzRm9yd2FyZCksCiAgICBzaW5nbGVDaGFyYWN0ZXJzOiB0cnVlLAogICAgZGlyZWN0aW9uOiBpc0ZvcndhcmQgPyAnZm9yd2FyZCcgOiAnYmFja3dhcmQnCiAgfSk7CiAgdmFyIGRhdGEgPSB7CiAgICB3YWxrZXI6IHdhbGtlciwKICAgIHNjaGVtYTogc2NoZW1hLAogICAgaXNGb3J3YXJkOiBpc0ZvcndhcmQsCiAgICB1bml0OiB1bml0CiAgfTsKICB2YXIgbmV4dDsKCiAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoKSB7CiAgICBpZiAobmV4dC5kb25lKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdjogdm9pZCAwCiAgICAgIH07CiAgICB9CgogICAgdmFyIHBvc2l0aW9uID0gdHJ5RXh0ZW5kaW5nVG8oZGF0YSwgbmV4dC52YWx1ZSk7CgogICAgaWYgKHBvc2l0aW9uKSB7CiAgICAgIGlmIChzZWxlY3Rpb24gaW5zdGFuY2VvZiBEb2N1bWVudFNlbGVjdGlvbikgewogICAgICAgIG1vZGVsLmNoYW5nZShmdW5jdGlvbiAod3JpdGVyKSB7CiAgICAgICAgICB3cml0ZXIuc2V0U2VsZWN0aW9uRm9jdXMocG9zaXRpb24pOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHNlbGVjdGlvbi5zZXRGb2N1cyhwb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgdjogdm9pZCAwCiAgICAgIH07CiAgICB9CiAgfTsKCiAgd2hpbGUgKG5leHQgPSB3YWxrZXIubmV4dCgpKSB7CiAgICB2YXIgX3JldCA9IF9sb29wKCk7CgogICAgaWYgKF90eXBlb2YoX3JldCkgPT09ICJvYmplY3QiKSByZXR1cm4gX3JldC52OwogIH0KfSAvLyBDaGVja3Mgd2hldGhlciB0aGUgc2VsZWN0aW9uIGNhbiBiZSBleHRlbmRlZCB0byB0aGUgdGhlIHdhbGtlcidzIG5leHQgdmFsdWUgKG5leHQgcG9zaXRpb24pLgovLyBAcGFyYW0ge3sgd2Fsa2VyLCB1bml0LCBpc0ZvcndhcmQsIHNjaGVtYSB9fSBkYXRhCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L3RyZWV3YWxrZXJ+VHJlZVdhbGtlclZhbHVlfSB2YWx1ZQoKZnVuY3Rpb24gdHJ5RXh0ZW5kaW5nVG8oZGF0YSwgdmFsdWUpIHsKICB2YXIgaXNGb3J3YXJkID0gZGF0YS5pc0ZvcndhcmQsCiAgICAgIHdhbGtlciA9IGRhdGEud2Fsa2VyLAogICAgICB1bml0ID0gZGF0YS51bml0LAogICAgICBzY2hlbWEgPSBkYXRhLnNjaGVtYTsKICB2YXIgdHlwZSA9IHZhbHVlLnR5cGUsCiAgICAgIGl0ZW0gPSB2YWx1ZS5pdGVtLAogICAgICBuZXh0UG9zaXRpb24gPSB2YWx1ZS5uZXh0UG9zaXRpb247IC8vIElmIGZvdW5kIHRleHQsIHdlIGNhbiBjZXJ0YWlubHkgcHV0IHRoZSBmb2N1cyBpbiBpdC4gTGV0J3MganVzdCBmaW5kIGEgY29ycmVjdCBwb3NpdGlvbgogIC8vIGJhc2VkIG9uIHRoZSB1bml0LgoKICBpZiAodHlwZSA9PSAndGV4dCcpIHsKICAgIGlmIChkYXRhLnVuaXQgPT09ICd3b3JkJykgewogICAgICByZXR1cm4gZ2V0Q29ycmVjdFdvcmRCcmVha1Bvc2l0aW9uKHdhbGtlciwgaXNGb3J3YXJkKTsKICAgIH0KCiAgICByZXR1cm4gZ2V0Q29ycmVjdFBvc2l0aW9uKHdhbGtlciwgdW5pdCwgaXNGb3J3YXJkKTsKICB9IC8vIEVudGVyaW5nIGFuIGVsZW1lbnQuCgoKICBpZiAodHlwZSA9PSAoaXNGb3J3YXJkID8gJ2VsZW1lbnRTdGFydCcgOiAnZWxlbWVudEVuZCcpKSB7CiAgICAvLyBJZiBpdCdzIGEgc2VsZWN0YWJsZSwgd2UgY2FuIHNlbGVjdCBpdCBub3cuCiAgICBpZiAoc2NoZW1hLmlzU2VsZWN0YWJsZShpdGVtKSkgewogICAgICByZXR1cm4gUG9zaXRpb24uX2NyZWF0ZUF0KGl0ZW0sIGlzRm9yd2FyZCA/ICdhZnRlcicgOiAnYmVmb3JlJyk7CiAgICB9IC8vIElmIHRleHQgYWxsb3dlZCBvbiB0aGlzIHBvc2l0aW9uLCBleHRlbmQgdG8gdGhpcyBwbGFjZS4KCgogICAgaWYgKHNjaGVtYS5jaGVja0NoaWxkKG5leHRQb3NpdGlvbiwgJyR0ZXh0JykpIHsKICAgICAgcmV0dXJuIG5leHRQb3NpdGlvbjsKICAgIH0KICB9IC8vIExlYXZpbmcgYW4gZWxlbWVudC4KICBlbHNlIHsKICAgICAgLy8gSWYgbGVhdmluZyBhIGxpbWl0IGVsZW1lbnQsIHN0b3AuCiAgICAgIGlmIChzY2hlbWEuaXNMaW1pdChpdGVtKSkgewogICAgICAgIC8vIE5PVEU6IEZhc3QtZm9yd2FyZCB0aGUgd2Fsa2VyIHVudGlsIHRoZSBlbmQuCiAgICAgICAgd2Fsa2VyLnNraXAoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIElmIHRleHQgYWxsb3dlZCBvbiB0aGlzIHBvc2l0aW9uLCBleHRlbmQgdG8gdGhpcyBwbGFjZS4KCgogICAgICBpZiAoc2NoZW1hLmNoZWNrQ2hpbGQobmV4dFBvc2l0aW9uLCAnJHRleHQnKSkgewogICAgICAgIHJldHVybiBuZXh0UG9zaXRpb247CiAgICAgIH0KICAgIH0KfSAvLyBGaW5kcyBhIGNvcnJlY3QgcG9zaXRpb24gYnkgd2Fsa2luZyBpbiBhIHRleHQgbm9kZSBhbmQgY2hlY2tpbmcgd2hldGhlciBzZWxlY3Rpb24gY2FuIGJlIGV4dGVuZGVkIHRvIGdpdmVuIHBvc2l0aW9uCi8vIG9yIHNob3VsZCBiZSBleHRlbmRlZCBmdXJ0aGVyLgovLwovLyBAcGFyYW0ge21vZHVsZTplbmdpbmUvbW9kZWwvdHJlZXdhbGtlcn5UcmVlV2Fsa2VyfSB3YWxrZXIKLy8gQHBhcmFtIHtTdHJpbmd9IHVuaXQgVGhlIHVuaXQgYnkgd2hpY2ggc2VsZWN0aW9uIHNob3VsZCBiZSBtb2RpZmllZC4KCgpmdW5jdGlvbiBnZXRDb3JyZWN0UG9zaXRpb24od2Fsa2VyLCB1bml0KSB7CiAgdmFyIHRleHROb2RlID0gd2Fsa2VyLnBvc2l0aW9uLnRleHROb2RlOwoKICBpZiAodGV4dE5vZGUpIHsKICAgIHZhciBkYXRhID0gdGV4dE5vZGUuZGF0YTsKICAgIHZhciBvZmZzZXQgPSB3YWxrZXIucG9zaXRpb24ub2Zmc2V0IC0gdGV4dE5vZGUuc3RhcnRPZmZzZXQ7CgogICAgd2hpbGUgKGlzSW5zaWRlU3Vycm9nYXRlUGFpcihkYXRhLCBvZmZzZXQpIHx8IHVuaXQgPT0gJ2NoYXJhY3RlcicgJiYgaXNJbnNpZGVDb21iaW5lZFN5bWJvbChkYXRhLCBvZmZzZXQpKSB7CiAgICAgIHdhbGtlci5uZXh0KCk7CiAgICAgIG9mZnNldCA9IHdhbGtlci5wb3NpdGlvbi5vZmZzZXQgLSB0ZXh0Tm9kZS5zdGFydE9mZnNldDsKICAgIH0KICB9CgogIHJldHVybiB3YWxrZXIucG9zaXRpb247Cn0gLy8gRmluZHMgYSBjb3JyZWN0IHBvc2l0aW9uIG9mIGEgd29yZCBicmVhayBieSB3YWxraW5nIGluIGEgdGV4dCBub2RlIGFuZCBjaGVja2luZyB3aGV0aGVyIHNlbGVjdGlvbiBjYW4gYmUgZXh0ZW5kZWQgdG8gZ2l2ZW4gcG9zaXRpb24KLy8gb3Igc2hvdWxkIGJlIGV4dGVuZGVkIGZ1cnRoZXIuCi8vCi8vIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC90cmVld2Fsa2VyflRyZWVXYWxrZXJ9IHdhbGtlcgovLyBAcGFyYW0ge0Jvb2xlYW59IGlzRm9yd2FyZCBJcyB0aGUgZGlyZWN0aW9uIGluIHdoaWNoIHRoZSBzZWxlY3Rpb24gc2hvdWxkIGJlIG1vZGlmaWVkIGlzIGZvcndhcmQuCgoKZnVuY3Rpb24gZ2V0Q29ycmVjdFdvcmRCcmVha1Bvc2l0aW9uKHdhbGtlciwgaXNGb3J3YXJkKSB7CiAgdmFyIHRleHROb2RlID0gd2Fsa2VyLnBvc2l0aW9uLnRleHROb2RlOwoKICBpZiAodGV4dE5vZGUpIHsKICAgIHZhciBvZmZzZXQgPSB3YWxrZXIucG9zaXRpb24ub2Zmc2V0IC0gdGV4dE5vZGUuc3RhcnRPZmZzZXQ7CgogICAgd2hpbGUgKCFpc0F0V29yZEJvdW5kYXJ5KHRleHROb2RlLmRhdGEsIG9mZnNldCwgaXNGb3J3YXJkKSAmJiAhaXNBdE5vZGVCb3VuZGFyeSh0ZXh0Tm9kZSwgb2Zmc2V0LCBpc0ZvcndhcmQpKSB7CiAgICAgIHdhbGtlci5uZXh0KCk7IC8vIENoZWNrIG9mIGFkamFjZW50IHRleHQgbm9kZXMgd2l0aCBkaWZmZXJlbnQgYXR0cmlidXRlcyAobGlrZSBCT0xEKS4KICAgICAgLy8gRXhhbXBsZSAgICAgICAgICA6ICdmb29mb28gW11iYXI8JHRleHQgYm9sZD0idHJ1ZSI+YmFyPC8kdGV4dD4gYmF6YmF6JwogICAgICAvLyBzaG91bGQgZXhwYW5kIHRvIDogJ2Zvb2ZvbyBbYmFyPCR0ZXh0IGJvbGQ9InRydWUiPmJhcjwvJHRleHQ+XSBiYXpiYXonLgoKICAgICAgdmFyIG5leHROb2RlID0gaXNGb3J3YXJkID8gd2Fsa2VyLnBvc2l0aW9uLm5vZGVBZnRlciA6IHdhbGtlci5wb3NpdGlvbi5ub2RlQmVmb3JlOyAvLyBTY2FuIG9ubHkgdGV4dCBub2Rlcy4gSWdub3JlIGlubGluZSBlbGVtZW50cyAobGlrZSBgPHNvZnRCcmVhaz5gKS4KCiAgICAgIGlmIChuZXh0Tm9kZSAmJiBuZXh0Tm9kZS5pcygnJHRleHQnKSkgewogICAgICAgIC8vIENoZWNrIGJvdW5kYXJ5IGNoYXIgb2YgYW4gYWRqYWNlbnQgdGV4dCBub2RlLgogICAgICAgIHZhciBib3VuZGFyeUNoYXIgPSBuZXh0Tm9kZS5kYXRhLmNoYXJBdChpc0ZvcndhcmQgPyAwIDogbmV4dE5vZGUuZGF0YS5sZW5ndGggLSAxKTsgLy8gR28gdG8gdGhlIG5leHQgbm9kZSBpZiB0aGUgY2hhcmFjdGVyIGF0IHRoZSBib3VuZGFyeSBvZiB0aGF0IG5vZGUgYmVsb25ncyB0byB0aGUgc2FtZSB3b3JkLgoKICAgICAgICBpZiAoIXdvcmRCb3VuZGFyeUNoYXJhY3RlcnMuaW5jbHVkZXMoYm91bmRhcnlDaGFyKSkgewogICAgICAgICAgLy8gSWYgYWRqYWNlbnQgdGV4dCBub2RlIGJlbG9uZ3MgdG8gdGhlIHNhbWUgd29yZCBnbyB0byBpdCAmIHJlc2V0IHZhbHVlcy4KICAgICAgICAgIHdhbGtlci5uZXh0KCk7CiAgICAgICAgICB0ZXh0Tm9kZSA9IHdhbGtlci5wb3NpdGlvbi50ZXh0Tm9kZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG9mZnNldCA9IHdhbGtlci5wb3NpdGlvbi5vZmZzZXQgLSB0ZXh0Tm9kZS5zdGFydE9mZnNldDsKICAgIH0KICB9CgogIHJldHVybiB3YWxrZXIucG9zaXRpb247Cn0KCmZ1bmN0aW9uIGdldFNlYXJjaFJhbmdlKHN0YXJ0LCBpc0ZvcndhcmQpIHsKICB2YXIgcm9vdCA9IHN0YXJ0LnJvb3Q7CgogIHZhciBzZWFyY2hFbmQgPSBQb3NpdGlvbi5fY3JlYXRlQXQocm9vdCwgaXNGb3J3YXJkID8gJ2VuZCcgOiAwKTsKCiAgaWYgKGlzRm9yd2FyZCkgewogICAgcmV0dXJuIG5ldyBSYW5nZShzdGFydCwgc2VhcmNoRW5kKTsKICB9IGVsc2UgewogICAgcmV0dXJuIG5ldyBSYW5nZShzZWFyY2hFbmQsIHN0YXJ0KTsKICB9Cn0gLy8gQ2hlY2tzIGlmIHNlbGVjdGlvbiBpcyBvbiB3b3JkIGJvdW5kYXJ5LgovLwovLyBAcGFyYW0ge1N0cmluZ30gZGF0YSBUaGUgdGV4dCBub2RlIHZhbHVlIHRvIGludmVzdGlnYXRlLgovLyBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IFBvc2l0aW9uIG9mZnNldC4KLy8gQHBhcmFtIHtCb29sZWFufSBpc0ZvcndhcmQgSXMgdGhlIGRpcmVjdGlvbiBpbiB3aGljaCB0aGUgc2VsZWN0aW9uIHNob3VsZCBiZSBtb2RpZmllZCBpcyBmb3J3YXJkLgoKCmZ1bmN0aW9uIGlzQXRXb3JkQm91bmRhcnkoZGF0YSwgb2Zmc2V0LCBpc0ZvcndhcmQpIHsKICAvLyBUaGUgb2Zmc2V0IHRvIGNoZWNrIGRlcGVuZHMgb24gZGlyZWN0aW9uLgogIHZhciBvZmZzZXRUb0NoZWNrID0gb2Zmc2V0ICsgKGlzRm9yd2FyZCA/IDAgOiAtMSk7CiAgcmV0dXJuIHdvcmRCb3VuZGFyeUNoYXJhY3RlcnMuaW5jbHVkZXMoZGF0YS5jaGFyQXQob2Zmc2V0VG9DaGVjaykpOwp9IC8vIENoZWNrcyBpZiBzZWxlY3Rpb24gaXMgb24gbm9kZSBib3VuZGFyeS4KLy8KLy8gQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL3RleHR+VGV4dH0gdGV4dE5vZGUgVGhlIHRleHQgbm9kZSB0byBpbnZlc3RpZ2F0ZS4KLy8gQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBQb3NpdGlvbiBvZmZzZXQuCi8vIEBwYXJhbSB7Qm9vbGVhbn0gaXNGb3J3YXJkIElzIHRoZSBkaXJlY3Rpb24gaW4gd2hpY2ggdGhlIHNlbGVjdGlvbiBzaG91bGQgYmUgbW9kaWZpZWQgaXMgZm9yd2FyZC4KCgpmdW5jdGlvbiBpc0F0Tm9kZUJvdW5kYXJ5KHRleHROb2RlLCBvZmZzZXQsIGlzRm9yd2FyZCkgewogIHJldHVybiBvZmZzZXQgPT09IChpc0ZvcndhcmQgPyB0ZXh0Tm9kZS5lbmRPZmZzZXQgOiAwKTsKfQ=="},{"version":3,"sources":["/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/model/utils/modifyselection.js"],"names":["Position","TreeWalker","Range","isInsideSurrogatePair","isInsideCombinedSymbol","DocumentSelection","wordBoundaryCharacters","modifySelection","model","selection","options","schema","isForward","direction","unit","focus","walker","boundaries","getSearchRange","singleCharacters","data","next","done","position","tryExtendingTo","value","change","writer","setSelectionFocus","setFocus","type","item","nextPosition","getCorrectWordBreakPosition","getCorrectPosition","isSelectable","_createAt","checkChild","isLimit","skip","textNode","offset","startOffset","isAtWordBoundary","isAtNodeBoundary","nextNode","nodeAfter","nodeBefore","is","boundaryChar","charAt","length","includes","start","root","searchEnd","offsetToCheck","endOffset"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/modifyselection\n */\n\nimport Position from '../position';\nimport TreeWalker from '../treewalker';\nimport Range from '../range';\nimport { isInsideSurrogatePair, isInsideCombinedSymbol } from '@ckeditor/ckeditor5-utils/src/unicode';\nimport DocumentSelection from '../documentselection';\n\nconst wordBoundaryCharacters = ' ,.?!:;\"-()';\n\n/**\n * Modifies the selection. Currently, the supported modifications are:\n *\n * * Extending. The selection focus is moved in the specified `options.direction` with a step specified in `options.unit`.\n * Possible values for `unit` are:\n *  * `'character'` (default) - moves selection by one user-perceived character. In most cases this means moving by one\n *  character in `String` sense. However, unicode also defines \"combing marks\". These are special symbols, that combines\n *  with a symbol before it (\"base character\") to create one user-perceived character. For example, `q̣̇` is a normal\n *  letter `q` with two \"combining marks\": upper dot (`Ux0307`) and lower dot (`Ux0323`). For most actions, i.e. extending\n *  selection by one position, it is correct to include both \"base character\" and all of it's \"combining marks\". That is\n *  why `'character'` value is most natural and common method of modifying selection.\n *  * `'codePoint'` - moves selection by one unicode code point. In contrary to, `'character'` unit, this will insert\n *  selection between \"base character\" and \"combining mark\", because \"combining marks\" have their own unicode code points.\n *  However, for technical reasons, unicode code points with values above `UxFFFF` are represented in native `String` by\n *  two characters, called \"surrogate pairs\". Halves of \"surrogate pairs\" have a meaning only when placed next to each other.\n *  For example `𨭎` is represented in `String` by `\\uD862\\uDF4E`. Both `\\uD862` and `\\uDF4E` do not have any meaning\n *  outside the pair (are rendered as ? when alone). Position between them would be incorrect. In this case, selection\n *  extension will include whole \"surrogate pair\".\n *  * `'word'` - moves selection by a whole word.\n *\n * **Note:** if you extend a forward selection in a backward direction you will in fact shrink it.\n *\n * **Note:** Use {@link module:engine/model/model~Model#modifySelection} instead of this function.\n * This function is only exposed to be reusable in algorithms\n * which change the {@link module:engine/model/model~Model#modifySelection}\n * method's behavior.\n *\n * @param {module:engine/model/model~Model} model The model in context of which\n * the selection modification should be performed.\n * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n * The selection to modify.\n * @param {Object} [options]\n * @param {'forward'|'backward'} [options.direction='forward'] The direction in which the selection should be modified.\n * @param {'character'|'codePoint'|'word'} [options.unit='character'] The unit by which selection should be modified.\n */\nexport default function modifySelection( model, selection, options = {} ) {\n\tconst schema = model.schema;\n\tconst isForward = options.direction != 'backward';\n\tconst unit = options.unit ? options.unit : 'character';\n\n\tconst focus = selection.focus;\n\n\tconst walker = new TreeWalker( {\n\t\tboundaries: getSearchRange( focus, isForward ),\n\t\tsingleCharacters: true,\n\t\tdirection: isForward ? 'forward' : 'backward'\n\t} );\n\n\tconst data = { walker, schema, isForward, unit };\n\n\tlet next;\n\n\twhile ( ( next = walker.next() ) ) {\n\t\tif ( next.done ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = tryExtendingTo( data, next.value );\n\n\t\tif ( position ) {\n\t\t\tif ( selection instanceof DocumentSelection ) {\n\t\t\t\tmodel.change( writer => {\n\t\t\t\t\twriter.setSelectionFocus( position );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tselection.setFocus( position );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\t}\n}\n\n// Checks whether the selection can be extended to the the walker's next value (next position).\n// @param {{ walker, unit, isForward, schema }} data\n// @param {module:engine/view/treewalker~TreeWalkerValue} value\nfunction tryExtendingTo( data, value ) {\n\tconst { isForward, walker, unit, schema } = data;\n\tconst { type, item, nextPosition } = value;\n\n\t// If found text, we can certainly put the focus in it. Let's just find a correct position\n\t// based on the unit.\n\tif ( type == 'text' ) {\n\t\tif ( data.unit === 'word' ) {\n\t\t\treturn getCorrectWordBreakPosition( walker, isForward );\n\t\t}\n\n\t\treturn getCorrectPosition( walker, unit, isForward );\n\t}\n\n\t// Entering an element.\n\tif ( type == ( isForward ? 'elementStart' : 'elementEnd' ) ) {\n\t\t// If it's a selectable, we can select it now.\n\t\tif ( schema.isSelectable( item ) ) {\n\t\t\treturn Position._createAt( item, isForward ? 'after' : 'before' );\n\t\t}\n\n\t\t// If text allowed on this position, extend to this place.\n\t\tif ( schema.checkChild( nextPosition, '$text' ) ) {\n\t\t\treturn nextPosition;\n\t\t}\n\t}\n\t// Leaving an element.\n\telse {\n\t\t// If leaving a limit element, stop.\n\t\tif ( schema.isLimit( item ) ) {\n\t\t\t// NOTE: Fast-forward the walker until the end.\n\t\t\twalker.skip( () => true );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// If text allowed on this position, extend to this place.\n\t\tif ( schema.checkChild( nextPosition, '$text' ) ) {\n\t\t\treturn nextPosition;\n\t\t}\n\t}\n}\n\n// Finds a correct position by walking in a text node and checking whether selection can be extended to given position\n// or should be extended further.\n//\n// @param {module:engine/model/treewalker~TreeWalker} walker\n// @param {String} unit The unit by which selection should be modified.\nfunction getCorrectPosition( walker, unit ) {\n\tconst textNode = walker.position.textNode;\n\n\tif ( textNode ) {\n\t\tconst data = textNode.data;\n\t\tlet offset = walker.position.offset - textNode.startOffset;\n\n\t\twhile ( isInsideSurrogatePair( data, offset ) || ( unit == 'character' && isInsideCombinedSymbol( data, offset ) ) ) {\n\t\t\twalker.next();\n\n\t\t\toffset = walker.position.offset - textNode.startOffset;\n\t\t}\n\t}\n\n\treturn walker.position;\n}\n\n// Finds a correct position of a word break by walking in a text node and checking whether selection can be extended to given position\n// or should be extended further.\n//\n// @param {module:engine/model/treewalker~TreeWalker} walker\n// @param {Boolean} isForward Is the direction in which the selection should be modified is forward.\nfunction getCorrectWordBreakPosition( walker, isForward ) {\n\tlet textNode = walker.position.textNode;\n\n\tif ( textNode ) {\n\t\tlet offset = walker.position.offset - textNode.startOffset;\n\n\t\twhile ( !isAtWordBoundary( textNode.data, offset, isForward ) && !isAtNodeBoundary( textNode, offset, isForward ) ) {\n\t\t\twalker.next();\n\n\t\t\t// Check of adjacent text nodes with different attributes (like BOLD).\n\t\t\t// Example          : 'foofoo []bar<$text bold=\"true\">bar</$text> bazbaz'\n\t\t\t// should expand to : 'foofoo [bar<$text bold=\"true\">bar</$text>] bazbaz'.\n\t\t\tconst nextNode = isForward ? walker.position.nodeAfter : walker.position.nodeBefore;\n\n\t\t\t// Scan only text nodes. Ignore inline elements (like `<softBreak>`).\n\t\t\tif ( nextNode && nextNode.is( '$text' ) ) {\n\t\t\t\t// Check boundary char of an adjacent text node.\n\t\t\t\tconst boundaryChar = nextNode.data.charAt( isForward ? 0 : nextNode.data.length - 1 );\n\n\t\t\t\t// Go to the next node if the character at the boundary of that node belongs to the same word.\n\t\t\t\tif ( !wordBoundaryCharacters.includes( boundaryChar ) ) {\n\t\t\t\t\t// If adjacent text node belongs to the same word go to it & reset values.\n\t\t\t\t\twalker.next();\n\n\t\t\t\t\ttextNode = walker.position.textNode;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toffset = walker.position.offset - textNode.startOffset;\n\t\t}\n\t}\n\n\treturn walker.position;\n}\n\nfunction getSearchRange( start, isForward ) {\n\tconst root = start.root;\n\tconst searchEnd = Position._createAt( root, isForward ? 'end' : 0 );\n\n\tif ( isForward ) {\n\t\treturn new Range( start, searchEnd );\n\t} else {\n\t\treturn new Range( searchEnd, start );\n\t}\n}\n\n// Checks if selection is on word boundary.\n//\n// @param {String} data The text node value to investigate.\n// @param {Number} offset Position offset.\n// @param {Boolean} isForward Is the direction in which the selection should be modified is forward.\nfunction isAtWordBoundary( data, offset, isForward ) {\n\t// The offset to check depends on direction.\n\tconst offsetToCheck = offset + ( isForward ? 0 : -1 );\n\n\treturn wordBoundaryCharacters.includes( data.charAt( offsetToCheck ) );\n}\n\n// Checks if selection is on node boundary.\n//\n// @param {module:engine/model/text~Text} textNode The text node to investigate.\n// @param {Number} offset Position offset.\n// @param {Boolean} isForward Is the direction in which the selection should be modified is forward.\nfunction isAtNodeBoundary( textNode, offset, isForward ) {\n\treturn offset === ( isForward ? textNode.endOffset : 0 );\n}\n"]}]}