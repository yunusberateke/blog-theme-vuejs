{"remainingRequest":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js?{}!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/view/view.js","dependencies":[{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/view/view.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvaG9tZS9la2ViZXJhdC9ZYW5kZXguRGlzay9Qcm9qZWxlcmltL0JlbmltUHJvamVsZXJpbS93ZWJzaXRlbS93ZWJzaXRlbS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLndlYWstbWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwoKLyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDIxLCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGVuZ2luZS92aWV3L3ZpZXcKICovCmltcG9ydCBEb2N1bWVudCBmcm9tICcuL2RvY3VtZW50JzsKaW1wb3J0IERvd25jYXN0V3JpdGVyIGZyb20gJy4vZG93bmNhc3R3cml0ZXInOwppbXBvcnQgUmVuZGVyZXIgZnJvbSAnLi9yZW5kZXJlcic7CmltcG9ydCBEb21Db252ZXJ0ZXIgZnJvbSAnLi9kb21jb252ZXJ0ZXInOwppbXBvcnQgUG9zaXRpb24gZnJvbSAnLi9wb3NpdGlvbic7CmltcG9ydCBSYW5nZSBmcm9tICcuL3JhbmdlJzsKaW1wb3J0IFNlbGVjdGlvbiBmcm9tICcuL3NlbGVjdGlvbic7CmltcG9ydCBNdXRhdGlvbk9ic2VydmVyIGZyb20gJy4vb2JzZXJ2ZXIvbXV0YXRpb25vYnNlcnZlcic7CmltcG9ydCBLZXlPYnNlcnZlciBmcm9tICcuL29ic2VydmVyL2tleW9ic2VydmVyJzsKaW1wb3J0IEZha2VTZWxlY3Rpb25PYnNlcnZlciBmcm9tICcuL29ic2VydmVyL2Zha2VzZWxlY3Rpb25vYnNlcnZlcic7CmltcG9ydCBTZWxlY3Rpb25PYnNlcnZlciBmcm9tICcuL29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyJzsKaW1wb3J0IEZvY3VzT2JzZXJ2ZXIgZnJvbSAnLi9vYnNlcnZlci9mb2N1c29ic2VydmVyJzsKaW1wb3J0IENvbXBvc2l0aW9uT2JzZXJ2ZXIgZnJvbSAnLi9vYnNlcnZlci9jb21wb3NpdGlvbm9ic2VydmVyJzsKaW1wb3J0IElucHV0T2JzZXJ2ZXIgZnJvbSAnLi9vYnNlcnZlci9pbnB1dG9ic2VydmVyJzsKaW1wb3J0IEFycm93S2V5c09ic2VydmVyIGZyb20gJy4vb2JzZXJ2ZXIvYXJyb3drZXlzb2JzZXJ2ZXInOwppbXBvcnQgT2JzZXJ2YWJsZU1peGluIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvc3JjL29ic2VydmFibGVtaXhpbic7CmltcG9ydCBtaXggZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvbWl4JzsKaW1wb3J0IHsgc2Nyb2xsVmlld3BvcnRUb1Nob3dUYXJnZXQgfSBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9kb20vc2Nyb2xsJzsKaW1wb3J0IHsgaW5qZWN0VWlFbGVtZW50SGFuZGxpbmcgfSBmcm9tICcuL3VpZWxlbWVudCc7CmltcG9ydCB7IGluamVjdFF1aXJrc0hhbmRsaW5nIH0gZnJvbSAnLi9maWxsZXInOwppbXBvcnQgQ0tFZGl0b3JFcnJvciBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9ja2VkaXRvcmVycm9yJzsKaW1wb3J0IGVudiBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9lbnYnOwovKioKICogRWRpdG9yJ3MgdmlldyBjb250cm9sbGVyIGNsYXNzLiBJdHMgbWFpbiByZXNwb25zaWJpbGl0eSBpcyBET00gLSBWaWV3IG1hbmFnZW1lbnQgZm9yIGVkaXRpbmcgcHVycG9zZXMsIHRvIHByb3ZpZGUKICogYWJzdHJhY3Rpb24gb3ZlciB0aGUgRE9NIHN0cnVjdHVyZSBhbmQgZXZlbnRzIGFuZCBoaWRlIGFsbCBicm93c2VycyBxdWlya3MuCiAqCiAqIFZpZXcgY29udHJvbGxlciByZW5kZXJzIHZpZXcgZG9jdW1lbnQgdG8gRE9NIHdoZW5ldmVyIHZpZXcgc3RydWN0dXJlIGNoYW5nZXMuIFRvIGRldGVybWluZSB3aGVuIHZpZXcgY2FuIGJlIHJlbmRlcmVkLAogKiBhbGwgY2hhbmdlcyBuZWVkIHRvIGJlIGRvbmUgdXNpbmcgdGhlIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvdmlld35WaWV3I2NoYW5nZX0gbWV0aG9kLCB1c2luZwogKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2Rvd25jYXN0d3JpdGVyfkRvd25jYXN0V3JpdGVyfToKICoKICoJCXZpZXcuY2hhbmdlKCB3cml0ZXIgPT4gewogKgkJCXdyaXRlci5pbnNlcnQoIHBvc2l0aW9uLCB3cml0ZXIuY3JlYXRlVGV4dCggJ2ZvbycgKSApOwogKgkJfSApOwogKgogKiBWaWV3IGNvbnRyb2xsZXIgYWxzbyByZWdpc3RlciB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL29ic2VydmVyfk9ic2VydmVyIG9ic2VydmVyc30gd2hpY2ggb2JzZXJ2ZXMgY2hhbmdlcwogKiBvbiBET00gYW5kIGZpcmUgZXZlbnRzIG9uIHRoZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50IERvY3VtZW50fS4KICogTm90ZSB0aGF0IHRoZSBmb2xsb3dpbmcgb2JzZXJ2ZXJzIGFyZSBhZGRlZCBieSB0aGUgY2xhc3MgY29uc3RydWN0b3IgYW5kIGFyZSBhbHdheXMgYXZhaWxhYmxlOgogKgogKiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvbXV0YXRpb25vYnNlcnZlcn5NdXRhdGlvbk9ic2VydmVyfSwKICogKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL3NlbGVjdGlvbm9ic2VydmVyflNlbGVjdGlvbk9ic2VydmVyfSwKICogKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL2ZvY3Vzb2JzZXJ2ZXJ+Rm9jdXNPYnNlcnZlcn0sCiAqICoge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9rZXlvYnNlcnZlcn5LZXlPYnNlcnZlcn0sCiAqICoge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9mYWtlc2VsZWN0aW9ub2JzZXJ2ZXJ+RmFrZVNlbGVjdGlvbk9ic2VydmVyfS4KICogKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL2NvbXBvc2l0aW9ub2JzZXJ2ZXJ+Q29tcG9zaXRpb25PYnNlcnZlcn0uCiAqCiAqIFRoaXMgY2xhc3MgYWxzbyB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3ZpZXd+VmlldyNhdHRhY2hEb21Sb290IGJpbmRzIHRoZSBET00gYW5kIHRoZSB2aWV3IGVsZW1lbnRzfS4KICoKICogSWYgeW91IGRvIG5vdCBuZWVkIGZ1bGwgYSBET00gLSB2aWV3IG1hbmFnZW1lbnQsIGFuZCBvbmx5IHdhbnQgdG8gdHJhbnNmb3JtIGEgdHJlZSBvZiB2aWV3IGVsZW1lbnRzIHRvIGEgdHJlZSBvZiBET00KICogZWxlbWVudHMgeW91IGRvIG5vdCBuZWVkIHRoaXMgY29udHJvbGxlci4gWW91IGNhbiB1c2UgdGhlIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9tY29udmVydGVyfkRvbUNvbnZlcnRlciBEb21Db252ZXJ0ZXJ9IGluc3RlYWQuCiAqCiAqIEBtaXhlcyBtb2R1bGU6dXRpbHMvb2JzZXJ2YWJsZW1peGlufk9ic2VydmFibGVNaXhpbgogKi8KCnZhciBWaWV3ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAvKioKICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9zdHlsZXNtYXB+U3R5bGVzUHJvY2Vzc29yfSBzdHlsZXNQcm9jZXNzb3IgVGhlIHN0eWxlcyBwcm9jZXNzb3IgaW5zdGFuY2UuCiAgICovCiAgZnVuY3Rpb24gVmlldyhzdHlsZXNQcm9jZXNzb3IpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZpZXcpOwoKICAgIC8qKgogICAgICogSW5zdGFuY2Ugb2YgdGhlIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnR+RG9jdW1lbnR9IGFzc29jaWF0ZWQgd2l0aCB0aGlzIHZpZXcgY29udHJvbGxlci4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEB0eXBlIHttb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnR+RG9jdW1lbnR9CiAgICAgKi8KICAgIHRoaXMuZG9jdW1lbnQgPSBuZXcgRG9jdW1lbnQoc3R5bGVzUHJvY2Vzc29yKTsKICAgIC8qKgogICAgICogSW5zdGFuY2Ugb2YgdGhlIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9tY29udmVydGVyfkRvbUNvbnZlcnRlciBkb21Db252ZXJ0ZXJ9IHVzZWQgYnkKICAgICAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvdmlld35WaWV3I19yZW5kZXJlciByZW5kZXJlcn0KICAgICAqIGFuZCB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL29ic2VydmVyfk9ic2VydmVyIG9ic2VydmVyc30uCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAdHlwZSB7bW9kdWxlOmVuZ2luZS92aWV3L2RvbWNvbnZlcnRlcn5Eb21Db252ZXJ0ZXJ9CiAgICAgKi8KCiAgICB0aGlzLmRvbUNvbnZlcnRlciA9IG5ldyBEb21Db252ZXJ0ZXIodGhpcy5kb2N1bWVudCk7CiAgICAvKioKICAgICAqIFJvb3RzIG9mIHRoZSBET00gdHJlZS4gTWFwIG9uIHRoZSBgSFRNTEVsZW1lbnRgcyB3aXRoIHJvb3RzIG5hbWVzIGFzIGtleXMuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAdHlwZSB7TWFwLjxTdHJpbmcsIEhUTUxFbGVtZW50Pn0KICAgICAqLwoKICAgIHRoaXMuZG9tUm9vdHMgPSBuZXcgTWFwKCk7CiAgICAvKioKICAgICAqIFVzZWQgdG8gcHJldmVudCBjYWxsaW5nIHtAbGluayAjZm9yY2VSZW5kZXJ9IGFuZCB7QGxpbmsgI2NoYW5nZX0gZHVyaW5nIHJlbmRlcmluZyB2aWV3IHRvIHRoZSBET00uCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHtCb29sZWFufSAjaXNSZW5kZXJpbmdJblByb2dyZXNzCiAgICAgKi8KCiAgICB0aGlzLnNldCgnaXNSZW5kZXJpbmdJblByb2dyZXNzJywgZmFsc2UpOwogICAgLyoqCiAgICAgKiBJbmZvcm1zIHdoZXRoZXIgdGhlIERPTSBzZWxlY3Rpb24gaXMgaW5zaWRlIGFueSBvZiB0aGUgRE9NIHJvb3RzIG1hbmFnZWQgYnkgdGhlIHZpZXcuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHtCb29sZWFufSAjaGFzRG9tU2VsZWN0aW9uCiAgICAgKi8KCiAgICB0aGlzLnNldCgnaGFzRG9tU2VsZWN0aW9uJywgZmFsc2UpOwogICAgLyoqCiAgICAgKiBJbnN0YW5jZSBvZiB0aGUge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9yZW5kZXJlcn5SZW5kZXJlciByZW5kZXJlcn0uCiAgICAgKgogICAgICogQHByb3RlY3RlZAogICAgICogQHR5cGUge21vZHVsZTplbmdpbmUvdmlldy9yZW5kZXJlcn5SZW5kZXJlcn0KICAgICAqLwoKICAgIHRoaXMuX3JlbmRlcmVyID0gbmV3IFJlbmRlcmVyKHRoaXMuZG9tQ29udmVydGVyLCB0aGlzLmRvY3VtZW50LnNlbGVjdGlvbik7CgogICAgdGhpcy5fcmVuZGVyZXIuYmluZCgnaXNGb2N1c2VkJykudG8odGhpcy5kb2N1bWVudCk7CiAgICAvKioKICAgICAqIEEgRE9NIHJvb3QgYXR0cmlidXRlcyBjYWNoZS4gSXQgc2F2ZXMgdGhlIGluaXRpYWwgdmFsdWVzIG9mIERPTSByb290IGF0dHJpYnV0ZXMgYmVmb3JlIHRoZSBET00gZWxlbWVudAogICAgICogaXMge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy92aWV3flZpZXcjYXR0YWNoRG9tUm9vdCBhdHRhY2hlZH0gdG8gdGhlIHZpZXcgc28gbGF0ZXIgb24sIHdoZW4KICAgICAqIHRoZSB2aWV3IGlzIGRlc3Ryb3llZCAoe0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy92aWV3flZpZXcjZGV0YWNoRG9tUm9vdH0pLCB0aGV5IGNhbiBiZSBlYXNpbHkgcmVzdG9yZWQuCiAgICAgKiBUaGlzIHdheSwgdGhlIERPTSBlbGVtZW50IGNhbiBnbyBiYWNrIHRvIHRoZSAoY2xlYW4pIHN0YXRlIGFzIGlmIHRoZSBlZGl0aW5nIHZpZXcgbmV2ZXIgdXNlZCBpdC4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQG1lbWJlciB7V2Vha01hcC48SFRNTEVsZW1lbnQsT2JqZWN0Pn0KICAgICAqLwoKCiAgICB0aGlzLl9pbml0aWFsRG9tUm9vdEF0dHJpYnV0ZXMgPSBuZXcgV2Vha01hcCgpOwogICAgLyoqCiAgICAgKiBNYXAgb2YgcmVnaXN0ZXJlZCB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L29ic2VydmVyL29ic2VydmVyfk9ic2VydmVyIG9ic2VydmVyc30uCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEB0eXBlIHtNYXAuPEZ1bmN0aW9uLCBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvb2JzZXJ2ZXJ+T2JzZXJ2ZXI+fQogICAgICovCgogICAgdGhpcy5fb2JzZXJ2ZXJzID0gbmV3IE1hcCgpOwogICAgLyoqCiAgICAgKiBJcyBzZXQgdG8gYHRydWVgIHdoZW4ge0BsaW5rICNjaGFuZ2UgdmlldyBjaGFuZ2VzfSBhcmUgY3VycmVudGx5IGluIHByb2dyZXNzLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAdHlwZSB7Qm9vbGVhbn0KICAgICAqLwoKICAgIHRoaXMuX29uZ29pbmdDaGFuZ2UgPSBmYWxzZTsKICAgIC8qKgogICAgICogVXNlZCB0byBwcmV2ZW50IGNhbGxpbmcge0BsaW5rICNmb3JjZVJlbmRlcn0gYW5kIHtAbGluayAjY2hhbmdlfSBkdXJpbmcgcmVuZGVyaW5nIHZpZXcgdG8gdGhlIERPTS4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQHR5cGUge0Jvb2xlYW59CiAgICAgKi8KCiAgICB0aGlzLl9wb3N0Rml4ZXJzSW5Qcm9ncmVzcyA9IGZhbHNlOwogICAgLyoqCiAgICAgKiBJbnRlcm5hbCBmbGFnIHRvIHRlbXBvcmFyeSBkaXNhYmxlIHJlbmRlcmluZy4gU2VlIHRoZSB1c2FnZSBpbiB0aGUge0BsaW5rICNfZGlzYWJsZVJlbmRlcmluZ30uCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEB0eXBlIHtCb29sZWFufQogICAgICovCgogICAgdGhpcy5fcmVuZGVyaW5nRGlzYWJsZWQgPSBmYWxzZTsKICAgIC8qKgogICAgICogSW50ZXJuYWwgZmxhZyB0aGF0IGRpc2FibGVzIHJlbmRlcmluZyB3aGVuIHRoZXJlIGFyZSBubyBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHJlbmRlcmluZy4KICAgICAqIEl0IHN0b3JlcyBpbmZvcm1hdGlvbiBhYm91dCBjaGFuZ2VkIHNlbGVjdGlvbiBhbmQgY2hhbmdlZCBlbGVtZW50cyBmcm9tIGF0dGFjaGVkIGRvY3VtZW50IHJvb3RzLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAdHlwZSB7Qm9vbGVhbn0KICAgICAqLwoKICAgIHRoaXMuX2hhc0NoYW5nZWRTaW5jZVRoZUxhc3RSZW5kZXJpbmcgPSBmYWxzZTsKICAgIC8qKgogICAgICogRG93bmNhc3RXcml0ZXIgaW5zdGFuY2UgdXNlZCBpbiB7QGxpbmsgI2NoYW5nZSBjaGFuZ2UgbWV0aG9kfSBjYWxsYmFja3MuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEB0eXBlIHttb2R1bGU6ZW5naW5lL3ZpZXcvZG93bmNhc3R3cml0ZXJ+RG93bmNhc3RXcml0ZXJ9CiAgICAgKi8KCiAgICB0aGlzLl93cml0ZXIgPSBuZXcgRG93bmNhc3RXcml0ZXIodGhpcy5kb2N1bWVudCk7IC8vIEFkZCBkZWZhdWx0IG9ic2VydmVycy4KCiAgICB0aGlzLmFkZE9ic2VydmVyKE11dGF0aW9uT2JzZXJ2ZXIpOwogICAgdGhpcy5hZGRPYnNlcnZlcihTZWxlY3Rpb25PYnNlcnZlcik7CiAgICB0aGlzLmFkZE9ic2VydmVyKEZvY3VzT2JzZXJ2ZXIpOwogICAgdGhpcy5hZGRPYnNlcnZlcihLZXlPYnNlcnZlcik7CiAgICB0aGlzLmFkZE9ic2VydmVyKEZha2VTZWxlY3Rpb25PYnNlcnZlcik7CiAgICB0aGlzLmFkZE9ic2VydmVyKENvbXBvc2l0aW9uT2JzZXJ2ZXIpOwogICAgdGhpcy5hZGRPYnNlcnZlcihBcnJvd0tleXNPYnNlcnZlcik7CgogICAgaWYgKGVudi5pc0FuZHJvaWQpIHsKICAgICAgdGhpcy5hZGRPYnNlcnZlcihJbnB1dE9ic2VydmVyKTsKICAgIH0gLy8gSW5qZWN0IHF1aXJrcyBoYW5kbGVycy4KCgogICAgaW5qZWN0UXVpcmtzSGFuZGxpbmcodGhpcyk7CiAgICBpbmplY3RVaUVsZW1lbnRIYW5kbGluZyh0aGlzKTsgLy8gVXNlICdub3JtYWwnIHByaW9yaXR5IHNvIHRoYXQgcmVuZGVyaW5nIGlzIHBlcmZvcm1lZCBhcyBmaXJzdCB3aGVuIHVzaW5nIHRoYXQgcHJpb3JpdHkuCgogICAgdGhpcy5vbigncmVuZGVyJywgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5fcmVuZGVyKCk7IC8vIEluZm9ybXMgdGhhdCBsYXlvdXQgaGFzIGNoYW5nZWQgYWZ0ZXIgcmVuZGVyLgoKCiAgICAgIF90aGlzLmRvY3VtZW50LmZpcmUoJ2xheW91dENoYW5nZWQnKTsgLy8gUmVzZXQgdGhlIGBfaGFzQ2hhbmdlZFNpbmNlVGhlTGFzdFJlbmRlcmluZ2AgZmxhZyBhZnRlciByZW5kZXJpbmcuCgoKICAgICAgX3RoaXMuX2hhc0NoYW5nZWRTaW5jZVRoZUxhc3RSZW5kZXJpbmcgPSBmYWxzZTsKICAgIH0pOyAvLyBMaXN0ZW4gdG8gdGhlIGRvY3VtZW50IHNlbGVjdGlvbiBjaGFuZ2VzIGRpcmVjdGx5LgoKICAgIHRoaXMubGlzdGVuVG8odGhpcy5kb2N1bWVudC5zZWxlY3Rpb24sICdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLl9oYXNDaGFuZ2VkU2luY2VUaGVMYXN0UmVuZGVyaW5nID0gdHJ1ZTsKICAgIH0pOwogIH0KICAvKioKICAgKiBBdHRhY2hlcyBhIERPTSByb290IGVsZW1lbnQgdG8gdGhlIHZpZXcgZWxlbWVudCBhbmQgZW5hYmxlIGFsbCBvYnNlcnZlcnMgb24gdGhhdCBlbGVtZW50LgogICAqIEFsc28ge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9yZW5kZXJlcn5SZW5kZXJlciNtYXJrVG9TeW5jIG1hcmsgZWxlbWVudH0gdG8gYmUgc3luY2hyb25pemVkCiAgICogd2l0aCB0aGUgdmlldyB3aGF0IG1lYW5zIHRoYXQgYWxsIGNoaWxkIG5vZGVzIHdpbGwgYmUgcmVtb3ZlZCBhbmQgcmVwbGFjZWQgd2l0aCBjb250ZW50IG9mIHRoZSB2aWV3IHJvb3QuCiAgICoKICAgKiBUaGlzIG1ldGhvZCBhbHNvIHdpbGwgY2hhbmdlIHZpZXcgZWxlbWVudCBuYW1lIGFzIHRoZSBzYW1lIGFzIHRhZyBuYW1lIG9mIGdpdmVuIGRvbSByb290LgogICAqIE5hbWUgaXMgYWx3YXlzIHRyYW5zZm9ybWVkIHRvIGxvd2VyIGNhc2UuCiAgICoKICAgKiAqKk5vdGU6KiogVXNlIHtAbGluayAjZGV0YWNoRG9tUm9vdCBgZGV0YWNoRG9tUm9vdCgpYH0gdG8gcmV2ZXJ0IHRoaXMgYWN0aW9uLgogICAqCiAgICogQHBhcmFtIHtFbGVtZW50fSBkb21Sb290IERPTSByb290IGVsZW1lbnQuCiAgICogQHBhcmFtIHtTdHJpbmd9IFtuYW1lPSdtYWluJ10gTmFtZSBvZiB0aGUgcm9vdC4KICAgKi8KCgogIF9jcmVhdGVDbGFzcyhWaWV3LCBbewogICAga2V5OiAiYXR0YWNoRG9tUm9vdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXR0YWNoRG9tUm9vdChkb21Sb290KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIG5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdtYWluJzsKICAgICAgdmFyIHZpZXdSb290ID0gdGhpcy5kb2N1bWVudC5nZXRSb290KG5hbWUpOyAvLyBTZXQgdmlldyByb290IG5hbWUgdGhlIHNhbWUgYXMgRE9NIHJvb3QgdGFnIG5hbWUuCgogICAgICB2aWV3Um9vdC5fbmFtZSA9IGRvbVJvb3QudGFnTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICB2YXIgaW5pdGlhbERvbVJvb3RBdHRyaWJ1dGVzID0ge307IC8vIDEuIENvcHkgYW5kIGNhY2hlIHRoZSBhdHRyaWJ1dGVzIHRvIHJlbWVtYmVyIHRoZSBzdGF0ZSBvZiB0aGUgZWxlbWVudCBiZWZvcmUgYXR0YWNoaW5nLgogICAgICAvLyAgICBUaGUgY2FjaGVkIGF0dHJpYnV0ZXMgd2lsbCBiZSByZXN0b3JlZCBpbiBkZXRhY2hEb21Sb290KCkgc28gdGhlIGVsZW1lbnQgZ29lcyB0byB0aGUKICAgICAgLy8gICAgY2xlYW4gc3RhdGUgYXMgaWYgdGhlIGVkaXRpbmcgdmlldyBuZXZlciB1c2VkIGl0LgogICAgICAvLyAyLiBBcHBseSB0aGUgYXR0cmlidXRlcyB1c2luZyB0aGUgdmlldyB3cml0ZXIsIHNvIHRoZXkgYWxsIGdvIHVuZGVyIHRoZSBjb250cm9sIG9mIHRoZSBlbmdpbmUuCiAgICAgIC8vICAgIFRoZSBlZGl0aW5nIHZpZXcgdGFrZXMgb3ZlciB0aGUgYXR0cmlidXRlIG1hbmFnZW1lbnQgY29tcGxldGVseSBiZWNhdXNlIHZhcmlvdXMKICAgICAgLy8gICAgZmVhdHVyZXMgKGUuZy4gYWRkUGxhY2Vob2xkZXIoKSkgcmVxdWlyZSBkeW5hbWljIGNoYW5nZXMgb2YgdGhvc2UgYXR0cmlidXRlcyBhbmQgdGhleQogICAgICAvLyAgICBjYW5ub3QgYmUgbWFuYWdlZCBieSB0aGUgZW5naW5lIGFuZCB0aGUgVUkgbGlicmFyeSBhdCB0aGUgc2FtZSB0aW1lLgoKICAgICAgZm9yICh2YXIgX2kgPSAwLCBfQXJyYXkkZnJvbSA9IEFycmF5LmZyb20oZG9tUm9vdC5hdHRyaWJ1dGVzKTsgX2kgPCBfQXJyYXkkZnJvbS5sZW5ndGg7IF9pKyspIHsKICAgICAgICB2YXIgX0FycmF5JGZyb20kX2kgPSBfQXJyYXkkZnJvbVtfaV0sCiAgICAgICAgICAgIF9uYW1lID0gX0FycmF5JGZyb20kX2kubmFtZSwKICAgICAgICAgICAgdmFsdWUgPSBfQXJyYXkkZnJvbSRfaS52YWx1ZTsKICAgICAgICBpbml0aWFsRG9tUm9vdEF0dHJpYnV0ZXNbX25hbWVdID0gdmFsdWU7IC8vIERvIG5vdCB1c2Ugd3JpdGVyLnNldEF0dHJpYnV0ZSgpIGZvciB0aGUgY2xhc3MgYXR0cmlidXRlLiBUaGUgRWRpdGFibGVVSVZpZXcgY2xhc3MKICAgICAgICAvLyBhbmQgaXRzIGRlc2NlbmRhbnRzIGNvdWxkIGhhdmUgYWxyZWFkeSBzZXQgc29tZSB1c2luZyB0aGUgd3JpdGVyLmFkZENsYXNzKCkgb24gdGhlIHZpZXcKICAgICAgICAvLyBkb2N1bWVudCByb290LiBUaGV5IGhhdmVuJ3QgYmVlbiByZW5kZXJlZCB5ZXQgc28gdGhleSBhcmUgbm90IHByZXNlbnQgaW4gdGhlIERPTSByb290LgogICAgICAgIC8vIFVzaW5nIHdyaXRlci5zZXRBdHRyaWJ1dGUoICdjbGFzcycsIC4uLiApIHdvdWxkIG92ZXJyaWRlIHRoZW0gY29tcGxldGVseS4KCiAgICAgICAgaWYgKF9uYW1lID09PSAnY2xhc3MnKSB7CiAgICAgICAgICB0aGlzLl93cml0ZXIuYWRkQ2xhc3ModmFsdWUuc3BsaXQoJyAnKSwgdmlld1Jvb3QpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl93cml0ZXIuc2V0QXR0cmlidXRlKF9uYW1lLCB2YWx1ZSwgdmlld1Jvb3QpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5faW5pdGlhbERvbVJvb3RBdHRyaWJ1dGVzLnNldChkb21Sb290LCBpbml0aWFsRG9tUm9vdEF0dHJpYnV0ZXMpOwoKICAgICAgdmFyIHVwZGF0ZUNvbnRlbnRlZGl0YWJsZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIHVwZGF0ZUNvbnRlbnRlZGl0YWJsZUF0dHJpYnV0ZSgpIHsKICAgICAgICBfdGhpczIuX3dyaXRlci5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsICF2aWV3Um9vdC5pc1JlYWRPbmx5LCB2aWV3Um9vdCk7CgogICAgICAgIGlmICh2aWV3Um9vdC5pc1JlYWRPbmx5KSB7CiAgICAgICAgICBfdGhpczIuX3dyaXRlci5hZGRDbGFzcygnY2stcmVhZC1vbmx5Jywgdmlld1Jvb3QpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuX3dyaXRlci5yZW1vdmVDbGFzcygnY2stcmVhZC1vbmx5Jywgdmlld1Jvb3QpOwogICAgICAgIH0KICAgICAgfTsgLy8gU2V0IGluaXRpYWwgdmFsdWUuCgoKICAgICAgdXBkYXRlQ29udGVudGVkaXRhYmxlQXR0cmlidXRlKCk7CiAgICAgIHRoaXMuZG9tUm9vdHMuc2V0KG5hbWUsIGRvbVJvb3QpOwogICAgICB0aGlzLmRvbUNvbnZlcnRlci5iaW5kRWxlbWVudHMoZG9tUm9vdCwgdmlld1Jvb3QpOwoKICAgICAgdGhpcy5fcmVuZGVyZXIubWFya1RvU3luYygnY2hpbGRyZW4nLCB2aWV3Um9vdCk7CgogICAgICB0aGlzLl9yZW5kZXJlci5tYXJrVG9TeW5jKCdhdHRyaWJ1dGVzJywgdmlld1Jvb3QpOwoKICAgICAgdGhpcy5fcmVuZGVyZXIuZG9tRG9jdW1lbnRzLmFkZChkb21Sb290Lm93bmVyRG9jdW1lbnQpOwoKICAgICAgdmlld1Jvb3Qub24oJ2NoYW5nZTpjaGlsZHJlbicsIGZ1bmN0aW9uIChldnQsIG5vZGUpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLl9yZW5kZXJlci5tYXJrVG9TeW5jKCdjaGlsZHJlbicsIG5vZGUpOwogICAgICB9KTsKICAgICAgdmlld1Jvb3Qub24oJ2NoYW5nZTphdHRyaWJ1dGVzJywgZnVuY3Rpb24gKGV2dCwgbm9kZSkgewogICAgICAgIHJldHVybiBfdGhpczIuX3JlbmRlcmVyLm1hcmtUb1N5bmMoJ2F0dHJpYnV0ZXMnLCBub2RlKTsKICAgICAgfSk7CiAgICAgIHZpZXdSb290Lm9uKCdjaGFuZ2U6dGV4dCcsIGZ1bmN0aW9uIChldnQsIG5vZGUpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLl9yZW5kZXJlci5tYXJrVG9TeW5jKCd0ZXh0Jywgbm9kZSk7CiAgICAgIH0pOwogICAgICB2aWV3Um9vdC5vbignY2hhbmdlOmlzUmVhZE9ubHknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5jaGFuZ2UodXBkYXRlQ29udGVudGVkaXRhYmxlQXR0cmlidXRlKTsKICAgICAgfSk7CiAgICAgIHZpZXdSb290Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLl9oYXNDaGFuZ2VkU2luY2VUaGVMYXN0UmVuZGVyaW5nID0gdHJ1ZTsKICAgICAgfSk7CgogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5fb2JzZXJ2ZXJzLnZhbHVlcygpKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIG9ic2VydmVyID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGRvbVJvb3QsIG5hbWUpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIERldGFjaGVzIGEgRE9NIHJvb3QgZWxlbWVudCBmcm9tIHRoZSB2aWV3IGVsZW1lbnQgYW5kIHJlc3RvcmVzIGl0cyBhdHRyaWJ1dGVzIHRvIHRoZSBzdGF0ZSBiZWZvcmUKICAgICAqIHtAbGluayAjYXR0YWNoRG9tUm9vdCBgYXR0YWNoRG9tUm9vdCgpYH0uCiAgICAgKgogICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgcm9vdCB0byBkZXRhY2guCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZGV0YWNoRG9tUm9vdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGV0YWNoRG9tUm9vdChuYW1lKSB7CiAgICAgIHZhciBkb21Sb290ID0gdGhpcy5kb21Sb290cy5nZXQobmFtZSk7IC8vIFJlbW92ZSBhbGwgcm9vdCBhdHRyaWJ1dGVzIHNvIHRoZSBET00gZWxlbWVudCBpcyAiYmFyZSIuCgogICAgICBBcnJheS5mcm9tKGRvbVJvb3QuYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBuYW1lID0gX3JlZi5uYW1lOwogICAgICAgIHJldHVybiBkb21Sb290LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsKICAgICAgfSk7CgogICAgICB2YXIgaW5pdGlhbERvbVJvb3RBdHRyaWJ1dGVzID0gdGhpcy5faW5pdGlhbERvbVJvb3RBdHRyaWJ1dGVzLmdldChkb21Sb290KTsgLy8gUmV2ZXJ0IGFsbCB2aWV3IHJvb3QgYXR0cmlidXRlcyBiYWNrIHRvIHRoZSBzdGF0ZSBiZWZvcmUgYXR0YWNoRG9tUm9vdCB3YXMgY2FsbGVkLgoKCiAgICAgIGZvciAodmFyIGF0dHJpYnV0ZSBpbiBpbml0aWFsRG9tUm9vdEF0dHJpYnV0ZXMpIHsKICAgICAgICBkb21Sb290LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIGluaXRpYWxEb21Sb290QXR0cmlidXRlc1thdHRyaWJ1dGVdKTsKICAgICAgfQoKICAgICAgdGhpcy5kb21Sb290cy5kZWxldGUobmFtZSk7CiAgICAgIHRoaXMuZG9tQ29udmVydGVyLnVuYmluZERvbUVsZW1lbnQoZG9tUm9vdCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldHMgRE9NIHJvb3QgZWxlbWVudC4KICAgICAqCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW25hbWU9J21haW4nXSAgTmFtZSBvZiB0aGUgcm9vdC4KICAgICAqIEByZXR1cm5zIHtFbGVtZW50fSBET00gcm9vdCBlbGVtZW50IGluc3RhbmNlLgogICAgICovCgogIH0sIHsKICAgIGtleTogImdldERvbVJvb3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERvbVJvb3QoKSB7CiAgICAgIHZhciBuYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnbWFpbic7CiAgICAgIHJldHVybiB0aGlzLmRvbVJvb3RzLmdldChuYW1lKTsKICAgIH0KICAgIC8qKgogICAgICogQ3JlYXRlcyBvYnNlcnZlciBvZiB0aGUgZ2l2ZW4gdHlwZSBpZiBub3QgeWV0IGNyZWF0ZWQsIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvb2JzZXJ2ZXJ+T2JzZXJ2ZXIjZW5hYmxlIGVuYWJsZXN9IGl0CiAgICAgKiBhbmQge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9vYnNlcnZlcn5PYnNlcnZlciNvYnNlcnZlIGF0dGFjaGVzfSB0byBhbGwgZXhpc3RpbmcgYW5kIGZ1dHVyZQogICAgICoge0BsaW5rICNkb21Sb290cyBET00gcm9vdHN9LgogICAgICoKICAgICAqIE5vdGU6IE9ic2VydmVycyBhcmUgcmVjb2duaXplZCBieSB0aGVpciBjb25zdHJ1Y3RvciAoY2xhc3NlcykuIEEgc2luZ2xlIG9ic2VydmVyIHdpbGwgYmUgaW5zdGFudGlhdGVkIGFuZCB1c2VkIG9ubHkKICAgICAqIHdoZW4gcmVnaXN0ZXJlZCBmb3IgdGhlIGZpcnN0IHRpbWUuIFRoaXMgbWVhbnMgdGhhdCBmZWF0dXJlcyBhbmQgb3RoZXIgY29tcG9uZW50cyBjYW4gcmVnaXN0ZXIgYSBzaW5nbGUgb2JzZXJ2ZXIKICAgICAqIG11bHRpcGxlIHRpbWVzIHdpdGhvdXQgY2FyaW5nIHdoZXRoZXIgaXQgaGFzIGJlZW4gYWxyZWFkeSBhZGRlZCBvciBub3QuCiAgICAgKgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gT2JzZXJ2ZXIgVGhlIGNvbnN0cnVjdG9yIG9mIGFuIG9ic2VydmVyIHRvIGFkZC4KICAgICAqIFNob3VsZCBjcmVhdGUgYW4gaW5zdGFuY2UgaW5oZXJpdGluZyBmcm9tIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvb2JzZXJ2ZXIvb2JzZXJ2ZXJ+T2JzZXJ2ZXJ9LgogICAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9vYnNlcnZlcn5PYnNlcnZlcn0gQWRkZWQgb2JzZXJ2ZXIgaW5zdGFuY2UuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiYWRkT2JzZXJ2ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZE9ic2VydmVyKE9ic2VydmVyKSB7CiAgICAgIHZhciBvYnNlcnZlciA9IHRoaXMuX29ic2VydmVycy5nZXQoT2JzZXJ2ZXIpOwoKICAgICAgaWYgKG9ic2VydmVyKSB7CiAgICAgICAgcmV0dXJuIG9ic2VydmVyOwogICAgICB9CgogICAgICBvYnNlcnZlciA9IG5ldyBPYnNlcnZlcih0aGlzKTsKCiAgICAgIHRoaXMuX29ic2VydmVycy5zZXQoT2JzZXJ2ZXIsIG9ic2VydmVyKTsKCiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5kb21Sb290cyksCiAgICAgICAgICBfc3RlcDI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgX3N0ZXAyJHZhbHVlID0gX3NsaWNlZFRvQXJyYXkoX3N0ZXAyLnZhbHVlLCAyKSwKICAgICAgICAgICAgICBuYW1lID0gX3N0ZXAyJHZhbHVlWzBdLAogICAgICAgICAgICAgIGRvbUVsZW1lbnQgPSBfc3RlcDIkdmFsdWVbMV07CgogICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb21FbGVtZW50LCBuYW1lKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICB9CgogICAgICBvYnNlcnZlci5lbmFibGUoKTsKICAgICAgcmV0dXJuIG9ic2VydmVyOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIG9ic2VydmVyIG9mIHRoZSBnaXZlbiB0eXBlIG9yIGB1bmRlZmluZWRgIGlmIHN1Y2ggb2JzZXJ2ZXIgaGFzIG5vdCBiZWVuIGFkZGVkIHlldC4KICAgICAqCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBPYnNlcnZlciBUaGUgY29uc3RydWN0b3Igb2YgYW4gb2JzZXJ2ZXIgdG8gZ2V0LgogICAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvdmlldy9vYnNlcnZlci9vYnNlcnZlcn5PYnNlcnZlcnx1bmRlZmluZWR9IE9ic2VydmVyIGluc3RhbmNlIG9yIHVuZGVmaW5lZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRPYnNlcnZlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T2JzZXJ2ZXIoT2JzZXJ2ZXIpIHsKICAgICAgcmV0dXJuIHRoaXMuX29ic2VydmVycy5nZXQoT2JzZXJ2ZXIpOwogICAgfQogICAgLyoqCiAgICAgKiBEaXNhYmxlcyBhbGwgYWRkZWQgb2JzZXJ2ZXJzLgogICAgICovCgogIH0sIHsKICAgIGtleTogImRpc2FibGVPYnNlcnZlcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2FibGVPYnNlcnZlcnMoKSB7CiAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5fb2JzZXJ2ZXJzLnZhbHVlcygpKSwKICAgICAgICAgIF9zdGVwMzsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBvYnNlcnZlciA9IF9zdGVwMy52YWx1ZTsKICAgICAgICAgIG9ic2VydmVyLmRpc2FibGUoKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEVuYWJsZXMgYWxsIGFkZGVkIG9ic2VydmVycy4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJlbmFibGVPYnNlcnZlcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVuYWJsZU9ic2VydmVycygpIHsKICAgICAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLl9vYnNlcnZlcnMudmFsdWVzKCkpLAogICAgICAgICAgX3N0ZXA0OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgdmFyIG9ic2VydmVyID0gX3N0ZXA0LnZhbHVlOwogICAgICAgICAgb2JzZXJ2ZXIuZW5hYmxlKCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I0LmYoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTY3JvbGxzIHRoZSBwYWdlIHZpZXdwb3J0IGFuZCB7QGxpbmsgI2RvbVJvb3RzfSB3aXRoIHRoZWlyIGFuY2VzdG9ycyB0byByZXZlYWwgdGhlCiAgICAgKiBjYXJldCwgaWYgbm90IGFscmVhZHkgdmlzaWJsZSB0byB0aGUgdXNlci4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzY3JvbGxUb1RoZVNlbGVjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsVG9UaGVTZWxlY3Rpb24oKSB7CiAgICAgIHZhciByYW5nZSA9IHRoaXMuZG9jdW1lbnQuc2VsZWN0aW9uLmdldEZpcnN0UmFuZ2UoKTsKCiAgICAgIGlmIChyYW5nZSkgewogICAgICAgIHNjcm9sbFZpZXdwb3J0VG9TaG93VGFyZ2V0KHsKICAgICAgICAgIHRhcmdldDogdGhpcy5kb21Db252ZXJ0ZXIudmlld1JhbmdlVG9Eb20ocmFuZ2UpLAogICAgICAgICAgdmlld3BvcnRPZmZzZXQ6IDIwCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogSXQgd2lsbCBmb2N1cyBET00gZWxlbWVudCByZXByZXNlbnRpbmcge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9lZGl0YWJsZWVsZW1lbnR+RWRpdGFibGVFbGVtZW50IEVkaXRhYmxlRWxlbWVudH0KICAgICAqIHRoYXQgaXMgY3VycmVudGx5IGhhdmluZyBzZWxlY3Rpb24gaW5zaWRlLgogICAgICovCgogIH0sIHsKICAgIGtleTogImZvY3VzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb2N1cygpIHsKICAgICAgaWYgKCF0aGlzLmRvY3VtZW50LmlzRm9jdXNlZCkgewogICAgICAgIHZhciBlZGl0YWJsZSA9IHRoaXMuZG9jdW1lbnQuc2VsZWN0aW9uLmVkaXRhYmxlRWxlbWVudDsKCiAgICAgICAgaWYgKGVkaXRhYmxlKSB7CiAgICAgICAgICB0aGlzLmRvbUNvbnZlcnRlci5mb2N1cyhlZGl0YWJsZSk7CiAgICAgICAgICB0aGlzLmZvcmNlUmVuZGVyKCk7CiAgICAgICAgfSBlbHNlIHsvLyBCZWZvcmUgZm9jdXNpbmcgdmlldyBkb2N1bWVudCwgc2VsZWN0aW9uIHNob3VsZCBiZSBwbGFjZWQgaW5zaWRlIG9uZSBvZiB0aGUgdmlldydzIGVkaXRhYmxlcy4KICAgICAgICAgIC8vIE5vcm1hbGx5IGl0cyBzZWxlY3Rpb24gd2lsbCBiZSBjb252ZXJ0ZWQgZnJvbSBtb2RlbCBkb2N1bWVudCAod2hpY2ggaGF2ZSBkZWZhdWx0IHNlbGVjdGlvbiksIGJ1dAogICAgICAgICAgLy8gd2hlbiB1c2luZyB2aWV3IGRvY3VtZW50IG9uIGl0cyBvd24sIHdlIG5lZWQgdG8gbWFudWFsbHkgcGxhY2Ugc2VsZWN0aW9uIGJlZm9yZSBmb2N1c2luZyBpdC4KICAgICAgICAgIC8vCiAgICAgICAgICAvLyBAaWYgQ0tfREVCVUcgLy8gY29uc29sZS53YXJuKCAnVGhlcmUgaXMgbm8gc2VsZWN0aW9uIGluIGFueSBlZGl0YWJsZSB0byBmb2N1cy4nICk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFRoZSBgY2hhbmdlKClgIG1ldGhvZCBpcyB0aGUgcHJpbWFyeSB3YXkgb2YgY2hhbmdpbmcgdGhlIHZpZXcuIFlvdSBzaG91bGQgdXNlIGl0IHRvIG1vZGlmeSBhbnkgbm9kZSBpbiB0aGUgdmlldyB0cmVlLgogICAgICogSXQgbWFrZXMgc3VyZSB0aGF0IGFmdGVyIGFsbCBjaGFuZ2VzIGFyZSBtYWRlIHRoZSB2aWV3IGlzIHJlbmRlcmVkIHRvIHRoZSBET00gKGFzc3VtaW5nIHRoYXQgdGhlIHZpZXcgd2lsbCBiZSBjaGFuZ2VkCiAgICAgKiBpbnNpZGUgdGhlIGNhbGxiYWNrKS4gSXQgcHJldmVudHMgc2l0dWF0aW9ucyB3aGVuIHRoZSBET00gaXMgdXBkYXRlZCB3aGVuIHRoZSB2aWV3IHN0YXRlIGlzIG5vdCB5ZXQgY29ycmVjdC4gSXQgYWxsb3dzCiAgICAgKiB0byBuZXN0IGNhbGxzIG9uZSBpbnNpZGUgYW5vdGhlciBhbmQgc3RpbGwgcGVyZm9ybXMgYSBzaW5nbGUgcmVuZGVyaW5nIGFmdGVyIGFsbCB0aG9zZSBjaGFuZ2VzIGFyZSBtYWRlLgogICAgICogSXQgYWxzbyByZXR1cm5zIHRoZSByZXR1cm4gdmFsdWUgb2YgaXRzIGNhbGxiYWNrLgogICAgICoKICAgICAqCQljb25zdCB0ZXh0ID0gdmlldy5jaGFuZ2UoIHdyaXRlciA9PiB7CiAgICAgKgkJCWNvbnN0IG5ld1RleHQgPSB3cml0ZXIuY3JlYXRlVGV4dCggJ2ZvbycgKTsKICAgICAqCQkJd3JpdGVyLmluc2VydCggcG9zaXRpb24xLCBuZXdUZXh0ICk7CiAgICAgKgogICAgICoJCQl2aWV3LmNoYW5nZSggd3JpdGVyID0+IHsKICAgICAqCQkJCXdyaXRlci5pbnNlcnQoIHBvc2l0aW9uMiwgd3JpdGVyLmNyZWF0ZVRleHQoICdiYXInICkgKTsKICAgICAqCQkJfSApOwogICAgICoKICAgICAqIAkJCXdyaXRlci5yZW1vdmUoIHJhbmdlICk7CiAgICAgKgogICAgICogCQkJcmV0dXJuIG5ld1RleHQ7CiAgICAgKgkJfSApOwogICAgICoKICAgICAqIFdoZW4gdGhlIG91dGVybW9zdCBjaGFuZ2UgYmxvY2sgaXMgZG9uZSBhbmQgcmVuZGVyaW5nIHRvIHRoZSBET00gaXMgb3ZlciB0aGUKICAgICAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvdmlld35WaWV3I2V2ZW50OnJlbmRlciBgVmlldyNyZW5kZXJgfSBldmVudCBpcyBmaXJlZC4KICAgICAqCiAgICAgKiBUaGlzIG1ldGhvZCB0aHJvd3MgYSBgYXBwbHlpbmctdmlldy1jaGFuZ2VzLW9uLXJlbmRlcmluZ2AgZXJyb3Igd2hlbgogICAgICogdGhlIGNoYW5nZSBibG9jayBpcyB1c2VkIGFmdGVyIHJlbmRlcmluZyB0byB0aGUgRE9NIGhhcyBzdGFydGVkLgogICAgICoKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIG1heSBtb2RpZnkgdGhlIHZpZXcuCiAgICAgKiBAcmV0dXJucyB7Kn0gVmFsdWUgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrLgogICAgICovCgogIH0sIHsKICAgIGtleTogImNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlKGNhbGxiYWNrKSB7CiAgICAgIGlmICh0aGlzLmlzUmVuZGVyaW5nSW5Qcm9ncmVzcyB8fCB0aGlzLl9wb3N0Rml4ZXJzSW5Qcm9ncmVzcykgewogICAgICAgIC8qKgogICAgICAgICAqIFRocm93biB3aGVuIHRoZXJlIGlzIGFuIGF0dGVtcHQgdG8gbWFrZSBjaGFuZ2VzIHRvIHRoZSB2aWV3IHRyZWUgd2hlbiBpdCBpcyBpbiBpbmNvcnJlY3Qgc3RhdGUuIFRoaXMgbWF5CiAgICAgICAgICogY2F1c2Ugc29tZSB1bmV4cGVjdGVkIGJlaGF2aW91ciBhbmQgaW5jb25zaXN0ZW5jeSBiZXR3ZWVuIHRoZSBET00gYW5kIHRoZSB2aWV3LgogICAgICAgICAqIFRoaXMgbWF5IGJlIGNhdXNlZCBieToKICAgICAgICAgKgogICAgICAgICAqICogY2FsbGluZyB7QGxpbmsgI2NoYW5nZX0gb3Ige0BsaW5rICNmb3JjZVJlbmRlcn0gZHVyaW5nIHJlbmRlcmluZyBwcm9jZXNzLAogICAgICAgICAqICogY2FsbGluZyB7QGxpbmsgI2NoYW5nZX0gb3Ige0BsaW5rICNmb3JjZVJlbmRlcn0gaW5zaWRlIG9mCiAgICAgICAgICogICB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50I3JlZ2lzdGVyUG9zdEZpeGVyIHBvc3QtZml4ZXIgZnVuY3Rpb259LgogICAgICAgICAqCiAgICAgICAgICogQGVycm9yIGNhbm5vdC1jaGFuZ2Utdmlldy10cmVlCiAgICAgICAgICovCiAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ2Nhbm5vdC1jaGFuZ2Utdmlldy10cmVlJywgdGhpcyk7CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgLy8gUmVjdXJzaXZlIGNhbGwgdG8gdmlldy5jaGFuZ2UoKSBtZXRob2QgLSBleGVjdXRlIGxpc3RlbmVyIGltbWVkaWF0ZWx5LgogICAgICAgIGlmICh0aGlzLl9vbmdvaW5nQ2hhbmdlKSB7CiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodGhpcy5fd3JpdGVyKTsKICAgICAgICB9IC8vIFRoaXMgbG9jayB3aWxsIGFzc3VyZSB0aGF0IGFsbCByZWN1cnNpdmUgY2FsbHMgdG8gdmlldy5jaGFuZ2UoKSB3aWxsIGVuZCB1cCBpbiBzYW1lIGJsb2NrIC0gb25lICJyZW5kZXIiCiAgICAgICAgLy8gZXZlbnQgZm9yIGFsbCBuZXN0ZWQgY2FsbHMuCgoKICAgICAgICB0aGlzLl9vbmdvaW5nQ2hhbmdlID0gdHJ1ZTsKICAgICAgICB2YXIgY2FsbGJhY2tSZXN1bHQgPSBjYWxsYmFjayh0aGlzLl93cml0ZXIpOwogICAgICAgIHRoaXMuX29uZ29pbmdDaGFuZ2UgPSBmYWxzZTsgLy8gVGhpcyBsb2NrIGlzIHVzZWQgYnkgZWRpdGluZyBjb250cm9sbGVyIHRvIHJlbmRlciBjaGFuZ2VzIGZyb20gb3V0ZXIgbW9zdCBtb2RlbC5jaGFuZ2UoKSBvbmNlLiBBcyBwbHVnaW5zIG1pZ2h0IGNhbGwKICAgICAgICAvLyB2aWV3LmNoYW5nZSgpIGluc2lkZSBtb2RlbC5jaGFuZ2UoKSBibG9jayAtIHRoaXMgd2lsbCBlbnN1cmVzIHRoYXQgcG9zdGZpeGVycyBhbmQgcmVuZGVyaW5nIGFyZSBjYWxsZWQgb25jZSBhZnRlciBhbGwKICAgICAgICAvLyBjaGFuZ2VzLiBBbHNvLCB3ZSBkb24ndCBuZWVkIHRvIHJlbmRlciBhbnl0aGluZyBpZiB0aGVyZSdyZSBubyBjaGFuZ2VzIHNpbmNlIGxhc3QgcmVuZGVyaW5nLgoKICAgICAgICBpZiAoIXRoaXMuX3JlbmRlcmluZ0Rpc2FibGVkICYmIHRoaXMuX2hhc0NoYW5nZWRTaW5jZVRoZUxhc3RSZW5kZXJpbmcpIHsKICAgICAgICAgIHRoaXMuX3Bvc3RGaXhlcnNJblByb2dyZXNzID0gdHJ1ZTsKCiAgICAgICAgICB0aGlzLmRvY3VtZW50Ll9jYWxsUG9zdEZpeGVycyh0aGlzLl93cml0ZXIpOwoKICAgICAgICAgIHRoaXMuX3Bvc3RGaXhlcnNJblByb2dyZXNzID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmZpcmUoJ3JlbmRlcicpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNhbGxiYWNrUmVzdWx0OwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAvLyBAaWYgQ0tfREVCVUcgLy8gdGhyb3cgZXJyOwoKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgIENLRWRpdG9yRXJyb3IucmV0aHJvd1VuZXhwZWN0ZWRFcnJvcihlcnIsIHRoaXMpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEZvcmNlcyByZW5kZXJpbmcge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudH5Eb2N1bWVudCB2aWV3IGRvY3VtZW50fSB0byBET00uIElmIGFueSB2aWV3IGNoYW5nZXMgYXJlCiAgICAgKiBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MsIHJlbmRlcmluZyB3aWxsIHN0YXJ0IGFmdGVyIGFsbCB7QGxpbmsgI2NoYW5nZSBjaGFuZ2UgYmxvY2tzfSBhcmUgcHJvY2Vzc2VkLgogICAgICoKICAgICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBkZWRpY2F0ZWQgZm9yIHNwZWNpYWwgY2FzZXMuIEFsbCB2aWV3IGNoYW5nZXMgc2hvdWxkIGJlIHdyYXBwZWQgaW4gdGhlIHtAbGluayAjY2hhbmdlfQogICAgICogYmxvY2sgYW5kIHRoZSB2aWV3IHdpbGwgYXV0b21hdGljYWxseSBjaGVjayB3aGV0aGVyIGl0IG5lZWRzIHRvIHJlbmRlciBET00gb3Igbm90LgogICAgICoKICAgICAqIFRocm93cyB7QGxpbmsgbW9kdWxlOnV0aWxzL2NrZWRpdG9yZXJyb3J+Q0tFZGl0b3JFcnJvciBDS0VkaXRvckVycm9yfSBgYXBwbHlpbmctdmlldy1jaGFuZ2VzLW9uLXJlbmRlcmluZ2Agd2hlbgogICAgICogdHJ5aW5nIHRvIHJlLXJlbmRlciB3aGVuIHJlbmRlcmluZyB0byBET00gaGFzIGFscmVhZHkgc3RhcnRlZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmb3JjZVJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9yY2VSZW5kZXIoKSB7CiAgICAgIHRoaXMuX2hhc0NoYW5nZWRTaW5jZVRoZUxhc3RSZW5kZXJpbmcgPSB0cnVlOwogICAgICB0aGlzLmNoYW5nZShmdW5jdGlvbiAoKSB7fSk7CiAgICB9CiAgICAvKioKICAgICAqIERlc3Ryb3lzIHRoaXMgaW5zdGFuY2UuIE1ha2VzIHN1cmUgdGhhdCBhbGwgb2JzZXJ2ZXJzIGFyZSBkZXN0cm95ZWQgYW5kIGxpc3RlbmVycyByZW1vdmVkLgogICAgICovCgogIH0sIHsKICAgIGtleTogImRlc3Ryb3kiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7CiAgICAgIHZhciBfaXRlcmF0b3I1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5fb2JzZXJ2ZXJzLnZhbHVlcygpKSwKICAgICAgICAgIF9zdGVwNTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBvYnNlcnZlciA9IF9zdGVwNS52YWx1ZTsKICAgICAgICAgIG9ic2VydmVyLmRlc3Ryb3koKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjUuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICB9CgogICAgICB0aGlzLmRvY3VtZW50LmRlc3Ryb3koKTsKICAgICAgdGhpcy5zdG9wTGlzdGVuaW5nKCk7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZXMgcG9zaXRpb24gYXQgdGhlIGdpdmVuIGxvY2F0aW9uLiBUaGUgbG9jYXRpb24gY2FuIGJlIHNwZWNpZmllZCBhczoKICAgICAqCiAgICAgKiAqIGEge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbiBwb3NpdGlvbn0sCiAgICAgKiAqIHBhcmVudCBlbGVtZW50IGFuZCBvZmZzZXQgKG9mZnNldCBkZWZhdWx0cyB0byBgMGApLAogICAgICogKiBwYXJlbnQgZWxlbWVudCBhbmQgYCdlbmQnYCAoc2V0cyBwb3NpdGlvbiBhdCB0aGUgZW5kIG9mIHRoYXQgZWxlbWVudCksCiAgICAgKiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvaXRlbX5JdGVtIHZpZXcgaXRlbX0gYW5kIGAnYmVmb3JlJ2Agb3IgYCdhZnRlcidgIChzZXRzIHBvc2l0aW9uIGJlZm9yZSBvciBhZnRlciBnaXZlbiB2aWV3IGl0ZW0pLgogICAgICoKICAgICAqIFRoaXMgbWV0aG9kIGlzIGEgc2hvcnRjdXQgdG8gb3RoZXIgY29uc3RydWN0b3JzIHN1Y2ggYXM6CiAgICAgKgogICAgICogKiB7QGxpbmsgI2NyZWF0ZVBvc2l0aW9uQmVmb3JlfSwKICAgICAqICoge0BsaW5rICNjcmVhdGVQb3NpdGlvbkFmdGVyfSwKICAgICAqCiAgICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9pdGVtfkl0ZW18bW9kdWxlOmVuZ2luZS9tb2RlbC9wb3NpdGlvbn5Qb3NpdGlvbn0gaXRlbU9yUG9zaXRpb24KICAgICAqIEBwYXJhbSB7TnVtYmVyfCdlbmQnfCdiZWZvcmUnfCdhZnRlcid9IFtvZmZzZXRdIE9mZnNldCBvciBvbmUgb2YgdGhlIGZsYWdzLiBVc2VkIG9ubHkgd2hlbgogICAgICogZmlyc3QgcGFyYW1ldGVyIGlzIGEge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9pdGVtfkl0ZW0gdmlldyBpdGVtfS4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjcmVhdGVQb3NpdGlvbkF0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQb3NpdGlvbkF0KGl0ZW1PclBvc2l0aW9uLCBvZmZzZXQpIHsKICAgICAgcmV0dXJuIFBvc2l0aW9uLl9jcmVhdGVBdChpdGVtT3JQb3NpdGlvbiwgb2Zmc2V0KTsKICAgIH0KICAgIC8qKgogICAgICogQ3JlYXRlcyBhIG5ldyBwb3NpdGlvbiBhZnRlciBnaXZlbiB2aWV3IGl0ZW0uCiAgICAgKgogICAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvaXRlbX5JdGVtfSBpdGVtIFZpZXcgaXRlbSBhZnRlciB3aGljaCB0aGUgcG9zaXRpb24gc2hvdWxkIGJlIGxvY2F0ZWQuCiAgICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS92aWV3L3Bvc2l0aW9uflBvc2l0aW9ufQogICAgICovCgogIH0sIHsKICAgIGtleTogImNyZWF0ZVBvc2l0aW9uQWZ0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uQWZ0ZXIoaXRlbSkgewogICAgICByZXR1cm4gUG9zaXRpb24uX2NyZWF0ZUFmdGVyKGl0ZW0pOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbmV3IHBvc2l0aW9uIGJlZm9yZSBnaXZlbiB2aWV3IGl0ZW0uCiAgICAgKgogICAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvaXRlbX5JdGVtfSBpdGVtIFZpZXcgaXRlbSBiZWZvcmUgd2hpY2ggdGhlIHBvc2l0aW9uIHNob3VsZCBiZSBsb2NhdGVkLgogICAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbn0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjcmVhdGVQb3NpdGlvbkJlZm9yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25CZWZvcmUoaXRlbSkgewogICAgICByZXR1cm4gUG9zaXRpb24uX2NyZWF0ZUJlZm9yZShpdGVtKTsKICAgIH0KICAgIC8qKgogICAgICogQ3JlYXRlcyBhIHJhbmdlIHNwYW5uaW5nIGZyb20gYHN0YXJ0YCBwb3NpdGlvbiB0byBgZW5kYCBwb3NpdGlvbi4KICAgICAqCiAgICAgKiAqKk5vdGU6KiogVGhpcyBmYWN0b3J5IG1ldGhvZCBjcmVhdGVzIGl0J3Mgb3duIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvcG9zaXRpb25+UG9zaXRpb259IGluc3RhbmNlcyBiYXNpbmcgb24gcGFzc2VkIHZhbHVlcy4KICAgICAqCiAgICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbn0gc3RhcnQgU3RhcnQgcG9zaXRpb24uCiAgICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbn0gW2VuZF0gRW5kIHBvc2l0aW9uLiBJZiBub3Qgc2V0LCByYW5nZSB3aWxsIGJlIGNvbGxhcHNlZCBhdCBgc3RhcnRgIHBvc2l0aW9uLgogICAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvdmlldy9yYW5nZX5SYW5nZX0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjcmVhdGVSYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUmFuZ2Uoc3RhcnQsIGVuZCkgewogICAgICByZXR1cm4gbmV3IFJhbmdlKHN0YXJ0LCBlbmQpOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgcmFuZ2UgdGhhdCBzdGFydHMgYmVmb3JlIGdpdmVuIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvaXRlbX5JdGVtIHZpZXcgaXRlbX0gYW5kIGVuZHMgYWZ0ZXIgaXQuCiAgICAgKgogICAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvaXRlbX5JdGVtfSBpdGVtCiAgICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS92aWV3L3JhbmdlflJhbmdlfQogICAgICovCgogIH0sIHsKICAgIGtleTogImNyZWF0ZVJhbmdlT24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVJhbmdlT24oaXRlbSkgewogICAgICByZXR1cm4gUmFuZ2UuX2NyZWF0ZU9uKGl0ZW0pOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgcmFuZ2UgaW5zaWRlIGFuIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50IGVsZW1lbnR9IHdoaWNoIHN0YXJ0cyBiZWZvcmUgdGhlIGZpcnN0IGNoaWxkIG9mCiAgICAgKiB0aGF0IGVsZW1lbnQgYW5kIGVuZHMgYWZ0ZXIgdGhlIGxhc3QgY2hpbGQgb2YgdGhhdCBlbGVtZW50LgogICAgICoKICAgICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2VsZW1lbnR+RWxlbWVudH0gZWxlbWVudCBFbGVtZW50IHdoaWNoIGlzIGEgcGFyZW50IGZvciB0aGUgcmFuZ2UuCiAgICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS92aWV3L3JhbmdlflJhbmdlfQogICAgICovCgogIH0sIHsKICAgIGtleTogImNyZWF0ZVJhbmdlSW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVJhbmdlSW4oZWxlbWVudCkgewogICAgICByZXR1cm4gUmFuZ2UuX2NyZWF0ZUluKGVsZW1lbnQpOwogICAgfQogICAgLyoqCiAgICAgQ3JlYXRlcyBuZXcge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9zZWxlY3Rpb25+U2VsZWN0aW9ufSBpbnN0YW5jZS4KICAgICAqCiAgICAgKiAJCS8vIENyZWF0ZXMgZW1wdHkgc2VsZWN0aW9uIHdpdGhvdXQgcmFuZ2VzLgogICAgICoJCWNvbnN0IHNlbGVjdGlvbiA9IHZpZXcuY3JlYXRlU2VsZWN0aW9uKCk7CiAgICAgKgogICAgICoJCS8vIENyZWF0ZXMgc2VsZWN0aW9uIGF0IHRoZSBnaXZlbiByYW5nZS4KICAgICAqCQljb25zdCByYW5nZSA9IHZpZXcuY3JlYXRlUmFuZ2UoIHN0YXJ0LCBlbmQgKTsKICAgICAqCQljb25zdCBzZWxlY3Rpb24gPSB2aWV3LmNyZWF0ZVNlbGVjdGlvbiggcmFuZ2UgKTsKICAgICAqCiAgICAgKgkJLy8gQ3JlYXRlcyBzZWxlY3Rpb24gYXQgdGhlIGdpdmVuIHJhbmdlcwogICAgICogCQljb25zdCByYW5nZXMgPSBbIHZpZXcuY3JlYXRlUmFuZ2UoIHN0YXJ0MSwgZW5kMiApLCB2aWV3LmNyZWF0ZVJhbmdlKCBzdGFyMiwgZW5kMiApIF07CiAgICAgKgkJY29uc3Qgc2VsZWN0aW9uID0gdmlldy5jcmVhdGVTZWxlY3Rpb24oIHJhbmdlcyApOwogICAgICoKICAgICAqCQkvLyBDcmVhdGVzIHNlbGVjdGlvbiBmcm9tIHRoZSBvdGhlciBzZWxlY3Rpb24uCiAgICAgKgkJY29uc3Qgb3RoZXJTZWxlY3Rpb24gPSB2aWV3LmNyZWF0ZVNlbGVjdGlvbigpOwogICAgICoJCWNvbnN0IHNlbGVjdGlvbiA9IHZpZXcuY3JlYXRlU2VsZWN0aW9uKCBvdGhlclNlbGVjdGlvbiApOwogICAgICoKICAgICAqCQkvLyBDcmVhdGVzIHNlbGVjdGlvbiBmcm9tIHRoZSBkb2N1bWVudCBzZWxlY3Rpb24uCiAgICAgKgkJY29uc3Qgc2VsZWN0aW9uID0gdmlldy5jcmVhdGVTZWxlY3Rpb24oIGVkaXRvci5lZGl0aW5nLnZpZXcuZG9jdW1lbnQuc2VsZWN0aW9uICk7CiAgICAgKgogICAgICogCQkvLyBDcmVhdGVzIHNlbGVjdGlvbiBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uCiAgICAgKgkJY29uc3QgcG9zaXRpb24gPSB2aWV3LmNyZWF0ZVBvc2l0aW9uRnJvbVBhdGgoIHJvb3QsIHBhdGggKTsKICAgICAqCQljb25zdCBzZWxlY3Rpb24gPSB2aWV3LmNyZWF0ZVNlbGVjdGlvbiggcG9zaXRpb24gKTsKICAgICAqCiAgICAgKgkJLy8gQ3JlYXRlcyBjb2xsYXBzZWQgc2VsZWN0aW9uIGF0IHRoZSBwb3NpdGlvbiBvZiBnaXZlbiBpdGVtIGFuZCBvZmZzZXQuCiAgICAgKgkJY29uc3QgcGFyYWdyYXBoID0gdmlldy5jcmVhdGVDb250YWluZXJFbGVtZW50KCAncGFyYWdyYXBoJyApOwogICAgICoJCWNvbnN0IHNlbGVjdGlvbiA9IHZpZXcuY3JlYXRlU2VsZWN0aW9uKCBwYXJhZ3JhcGgsIG9mZnNldCApOwogICAgICoKICAgICAqCQkvLyBDcmVhdGVzIGEgcmFuZ2UgaW5zaWRlIGFuIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZWxlbWVudH5FbGVtZW50IGVsZW1lbnR9IHdoaWNoIHN0YXJ0cyBiZWZvcmUgdGhlCiAgICAgKgkJLy8gZmlyc3QgY2hpbGQgb2YgdGhhdCBlbGVtZW50IGFuZCBlbmRzIGFmdGVyIHRoZSBsYXN0IGNoaWxkIG9mIHRoYXQgZWxlbWVudC4KICAgICAqCQljb25zdCBzZWxlY3Rpb24gPSB2aWV3LmNyZWF0ZVNlbGVjdGlvbiggcGFyYWdyYXBoLCAnaW4nICk7CiAgICAgKgogICAgICoJCS8vIENyZWF0ZXMgYSByYW5nZSBvbiBhbiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2l0ZW1+SXRlbSBpdGVtfSB3aGljaCBzdGFydHMgYmVmb3JlIHRoZSBpdGVtIGFuZCBlbmRzCiAgICAgKgkJLy8ganVzdCBhZnRlciB0aGUgaXRlbS4KICAgICAqCQljb25zdCBzZWxlY3Rpb24gPSB2aWV3LmNyZWF0ZVNlbGVjdGlvbiggcGFyYWdyYXBoLCAnb24nICk7CiAgICAgKgogICAgICogYFNlbGVjdGlvbmAncyBmYWN0b3J5IG1ldGhvZCBhbGxvdyBwYXNzaW5nIGFkZGl0aW9uYWwgb3B0aW9ucyAoYGJhY2t3YXJkYCwgYGZha2VgIGFuZCBgbGFiZWxgKSBhcyB0aGUgbGFzdCBhcmd1bWVudC4KICAgICAqCiAgICAgKgkJLy8gQ3JlYXRlcyBiYWNrd2FyZCBzZWxlY3Rpb24uCiAgICAgKgkJY29uc3Qgc2VsZWN0aW9uID0gdmlldy5jcmVhdGVTZWxlY3Rpb24oIHJhbmdlLCB7IGJhY2t3YXJkOiB0cnVlIH0gKTsKICAgICAqCiAgICAgKiBGYWtlIHNlbGVjdGlvbiBkb2VzIG5vdCByZW5kZXIgYXMgYnJvd3NlciBuYXRpdmUgc2VsZWN0aW9uIG92ZXIgc2VsZWN0ZWQgZWxlbWVudHMgYW5kIGlzIGhpZGRlbiB0byB0aGUgdXNlci4KICAgICAqIFRoaXMgd2F5LCBubyBuYXRpdmUgc2VsZWN0aW9uIFVJIGFydGlmYWN0cyBhcmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyIGFuZCBzZWxlY3Rpb24gb3ZlciBlbGVtZW50cyBjYW4gYmUKICAgICAqIHJlcHJlc2VudGVkIGluIG90aGVyIHdheSwgZm9yIGV4YW1wbGUgYnkgYXBwbHlpbmcgcHJvcGVyIENTUyBjbGFzcy4KICAgICAqCiAgICAgKiBBZGRpdGlvbmFsbHkgZmFrZSdzIHNlbGVjdGlvbiBsYWJlbCBjYW4gYmUgcHJvdmlkZWQuIEl0IHdpbGwgYmUgdXNlZCB0byBkZXNjcmliZSBmYWtlIHNlbGVjdGlvbiBpbiBET00KICAgICAqIChhbmQgYmUgIHByb3Blcmx5IGhhbmRsZWQgYnkgc2NyZWVuIHJlYWRlcnMpLgogICAgICoKICAgICAqCQkvLyBDcmVhdGVzIGZha2Ugc2VsZWN0aW9uIHdpdGggbGFiZWwuCiAgICAgKgkJY29uc3Qgc2VsZWN0aW9uID0gdmlldy5jcmVhdGVTZWxlY3Rpb24oIHJhbmdlLCB7IGZha2U6IHRydWUsIGxhYmVsOiAnZm9vJyB9ICk7CiAgICAgKgogICAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvc2VsZWN0aW9uflNlbGVjdGFibGV9IFtzZWxlY3RhYmxlPW51bGxdCiAgICAgKiBAcGFyYW0ge051bWJlcnwnYmVmb3JlJ3wnZW5kJ3wnYWZ0ZXInfCdvbid8J2luJ30gW3BsYWNlT3JPZmZzZXRdIE9mZnNldCBvciBwbGFjZSB3aGVuIHNlbGVjdGFibGUgaXMgYW4gYEl0ZW1gLgogICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXQogICAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5iYWNrd2FyZF0gU2V0cyB0aGlzIHNlbGVjdGlvbiBpbnN0YW5jZSB0byBiZSBiYWNrd2FyZC4KICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZmFrZV0gU2V0cyB0aGlzIHNlbGVjdGlvbiBpbnN0YW5jZSB0byBiZSBtYXJrZWQgYXMgYGZha2VgLgogICAgICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLmxhYmVsXSBMYWJlbCBmb3IgdGhlIGZha2Ugc2VsZWN0aW9uLgogICAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvdmlldy9zZWxlY3Rpb25+U2VsZWN0aW9ufQogICAgICovCgogIH0sIHsKICAgIGtleTogImNyZWF0ZVNlbGVjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlU2VsZWN0aW9uKHNlbGVjdGFibGUsIHBsYWNlT3JPZmZzZXQsIG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc2VsZWN0YWJsZSwgcGxhY2VPck9mZnNldCwgb3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIERpc2FibGVzIG9yIGVuYWJsZXMgcmVuZGVyaW5nLiBJZiB0aGUgZmxhZyBpcyBzZXQgdG8gYHRydWVgIHRoZW4gdGhlIHJlbmRlcmluZyB3aWxsIGJlIGRpc2FibGVkLgogICAgICogSWYgdGhlIGZsYWcgaXMgc2V0IHRvIGBmYWxzZWAgYW5kIGlmIHRoZXJlIHdhcyBzb21lIGNoYW5nZSBpbiB0aGUgbWVhbnRpbWUsIHRoZW4gdGhlIHJlbmRlcmluZyBhY3Rpb24gd2lsbCBiZSBwZXJmb3JtZWQuCiAgICAgKgogICAgICogQHByb3RlY3RlZAogICAgICogQHBhcmFtIHtCb29sZWFufSBmbGFnIEEgZmxhZyBpbmRpY2F0ZXMgd2hldGhlciB0aGUgcmVuZGVyaW5nIHNob3VsZCBiZSBkaXNhYmxlZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfZGlzYWJsZVJlbmRlcmluZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2Rpc2FibGVSZW5kZXJpbmcoZmxhZykgewogICAgICB0aGlzLl9yZW5kZXJpbmdEaXNhYmxlZCA9IGZsYWc7CgogICAgICBpZiAoZmxhZyA9PSBmYWxzZSkgewogICAgICAgIC8vIFJlbmRlciB3aGVuIHlvdSBzdG9wIGJsb2NraW5nIHJlbmRlcmluZy4KICAgICAgICB0aGlzLmNoYW5nZShmdW5jdGlvbiAoKSB7fSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVuZGVycyBhbGwgY2hhbmdlcy4gSW4gb3JkZXIgdG8gYXZvaWQgdHJpZ2dlcmluZyB0aGUgb2JzZXJ2ZXJzIChlLmcuIG11dGF0aW9ucykgYWxsIG9ic2VydmVycyBhcmUgZGlzYWJsZWQKICAgICAqIGJlZm9yZSByZW5kZXJpbmcgYW5kIHJlLWVuYWJsZWQgYWZ0ZXIgdGhhdC4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICovCgogIH0sIHsKICAgIGtleTogIl9yZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW5kZXIoKSB7CiAgICAgIHRoaXMuaXNSZW5kZXJpbmdJblByb2dyZXNzID0gdHJ1ZTsKICAgICAgdGhpcy5kaXNhYmxlT2JzZXJ2ZXJzKCk7CgogICAgICB0aGlzLl9yZW5kZXJlci5yZW5kZXIoKTsKCiAgICAgIHRoaXMuZW5hYmxlT2JzZXJ2ZXJzKCk7CiAgICAgIHRoaXMuaXNSZW5kZXJpbmdJblByb2dyZXNzID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIEZpcmVkIGFmdGVyIGEgdG9wbW9zdCB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3ZpZXd+VmlldyNjaGFuZ2UgY2hhbmdlIGJsb2NrfSBhbmQgYWxsCiAgICAgKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2RvY3VtZW50fkRvY3VtZW50I3JlZ2lzdGVyUG9zdEZpeGVyIHBvc3QtZml4ZXJzfSBhcmUgZXhlY3V0ZWQuCiAgICAgKgogICAgICogQWN0dWFsIHJlbmRlcmluZyBpcyBwZXJmb3JtZWQgYXMgYSBmaXJzdCBsaXN0ZW5lciBvbiAnbm9ybWFsJyBwcmlvcml0eS4KICAgICAqCiAgICAgKgkJdmlldy5vbiggJ3JlbmRlcicsICgpID0+IHsKICAgICAqCQkJLy8gUmVuZGVyaW5nIHRvIHRoZSBET00gaXMgY29tcGxldGUuCiAgICAgKgkJfSApOwogICAgICoKICAgICAqIFRoaXMgZXZlbnQgaXMgdXNlZnVsIHdoZW4geW91IHdhbnQgdG8gdXBkYXRlIGludGVyZmFjZSBlbGVtZW50cyBhZnRlciB0aGUgcmVuZGVyaW5nLCBlLmcuIHBvc2l0aW9uIG9mIHRoZQogICAgICogYmFsbG9vbiBwYW5lbC4gSWYgeW91IHdhbnRzIHRvIGNoYW5nZSB2aWV3IHN0cnVjdHVyZSB1c2UKICAgICAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZG9jdW1lbnR+RG9jdW1lbnQjcmVnaXN0ZXJQb3N0Rml4ZXIgcG9zdC1maXhlcnN9LgogICAgICoKICAgICAqIEBldmVudCBtb2R1bGU6ZW5naW5lL3ZpZXcvdmlld35WaWV3I2V2ZW50OnJlbmRlcgogICAgICovCgogIH1dKTsKCiAgcmV0dXJuIFZpZXc7Cn0oKTsKCmV4cG9ydCB7IFZpZXcgYXMgZGVmYXVsdCB9OwptaXgoVmlldywgT2JzZXJ2YWJsZU1peGluKTs="},{"version":3,"sources":["/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/view/view.js"],"names":["Document","DowncastWriter","Renderer","DomConverter","Position","Range","Selection","MutationObserver","KeyObserver","FakeSelectionObserver","SelectionObserver","FocusObserver","CompositionObserver","InputObserver","ArrowKeysObserver","ObservableMixin","mix","scrollViewportToShowTarget","injectUiElementHandling","injectQuirksHandling","CKEditorError","env","View","stylesProcessor","document","domConverter","domRoots","Map","set","_renderer","selection","bind","to","_initialDomRootAttributes","WeakMap","_observers","_ongoingChange","_postFixersInProgress","_renderingDisabled","_hasChangedSinceTheLastRendering","_writer","addObserver","isAndroid","on","_render","fire","listenTo","domRoot","name","viewRoot","getRoot","_name","tagName","toLowerCase","initialDomRootAttributes","Array","from","attributes","value","addClass","split","setAttribute","updateContenteditableAttribute","isReadOnly","removeClass","bindElements","markToSync","domDocuments","add","ownerDocument","evt","node","change","values","observer","observe","get","forEach","removeAttribute","attribute","delete","unbindDomElement","Observer","domElement","enable","disable","range","getFirstRange","target","viewRangeToDom","viewportOffset","isFocused","editable","editableElement","focus","forceRender","callback","isRenderingInProgress","callbackResult","_callPostFixers","err","rethrowUnexpectedError","destroy","stopListening","itemOrPosition","offset","_createAt","item","_createAfter","_createBefore","start","end","_createOn","element","_createIn","selectable","placeOrOffset","options","flag","disableObservers","render","enableObservers"],"mappings":"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sC,MAAhB,EADf;AAAA;;AAAA;AACT,+DAAmD;AAAA,cAAvCC,QAAuC;AAClDA,UAAAA,QAAQ,CAAC4B,OAAT;AACA;AAHQ;AAAA;AAAA;AAAA;AAAA;;AAKT,WAAK9E,QAAL,CAAc8E,OAAd;AAEA,WAAKC,aAAL;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACC,0BAAkBC,cAAlB,EAAkCC,MAAlC,EAA2C;AAC1C,aAAOrG,QAAQ,CAACsG,SAAT,CAAoBF,cAApB,EAAoCC,MAApC,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;;;;WACC,6BAAqBE,IAArB,EAA4B;AAC3B,aAAOvG,QAAQ,CAACwG,YAAT,CAAuBD,IAAvB,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;;;;WACC,8BAAsBA,IAAtB,EAA6B;AAC5B,aAAOvG,QAAQ,CAACyG,aAAT,CAAwBF,IAAxB,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACC,qBAAaG,KAAb,EAAoBC,GAApB,EAA0B;AACzB,aAAO,IAAI1G,KAAJ,CAAWyG,KAAX,EAAkBC,GAAlB,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;;;;WACC,uBAAeJ,IAAf,EAAsB;AACrB,aAAOtG,KAAK,CAAC2G,SAAN,CAAiBL,IAAjB,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;;;;WACC,uBAAeM,OAAf,EAAyB;AACxB,aAAO5G,KAAK,CAAC6G,SAAN,CAAiBD,OAAjB,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACC,yBAAiBE,UAAjB,EAA6BC,aAA7B,EAA4CC,OAA5C,EAAsD;AACrD,aAAO,IAAI/G,SAAJ,CAAe6G,UAAf,EAA2BC,aAA3B,EAA0CC,OAA1C,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;;;;WACC,2BAAmBC,IAAnB,EAA0B;AACzB,WAAKhF,kBAAL,GAA0BgF,IAA1B;;AAEA,UAAKA,IAAI,IAAI,KAAb,EAAqB;AACpB;AACA,aAAK9C,MAAL,CAAa,YAAM,CAAE,CAArB;AACA;AACD;AAED;AACD;AACA;AACA;AACA;AACA;;;;WACC,mBAAU;AACT,WAAKyB,qBAAL,GAA6B,IAA7B;AACA,WAAKsB,gBAAL;;AACA,WAAK1F,SAAL,CAAe2F,MAAf;;AACA,WAAKC,eAAL;AACA,WAAKxB,qBAAL,GAA6B,KAA7B;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;SAxoBqB3E,I;AA2oBrBN,GAAG,CAAEM,IAAF,EAAQP,eAAR,CAAH","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/view\n */\n\nimport Document from './document';\nimport DowncastWriter from './downcastwriter';\nimport Renderer from './renderer';\nimport DomConverter from './domconverter';\nimport Position from './position';\nimport Range from './range';\nimport Selection from './selection';\n\nimport MutationObserver from './observer/mutationobserver';\nimport KeyObserver from './observer/keyobserver';\nimport FakeSelectionObserver from './observer/fakeselectionobserver';\nimport SelectionObserver from './observer/selectionobserver';\nimport FocusObserver from './observer/focusobserver';\nimport CompositionObserver from './observer/compositionobserver';\nimport InputObserver from './observer/inputobserver';\nimport ArrowKeysObserver from './observer/arrowkeysobserver';\n\nimport ObservableMixin from '@ckeditor/ckeditor5-utils/src/observablemixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\nimport { scrollViewportToShowTarget } from '@ckeditor/ckeditor5-utils/src/dom/scroll';\nimport { injectUiElementHandling } from './uielement';\nimport { injectQuirksHandling } from './filler';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * Editor's view controller class. Its main responsibility is DOM - View management for editing purposes, to provide\n * abstraction over the DOM structure and events and hide all browsers quirks.\n *\n * View controller renders view document to DOM whenever view structure changes. To determine when view can be rendered,\n * all changes need to be done using the {@link module:engine/view/view~View#change} method, using\n * {@link module:engine/view/downcastwriter~DowncastWriter}:\n *\n *\t\tview.change( writer => {\n *\t\t\twriter.insert( position, writer.createText( 'foo' ) );\n *\t\t} );\n *\n * View controller also register {@link module:engine/view/observer/observer~Observer observers} which observes changes\n * on DOM and fire events on the {@link module:engine/view/document~Document Document}.\n * Note that the following observers are added by the class constructor and are always available:\n *\n * * {@link module:engine/view/observer/mutationobserver~MutationObserver},\n * * {@link module:engine/view/observer/selectionobserver~SelectionObserver},\n * * {@link module:engine/view/observer/focusobserver~FocusObserver},\n * * {@link module:engine/view/observer/keyobserver~KeyObserver},\n * * {@link module:engine/view/observer/fakeselectionobserver~FakeSelectionObserver}.\n * * {@link module:engine/view/observer/compositionobserver~CompositionObserver}.\n *\n * This class also {@link module:engine/view/view~View#attachDomRoot binds the DOM and the view elements}.\n *\n * If you do not need full a DOM - view management, and only want to transform a tree of view elements to a tree of DOM\n * elements you do not need this controller. You can use the {@link module:engine/view/domconverter~DomConverter DomConverter} instead.\n *\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class View {\n\t/**\n\t * @param {module:engine/view/stylesmap~StylesProcessor} stylesProcessor The styles processor instance.\n\t */\n\tconstructor( stylesProcessor ) {\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/document~Document} associated with this view controller.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/view/document~Document}\n\t\t */\n\t\tthis.document = new Document( stylesProcessor );\n\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/domconverter~DomConverter domConverter} used by\n\t\t * {@link module:engine/view/view~View#_renderer renderer}\n\t\t * and {@link module:engine/view/observer/observer~Observer observers}.\n\t\t *\n\t\t * @readonly\n\t\t * @type {module:engine/view/domconverter~DomConverter}\n\t\t */\n\t\tthis.domConverter = new DomConverter( this.document );\n\n\t\t/**\n\t\t * Roots of the DOM tree. Map on the `HTMLElement`s with roots names as keys.\n\t\t *\n\t\t * @readonly\n\t\t * @type {Map.<String, HTMLElement>}\n\t\t */\n\t\tthis.domRoots = new Map();\n\n\t\t/**\n\t\t * Used to prevent calling {@link #forceRender} and {@link #change} during rendering view to the DOM.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #isRenderingInProgress\n\t\t */\n\t\tthis.set( 'isRenderingInProgress', false );\n\n\t\t/**\n\t\t * Informs whether the DOM selection is inside any of the DOM roots managed by the view.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Boolean} #hasDomSelection\n\t\t */\n\t\tthis.set( 'hasDomSelection', false );\n\n\t\t/**\n\t\t * Instance of the {@link module:engine/view/renderer~Renderer renderer}.\n\t\t *\n\t\t * @protected\n\t\t * @type {module:engine/view/renderer~Renderer}\n\t\t */\n\t\tthis._renderer = new Renderer( this.domConverter, this.document.selection );\n\t\tthis._renderer.bind( 'isFocused' ).to( this.document );\n\n\t\t/**\n\t\t * A DOM root attributes cache. It saves the initial values of DOM root attributes before the DOM element\n\t\t * is {@link module:engine/view/view~View#attachDomRoot attached} to the view so later on, when\n\t\t * the view is destroyed ({@link module:engine/view/view~View#detachDomRoot}), they can be easily restored.\n\t\t * This way, the DOM element can go back to the (clean) state as if the editing view never used it.\n\t\t *\n\t\t * @private\n\t\t * @member {WeakMap.<HTMLElement,Object>}\n\t\t */\n\t\tthis._initialDomRootAttributes = new WeakMap();\n\n\t\t/**\n\t\t * Map of registered {@link module:engine/view/observer/observer~Observer observers}.\n\t\t *\n\t\t * @private\n\t\t * @type {Map.<Function, module:engine/view/observer/observer~Observer>}\n\t\t */\n\t\tthis._observers = new Map();\n\n\t\t/**\n\t\t * Is set to `true` when {@link #change view changes} are currently in progress.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._ongoingChange = false;\n\n\t\t/**\n\t\t * Used to prevent calling {@link #forceRender} and {@link #change} during rendering view to the DOM.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._postFixersInProgress = false;\n\n\t\t/**\n\t\t * Internal flag to temporary disable rendering. See the usage in the {@link #_disableRendering}.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._renderingDisabled = false;\n\n\t\t/**\n\t\t * Internal flag that disables rendering when there are no changes since the last rendering.\n\t\t * It stores information about changed selection and changed elements from attached document roots.\n\t\t *\n\t\t * @private\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._hasChangedSinceTheLastRendering = false;\n\n\t\t/**\n\t\t * DowncastWriter instance used in {@link #change change method} callbacks.\n\t\t *\n\t\t * @private\n\t\t * @type {module:engine/view/downcastwriter~DowncastWriter}\n\t\t */\n\t\tthis._writer = new DowncastWriter( this.document );\n\n\t\t// Add default observers.\n\t\tthis.addObserver( MutationObserver );\n\t\tthis.addObserver( SelectionObserver );\n\t\tthis.addObserver( FocusObserver );\n\t\tthis.addObserver( KeyObserver );\n\t\tthis.addObserver( FakeSelectionObserver );\n\t\tthis.addObserver( CompositionObserver );\n\t\tthis.addObserver( ArrowKeysObserver );\n\n\t\tif ( env.isAndroid ) {\n\t\t\tthis.addObserver( InputObserver );\n\t\t}\n\n\t\t// Inject quirks handlers.\n\t\tinjectQuirksHandling( this );\n\t\tinjectUiElementHandling( this );\n\n\t\t// Use 'normal' priority so that rendering is performed as first when using that priority.\n\t\tthis.on( 'render', () => {\n\t\t\tthis._render();\n\n\t\t\t// Informs that layout has changed after render.\n\t\t\tthis.document.fire( 'layoutChanged' );\n\n\t\t\t// Reset the `_hasChangedSinceTheLastRendering` flag after rendering.\n\t\t\tthis._hasChangedSinceTheLastRendering = false;\n\t\t} );\n\n\t\t// Listen to the document selection changes directly.\n\t\tthis.listenTo( this.document.selection, 'change', () => {\n\t\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\t} );\n\t}\n\n\t/**\n\t * Attaches a DOM root element to the view element and enable all observers on that element.\n\t * Also {@link module:engine/view/renderer~Renderer#markToSync mark element} to be synchronized\n\t * with the view what means that all child nodes will be removed and replaced with content of the view root.\n\t *\n\t * This method also will change view element name as the same as tag name of given dom root.\n\t * Name is always transformed to lower case.\n\t *\n\t * **Note:** Use {@link #detachDomRoot `detachDomRoot()`} to revert this action.\n\t *\n\t * @param {Element} domRoot DOM root element.\n\t * @param {String} [name='main'] Name of the root.\n\t */\n\tattachDomRoot( domRoot, name = 'main' ) {\n\t\tconst viewRoot = this.document.getRoot( name );\n\n\t\t// Set view root name the same as DOM root tag name.\n\t\tviewRoot._name = domRoot.tagName.toLowerCase();\n\n\t\tconst initialDomRootAttributes = {};\n\n\t\t// 1. Copy and cache the attributes to remember the state of the element before attaching.\n\t\t//    The cached attributes will be restored in detachDomRoot() so the element goes to the\n\t\t//    clean state as if the editing view never used it.\n\t\t// 2. Apply the attributes using the view writer, so they all go under the control of the engine.\n\t\t//    The editing view takes over the attribute management completely because various\n\t\t//    features (e.g. addPlaceholder()) require dynamic changes of those attributes and they\n\t\t//    cannot be managed by the engine and the UI library at the same time.\n\t\tfor ( const { name, value } of Array.from( domRoot.attributes ) ) {\n\t\t\tinitialDomRootAttributes[ name ] = value;\n\n\t\t\t// Do not use writer.setAttribute() for the class attribute. The EditableUIView class\n\t\t\t// and its descendants could have already set some using the writer.addClass() on the view\n\t\t\t// document root. They haven't been rendered yet so they are not present in the DOM root.\n\t\t\t// Using writer.setAttribute( 'class', ... ) would override them completely.\n\t\t\tif ( name === 'class' ) {\n\t\t\t\tthis._writer.addClass( value.split( ' ' ), viewRoot );\n\t\t\t} else {\n\t\t\t\tthis._writer.setAttribute( name, value, viewRoot );\n\t\t\t}\n\t\t}\n\n\t\tthis._initialDomRootAttributes.set( domRoot, initialDomRootAttributes );\n\n\t\tconst updateContenteditableAttribute = () => {\n\t\t\tthis._writer.setAttribute( 'contenteditable', !viewRoot.isReadOnly, viewRoot );\n\n\t\t\tif ( viewRoot.isReadOnly ) {\n\t\t\t\tthis._writer.addClass( 'ck-read-only', viewRoot );\n\t\t\t} else {\n\t\t\t\tthis._writer.removeClass( 'ck-read-only', viewRoot );\n\t\t\t}\n\t\t};\n\n\t\t// Set initial value.\n\t\tupdateContenteditableAttribute();\n\n\t\tthis.domRoots.set( name, domRoot );\n\t\tthis.domConverter.bindElements( domRoot, viewRoot );\n\t\tthis._renderer.markToSync( 'children', viewRoot );\n\t\tthis._renderer.markToSync( 'attributes', viewRoot );\n\t\tthis._renderer.domDocuments.add( domRoot.ownerDocument );\n\n\t\tviewRoot.on( 'change:children', ( evt, node ) => this._renderer.markToSync( 'children', node ) );\n\t\tviewRoot.on( 'change:attributes', ( evt, node ) => this._renderer.markToSync( 'attributes', node ) );\n\t\tviewRoot.on( 'change:text', ( evt, node ) => this._renderer.markToSync( 'text', node ) );\n\t\tviewRoot.on( 'change:isReadOnly', () => this.change( updateContenteditableAttribute ) );\n\n\t\tviewRoot.on( 'change', () => {\n\t\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\t} );\n\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.observe( domRoot, name );\n\t\t}\n\t}\n\n\t/**\n\t * Detaches a DOM root element from the view element and restores its attributes to the state before\n\t * {@link #attachDomRoot `attachDomRoot()`}.\n\t *\n\t * @param {String} name Name of the root to detach.\n\t */\n\tdetachDomRoot( name ) {\n\t\tconst domRoot = this.domRoots.get( name );\n\n\t\t// Remove all root attributes so the DOM element is \"bare\".\n\t\tArray.from( domRoot.attributes ).forEach( ( { name } ) => domRoot.removeAttribute( name ) );\n\n\t\tconst initialDomRootAttributes = this._initialDomRootAttributes.get( domRoot );\n\n\t\t// Revert all view root attributes back to the state before attachDomRoot was called.\n\t\tfor ( const attribute in initialDomRootAttributes ) {\n\t\t\tdomRoot.setAttribute( attribute, initialDomRootAttributes[ attribute ] );\n\t\t}\n\n\t\tthis.domRoots.delete( name );\n\t\tthis.domConverter.unbindDomElement( domRoot );\n\t}\n\n\t/**\n\t * Gets DOM root element.\n\t *\n\t * @param {String} [name='main']  Name of the root.\n\t * @returns {Element} DOM root element instance.\n\t */\n\tgetDomRoot( name = 'main' ) {\n\t\treturn this.domRoots.get( name );\n\t}\n\n\t/**\n\t * Creates observer of the given type if not yet created, {@link module:engine/view/observer/observer~Observer#enable enables} it\n\t * and {@link module:engine/view/observer/observer~Observer#observe attaches} to all existing and future\n\t * {@link #domRoots DOM roots}.\n\t *\n\t * Note: Observers are recognized by their constructor (classes). A single observer will be instantiated and used only\n\t * when registered for the first time. This means that features and other components can register a single observer\n\t * multiple times without caring whether it has been already added or not.\n\t *\n\t * @param {Function} Observer The constructor of an observer to add.\n\t * Should create an instance inheriting from {@link module:engine/view/observer/observer~Observer}.\n\t * @returns {module:engine/view/observer/observer~Observer} Added observer instance.\n\t */\n\taddObserver( Observer ) {\n\t\tlet observer = this._observers.get( Observer );\n\n\t\tif ( observer ) {\n\t\t\treturn observer;\n\t\t}\n\n\t\tobserver = new Observer( this );\n\n\t\tthis._observers.set( Observer, observer );\n\n\t\tfor ( const [ name, domElement ] of this.domRoots ) {\n\t\t\tobserver.observe( domElement, name );\n\t\t}\n\n\t\tobserver.enable();\n\n\t\treturn observer;\n\t}\n\n\t/**\n\t * Returns observer of the given type or `undefined` if such observer has not been added yet.\n\t *\n\t * @param {Function} Observer The constructor of an observer to get.\n\t * @returns {module:engine/view/observer/observer~Observer|undefined} Observer instance or undefined.\n\t */\n\tgetObserver( Observer ) {\n\t\treturn this._observers.get( Observer );\n\t}\n\n\t/**\n\t * Disables all added observers.\n\t */\n\tdisableObservers() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.disable();\n\t\t}\n\t}\n\n\t/**\n\t * Enables all added observers.\n\t */\n\tenableObservers() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.enable();\n\t\t}\n\t}\n\n\t/**\n\t * Scrolls the page viewport and {@link #domRoots} with their ancestors to reveal the\n\t * caret, if not already visible to the user.\n\t */\n\tscrollToTheSelection() {\n\t\tconst range = this.document.selection.getFirstRange();\n\n\t\tif ( range ) {\n\t\t\tscrollViewportToShowTarget( {\n\t\t\t\ttarget: this.domConverter.viewRangeToDom( range ),\n\t\t\t\tviewportOffset: 20\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * It will focus DOM element representing {@link module:engine/view/editableelement~EditableElement EditableElement}\n\t * that is currently having selection inside.\n\t */\n\tfocus() {\n\t\tif ( !this.document.isFocused ) {\n\t\t\tconst editable = this.document.selection.editableElement;\n\n\t\t\tif ( editable ) {\n\t\t\t\tthis.domConverter.focus( editable );\n\t\t\t\tthis.forceRender();\n\t\t\t} else {\n\t\t\t\t// Before focusing view document, selection should be placed inside one of the view's editables.\n\t\t\t\t// Normally its selection will be converted from model document (which have default selection), but\n\t\t\t\t// when using view document on its own, we need to manually place selection before focusing it.\n\t\t\t\t//\n\t\t\t\t// @if CK_DEBUG // console.warn( 'There is no selection in any editable to focus.' );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * The `change()` method is the primary way of changing the view. You should use it to modify any node in the view tree.\n\t * It makes sure that after all changes are made the view is rendered to the DOM (assuming that the view will be changed\n\t * inside the callback). It prevents situations when the DOM is updated when the view state is not yet correct. It allows\n\t * to nest calls one inside another and still performs a single rendering after all those changes are made.\n\t * It also returns the return value of its callback.\n\t *\n\t *\t\tconst text = view.change( writer => {\n\t *\t\t\tconst newText = writer.createText( 'foo' );\n\t *\t\t\twriter.insert( position1, newText );\n\t *\n\t *\t\t\tview.change( writer => {\n\t *\t\t\t\twriter.insert( position2, writer.createText( 'bar' ) );\n\t *\t\t\t} );\n\t *\n\t * \t\t\twriter.remove( range );\n\t *\n\t * \t\t\treturn newText;\n\t *\t\t} );\n\t *\n\t * When the outermost change block is done and rendering to the DOM is over the\n\t * {@link module:engine/view/view~View#event:render `View#render`} event is fired.\n\t *\n\t * This method throws a `applying-view-changes-on-rendering` error when\n\t * the change block is used after rendering to the DOM has started.\n\t *\n\t * @param {Function} callback Callback function which may modify the view.\n\t * @returns {*} Value returned by the callback.\n\t */\n\tchange( callback ) {\n\t\tif ( this.isRenderingInProgress || this._postFixersInProgress ) {\n\t\t\t/**\n\t\t\t * Thrown when there is an attempt to make changes to the view tree when it is in incorrect state. This may\n\t\t\t * cause some unexpected behaviour and inconsistency between the DOM and the view.\n\t\t\t * This may be caused by:\n\t\t\t *\n\t\t\t * * calling {@link #change} or {@link #forceRender} during rendering process,\n\t\t\t * * calling {@link #change} or {@link #forceRender} inside of\n\t\t\t *   {@link module:engine/view/document~Document#registerPostFixer post-fixer function}.\n\t\t\t *\n\t\t\t * @error cannot-change-view-tree\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'cannot-change-view-tree',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\ttry {\n\t\t\t// Recursive call to view.change() method - execute listener immediately.\n\t\t\tif ( this._ongoingChange ) {\n\t\t\t\treturn callback( this._writer );\n\t\t\t}\n\n\t\t\t// This lock will assure that all recursive calls to view.change() will end up in same block - one \"render\"\n\t\t\t// event for all nested calls.\n\t\t\tthis._ongoingChange = true;\n\t\t\tconst callbackResult = callback( this._writer );\n\t\t\tthis._ongoingChange = false;\n\n\t\t\t// This lock is used by editing controller to render changes from outer most model.change() once. As plugins might call\n\t\t\t// view.change() inside model.change() block - this will ensures that postfixers and rendering are called once after all\n\t\t\t// changes. Also, we don't need to render anything if there're no changes since last rendering.\n\t\t\tif ( !this._renderingDisabled && this._hasChangedSinceTheLastRendering ) {\n\t\t\t\tthis._postFixersInProgress = true;\n\t\t\t\tthis.document._callPostFixers( this._writer );\n\t\t\t\tthis._postFixersInProgress = false;\n\n\t\t\t\tthis.fire( 'render' );\n\t\t\t}\n\n\t\t\treturn callbackResult;\n\t\t} catch ( err ) {\n\t\t\t// @if CK_DEBUG // throw err;\n\t\t\t/* istanbul ignore next */\n\t\t\tCKEditorError.rethrowUnexpectedError( err, this );\n\t\t}\n\t}\n\n\t/**\n\t * Forces rendering {@link module:engine/view/document~Document view document} to DOM. If any view changes are\n\t * currently in progress, rendering will start after all {@link #change change blocks} are processed.\n\t *\n\t * Note that this method is dedicated for special cases. All view changes should be wrapped in the {@link #change}\n\t * block and the view will automatically check whether it needs to render DOM or not.\n\t *\n\t * Throws {@link module:utils/ckeditorerror~CKEditorError CKEditorError} `applying-view-changes-on-rendering` when\n\t * trying to re-render when rendering to DOM has already started.\n\t */\n\tforceRender() {\n\t\tthis._hasChangedSinceTheLastRendering = true;\n\t\tthis.change( () => {} );\n\t}\n\n\t/**\n\t * Destroys this instance. Makes sure that all observers are destroyed and listeners removed.\n\t */\n\tdestroy() {\n\t\tfor ( const observer of this._observers.values() ) {\n\t\t\tobserver.destroy();\n\t\t}\n\n\t\tthis.document.destroy();\n\n\t\tthis.stopListening();\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link #createPositionBefore},\n\t * * {@link #createPositionAfter},\n\t *\n\t * @param {module:engine/view/item~Item|module:engine/model/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tcreatePositionAt( itemOrPosition, offset ) {\n\t\treturn Position._createAt( itemOrPosition, offset );\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionAfter( item ) {\n\t\treturn Position._createAfter( item );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tcreatePositionBefore( item ) {\n\t\treturn Position._createBefore( item );\n\t}\n\n\t/**\n\t * Creates a range spanning from `start` position to `end` position.\n\t *\n\t * **Note:** This factory method creates it's own {@link module:engine/view/position~Position} instances basing on passed values.\n\t *\n\t * @param {module:engine/view/position~Position} start Start position.\n\t * @param {module:engine/view/position~Position} [end] End position. If not set, range will be collapsed at `start` position.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRange( start, end ) {\n\t\treturn new Range( start, end );\n\t}\n\n\t/**\n\t * Creates a range that starts before given {@link module:engine/view/item~Item view item} and ends after it.\n\t *\n\t * @param {module:engine/view/item~Item} item\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeOn( item ) {\n\t\treturn Range._createOn( item );\n\t}\n\n\t/**\n\t * Creates a range inside an {@link module:engine/view/element~Element element} which starts before the first child of\n\t * that element and ends after the last child of that element.\n\t *\n\t * @param {module:engine/view/element~Element} element Element which is a parent for the range.\n\t * @returns {module:engine/view/range~Range}\n\t */\n\tcreateRangeIn( element ) {\n\t\treturn Range._createIn( element );\n\t}\n\n\t/**\n\t Creates new {@link module:engine/view/selection~Selection} instance.\n\t *\n\t * \t\t// Creates empty selection without ranges.\n\t *\t\tconst selection = view.createSelection();\n\t *\n\t *\t\t// Creates selection at the given range.\n\t *\t\tconst range = view.createRange( start, end );\n\t *\t\tconst selection = view.createSelection( range );\n\t *\n\t *\t\t// Creates selection at the given ranges\n\t * \t\tconst ranges = [ view.createRange( start1, end2 ), view.createRange( star2, end2 ) ];\n\t *\t\tconst selection = view.createSelection( ranges );\n\t *\n\t *\t\t// Creates selection from the other selection.\n\t *\t\tconst otherSelection = view.createSelection();\n\t *\t\tconst selection = view.createSelection( otherSelection );\n\t *\n\t *\t\t// Creates selection from the document selection.\n\t *\t\tconst selection = view.createSelection( editor.editing.view.document.selection );\n\t *\n\t * \t\t// Creates selection at the given position.\n\t *\t\tconst position = view.createPositionFromPath( root, path );\n\t *\t\tconst selection = view.createSelection( position );\n\t *\n\t *\t\t// Creates collapsed selection at the position of given item and offset.\n\t *\t\tconst paragraph = view.createContainerElement( 'paragraph' );\n\t *\t\tconst selection = view.createSelection( paragraph, offset );\n\t *\n\t *\t\t// Creates a range inside an {@link module:engine/view/element~Element element} which starts before the\n\t *\t\t// first child of that element and ends after the last child of that element.\n\t *\t\tconst selection = view.createSelection( paragraph, 'in' );\n\t *\n\t *\t\t// Creates a range on an {@link module:engine/view/item~Item item} which starts before the item and ends\n\t *\t\t// just after the item.\n\t *\t\tconst selection = view.createSelection( paragraph, 'on' );\n\t *\n\t * `Selection`'s factory method allow passing additional options (`backward`, `fake` and `label`) as the last argument.\n\t *\n\t *\t\t// Creates backward selection.\n\t *\t\tconst selection = view.createSelection( range, { backward: true } );\n\t *\n\t * Fake selection does not render as browser native selection over selected elements and is hidden to the user.\n\t * This way, no native selection UI artifacts are displayed to the user and selection over elements can be\n\t * represented in other way, for example by applying proper CSS class.\n\t *\n\t * Additionally fake's selection label can be provided. It will be used to describe fake selection in DOM\n\t * (and be  properly handled by screen readers).\n\t *\n\t *\t\t// Creates fake selection with label.\n\t *\t\tconst selection = view.createSelection( range, { fake: true, label: 'foo' } );\n\t *\n\t * @param {module:engine/view/selection~Selectable} [selectable=null]\n\t * @param {Number|'before'|'end'|'after'|'on'|'in'} [placeOrOffset] Offset or place when selectable is an `Item`.\n\t * @param {Object} [options]\n\t * @param {Boolean} [options.backward] Sets this selection instance to be backward.\n\t * @param {Boolean} [options.fake] Sets this selection instance to be marked as `fake`.\n\t * @param {String} [options.label] Label for the fake selection.\n\t * @returns {module:engine/view/selection~Selection}\n\t */\n\tcreateSelection( selectable, placeOrOffset, options ) {\n\t\treturn new Selection( selectable, placeOrOffset, options );\n\t}\n\n\t/**\n\t * Disables or enables rendering. If the flag is set to `true` then the rendering will be disabled.\n\t * If the flag is set to `false` and if there was some change in the meantime, then the rendering action will be performed.\n\t *\n\t * @protected\n\t * @param {Boolean} flag A flag indicates whether the rendering should be disabled.\n\t */\n\t_disableRendering( flag ) {\n\t\tthis._renderingDisabled = flag;\n\n\t\tif ( flag == false ) {\n\t\t\t// Render when you stop blocking rendering.\n\t\t\tthis.change( () => {} );\n\t\t}\n\t}\n\n\t/**\n\t * Renders all changes. In order to avoid triggering the observers (e.g. mutations) all observers are disabled\n\t * before rendering and re-enabled after that.\n\t *\n\t * @private\n\t */\n\t_render() {\n\t\tthis.isRenderingInProgress = true;\n\t\tthis.disableObservers();\n\t\tthis._renderer.render();\n\t\tthis.enableObservers();\n\t\tthis.isRenderingInProgress = false;\n\t}\n\n\t/**\n\t * Fired after a topmost {@link module:engine/view/view~View#change change block} and all\n\t * {@link module:engine/view/document~Document#registerPostFixer post-fixers} are executed.\n\t *\n\t * Actual rendering is performed as a first listener on 'normal' priority.\n\t *\n\t *\t\tview.on( 'render', () => {\n\t *\t\t\t// Rendering to the DOM is complete.\n\t *\t\t} );\n\t *\n\t * This event is useful when you want to update interface elements after the rendering, e.g. position of the\n\t * balloon panel. If you wants to change view structure use\n\t * {@link module:engine/view/document~Document#registerPostFixer post-fixers}.\n\t *\n\t * @event module:engine/view/view~View#event:render\n\t */\n}\n\nmix( View, ObservableMixin );\n"]}]}