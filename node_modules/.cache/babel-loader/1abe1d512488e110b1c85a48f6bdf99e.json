{"remainingRequest":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js?{}!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-utils/src/dom/position.js","dependencies":[{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-utils/src/dom/position.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvaG9tZS9la2ViZXJhdC9ZYW5kZXguRGlzay9Qcm9qZWxlcmltL0JlbmltUHJvamVsZXJpbS93ZWJzaXRlbS93ZWJzaXRlbS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKCi8qKgogKiBAbGljZW5zZSBDb3B5cmlnaHQgKGMpIDIwMDMtMjAyMSwgQ0tTb3VyY2UgLSBGcmVkZXJpY28gS25hYmJlbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogRm9yIGxpY2Vuc2luZywgc2VlIExJQ0VOU0UubWQgb3IgaHR0cHM6Ly9ja2VkaXRvci5jb20vbGVnYWwvY2tlZGl0b3Itb3NzLWxpY2Vuc2UKICovCgovKioKICogQG1vZHVsZSB1dGlscy9kb20vcG9zaXRpb24KICovCmltcG9ydCBnbG9iYWwgZnJvbSAnLi9nbG9iYWwnOwppbXBvcnQgUmVjdCBmcm9tICcuL3JlY3QnOwppbXBvcnQgZ2V0UG9zaXRpb25lZEFuY2VzdG9yIGZyb20gJy4vZ2V0cG9zaXRpb25lZGFuY2VzdG9yJzsKaW1wb3J0IGdldEJvcmRlcldpZHRocyBmcm9tICcuL2dldGJvcmRlcndpZHRocyc7CmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICdsb2Rhc2gtZXMnOwovKioKICogQ2FsY3VsYXRlcyB0aGUgYHBvc2l0aW9uOiBhYnNvbHV0ZWAgY29vcmRpbmF0ZXMgb2YgYSBnaXZlbiBlbGVtZW50IHNvIGl0IGNhbiBiZSBwb3NpdGlvbmVkIHdpdGggcmVzcGVjdCB0byB0aGUKICogdGFyZ2V0IGluIHRoZSB2aXN1YWxseSBtb3N0IGVmZmljaWVudCB3YXksIHRha2luZyB2YXJpb3VzIHJlc3RyaWN0aW9ucyBsaWtlIHZpZXdwb3J0IG9yIGxpbWl0ZXIgZ2VvbWV0cnkKICogaW50byBjb25zaWRlcmF0aW9uLgogKgogKgkJLy8gVGhlIGVsZW1lbnQgd2hpY2ggaXMgdG8gYmUgcG9zaXRpb25lZC4KICoJCWNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoICcjdG9vbGJhcicgKTsKICoKICoJCS8vIEEgdGFyZ2V0IHRvIHdoaWNoIHRoZSBlbGVtZW50IGlzIHBvc2l0aW9uZWQgcmVsYXRpdmVseS4KICoJCWNvbnN0IHRhcmdldCA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvciggJyNjb250YWluZXInICk7CiAqCiAqCQkvLyBGaW5kaW5nIHRoZSBvcHRpbWFsIGNvb3JkaW5hdGVzIGZvciB0aGUgcG9zaXRpb25pbmcuCiAqCQljb25zdCB7IGxlZnQsIHRvcCwgbmFtZSB9ID0gZ2V0T3B0aW1hbFBvc2l0aW9uKCB7CiAqCQkJZWxlbWVudDogZWxlbWVudCwKICoJCQl0YXJnZXQ6IHRhcmdldCwKICoKICogCQkJLy8gVGhlIGFsZ29yaXRobSB3aWxsIGNob3NlIGFtb25nIHRoZXNlIHBvc2l0aW9ucyB0byBtZWV0IHRoZSByZXF1aXJlbWVudHMgc3VjaAogKiAJCQkvLyBhcyAibGltaXRlciIgZWxlbWVudCBvciAiZml0SW5WaWV3cG9ydCIsIHNldCBiZWxvdy4gVGhlIHBvc2l0aW9ucyBhcmUgY29uc2lkZXJlZAogKiAJCQkvLyBpbiB0aGUgb3JkZXIgb2YgdGhlIGFycmF5LgogKgkJCXBvc2l0aW9uczogWwogKgkJCQkvLwogKgkJCSAJLy8JWyBUYXJnZXQgXQogKgkJCQkvLwkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqCQkJCS8vCXwgICAgIEVsZW1lbnQgICAgIHwKICoJCQkJLy8JKy0tLS0tLS0tLS0tLS0tLS0tKwogKgkJCQkvLwogKgkJCQl0YXJnZXRSZWN0ID0+ICggewogKgkJCQkJdG9wOiB0YXJnZXRSZWN0LmJvdHRvbSwKICoJCQkJCWxlZnQ6IHRhcmdldFJlY3QubGVmdCwKICoJCQkJCW5hbWU6ICdteVNvdXRoRWFzdFBvc2l0aW9uJwogKgkJCQl9ICksCiAqCiAqCQkJCS8vCiAqCQkJCS8vCSstLS0tLS0tLS0tLS0tLS0tLSsKICoJCQkJLy8JfCAgICAgRWxlbWVudCAgICAgfAogKgkJCQkvLwkrLS0tLS0tLS0tLS0tLS0tLS0rCiAqCQkJCS8vCVsgVGFyZ2V0IF0KICoJCQkJLy8KICoJCQkJKCB0YXJnZXRSZWN0LCBlbGVtZW50UmVjdCApID0+ICggewogKgkJCQkJdG9wOiB0YXJnZXRSZWN0LnRvcCAtIGVsZW1lbnRSZWN0LmhlaWdodCwKICoJCQkJCWxlZnQ6IHRhcmdldFJlY3QubGVmdCwKICoJCQkJCW5hbWU6ICdteU5vcnRoRWFzdFBvc2l0aW9uJwogKgkJCQl9ICkKICoJCQldLAogKgogKgkJCS8vIEZpbmQgYSBwb3NpdGlvbiBzdWNoIGd1YXJhbnRlZXMgdGhlIGVsZW1lbnQgcmVtYWlucyB3aXRoaW4gdmlzaWJsZSBib3VuZGFyaWVzIG9mIDxib2R5Pi4KICoJCQlsaW1pdGVyOiBkb2N1bWVudC5ib2R5LAogKgogKgkJCS8vIEZpbmQgYSBwb3NpdGlvbiBzdWNoIGd1YXJhbnRlZXMgdGhlIGVsZW1lbnQgcmVtYWlucyB3aXRoaW4gdmlzaWJsZSBib3VuZGFyaWVzIG9mIHRoZSBicm93c2VyIHZpZXdwb3J0LgogKgkJCWZpdEluVmlld3BvcnQ6IHRydWUKICoJCX0gKTsKICoKICoJCS8vIFRoZSBiZXN0IHBvc2l0aW9uIHdoaWNoIGZpdHMgaW50byBkb2N1bWVudC5ib2R5IGFuZCB0aGUgdmlld3BvcnQuIE1heSBiZSB1c2VmdWwKICoJCS8vIHRvIHNldCBwcm9wZXIgY2xhc3Mgb24gdGhlIGBlbGVtZW50YC4KICoJCWNvbnNvbGUubG9nKCBuYW1lICk7IC8vIC0+ICJteU5vcnRoRWFzdFBvc2l0aW9uIgogKgogKgkJLy8gVXNpbmcgdGhlIGFic29sdXRlIGNvb3JkaW5hdGVzIHdoaWNoIGhhcyBiZWVuIGZvdW5kIHRvIHBvc2l0aW9uIHRoZSBlbGVtZW50CiAqCQkvLyBhcyBpbiB0aGUgZGlhZ3JhbSBkZXBpY3RpbmcgdGhlICJteU5vcnRoRWFzdFBvc2l0aW9uIiBwb3NpdGlvbi4KICoJCWVsZW1lbnQuc3R5bGUudG9wID0gdG9wOwogKgkJZWxlbWVudC5zdHlsZS5sZWZ0ID0gbGVmdDsKICoKICogQHBhcmFtIHttb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9ufk9wdGlvbnN9IG9wdGlvbnMgUG9zaXRpb25pbmcgb3B0aW9ucyBvYmplY3QuCiAqIEByZXR1cm5zIHttb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9uflBvc2l0aW9ufQogKi8KCmV4cG9ydCBmdW5jdGlvbiBnZXRPcHRpbWFsUG9zaXRpb24oX3JlZikgewogIHZhciBlbGVtZW50ID0gX3JlZi5lbGVtZW50LAogICAgICB0YXJnZXQgPSBfcmVmLnRhcmdldCwKICAgICAgcG9zaXRpb25zID0gX3JlZi5wb3NpdGlvbnMsCiAgICAgIGxpbWl0ZXIgPSBfcmVmLmxpbWl0ZXIsCiAgICAgIGZpdEluVmlld3BvcnQgPSBfcmVmLmZpdEluVmlld3BvcnQ7CgogIC8vIElmIHRoZSB7QGxpbmsgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5PcHRpb25zI3RhcmdldH0gaXMgYSBmdW5jdGlvbiwgdXNlIHdoYXQgaXQgcmV0dXJucy4KICAvLyBodHRwczovL2dpdGh1Yi5jb20vY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL2lzc3Vlcy8xNTcKICBpZiAoaXNGdW5jdGlvbih0YXJnZXQpKSB7CiAgICB0YXJnZXQgPSB0YXJnZXQoKTsKICB9IC8vIElmIHRoZSB7QGxpbmsgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5PcHRpb25zI2xpbWl0ZXJ9IGlzIGEgZnVuY3Rpb24sIHVzZSB3aGF0IGl0IHJldHVybnMuCiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS11aS9pc3N1ZXMvMjYwCgoKICBpZiAoaXNGdW5jdGlvbihsaW1pdGVyKSkgewogICAgbGltaXRlciA9IGxpbWl0ZXIoKTsKICB9CgogIHZhciBwb3NpdGlvbmVkRWxlbWVudEFuY2VzdG9yID0gZ2V0UG9zaXRpb25lZEFuY2VzdG9yKGVsZW1lbnQpOwogIHZhciBlbGVtZW50UmVjdCA9IG5ldyBSZWN0KGVsZW1lbnQpOwogIHZhciB0YXJnZXRSZWN0ID0gbmV3IFJlY3QodGFyZ2V0KTsKICB2YXIgYmVzdFBvc2l0aW9uUmVjdDsKICB2YXIgYmVzdFBvc2l0aW9uTmFtZTsgLy8gSWYgdGhlcmUgYXJlIG5vIGxpbWl0cywganVzdCBncmFiIHRoZSB2ZXJ5IGZpcnN0IHBvc2l0aW9uIGFuZCBiZSBkb25lIHdpdGggdGhhdCBkcmFtYS4KCiAgaWYgKCFsaW1pdGVyICYmICFmaXRJblZpZXdwb3J0KSB7CiAgICB2YXIgX2dldFBvc2l0aW9uTmFtZUFuZFJlID0gZ2V0UG9zaXRpb25OYW1lQW5kUmVjdChwb3NpdGlvbnNbMF0sIHRhcmdldFJlY3QsIGVsZW1lbnRSZWN0KTsKCiAgICB2YXIgX2dldFBvc2l0aW9uTmFtZUFuZFJlMiA9IF9zbGljZWRUb0FycmF5KF9nZXRQb3NpdGlvbk5hbWVBbmRSZSwgMik7CgogICAgYmVzdFBvc2l0aW9uTmFtZSA9IF9nZXRQb3NpdGlvbk5hbWVBbmRSZTJbMF07CiAgICBiZXN0UG9zaXRpb25SZWN0ID0gX2dldFBvc2l0aW9uTmFtZUFuZFJlMlsxXTsKICB9IGVsc2UgewogICAgdmFyIGxpbWl0ZXJSZWN0ID0gbGltaXRlciAmJiBuZXcgUmVjdChsaW1pdGVyKS5nZXRWaXNpYmxlKCk7CiAgICB2YXIgdmlld3BvcnRSZWN0ID0gZml0SW5WaWV3cG9ydCAmJiBuZXcgUmVjdChnbG9iYWwud2luZG93KTsKICAgIHZhciBiZXN0UG9zaXRpb24gPSBnZXRCZXN0UG9zaXRpb25OYW1lQW5kUmVjdChwb3NpdGlvbnMsIHsKICAgICAgdGFyZ2V0UmVjdDogdGFyZ2V0UmVjdCwKICAgICAgZWxlbWVudFJlY3Q6IGVsZW1lbnRSZWN0LAogICAgICBsaW1pdGVyUmVjdDogbGltaXRlclJlY3QsCiAgICAgIHZpZXdwb3J0UmVjdDogdmlld3BvcnRSZWN0CiAgICB9KTsgLy8gSWYgdGhlcmUncyBubyBiZXN0IHBvc2l0aW9uIGZvdW5kLCBpLmUuIHdoZW4gYWxsIGludGVyc2VjdGlvbnMgaGF2ZSBubyBhcmVhIGJlY2F1c2UKICAgIC8vIHJlY3RzIGhhdmUgbm8gd2lkdGggb3IgaGVpZ2h0LCB0aGVuIGp1c3QgdXNlIHRoZSBmaXJzdCBhdmFpbGFibGUgcG9zaXRpb24uCgogICAgdmFyIF9yZWYyID0gYmVzdFBvc2l0aW9uIHx8IGdldFBvc2l0aW9uTmFtZUFuZFJlY3QocG9zaXRpb25zWzBdLCB0YXJnZXRSZWN0LCBlbGVtZW50UmVjdCk7CgogICAgdmFyIF9yZWYzID0gX3NsaWNlZFRvQXJyYXkoX3JlZjIsIDIpOwoKICAgIGJlc3RQb3NpdGlvbk5hbWUgPSBfcmVmM1swXTsKICAgIGJlc3RQb3NpdGlvblJlY3QgPSBfcmVmM1sxXTsKICB9CgogIHZhciBhYnNvbHV0ZVJlY3RDb29yZGluYXRlcyA9IGdldEFic29sdXRlUmVjdENvb3JkaW5hdGVzKGJlc3RQb3NpdGlvblJlY3QpOwoKICBpZiAocG9zaXRpb25lZEVsZW1lbnRBbmNlc3RvcikgewogICAgYWJzb2x1dGVSZWN0Q29vcmRpbmF0ZXMgPSBzaGlmdFJlY3RDb29yZGluYXRlc0R1ZVRvUG9zaXRpb25lZEFuY2VzdG9yKGFic29sdXRlUmVjdENvb3JkaW5hdGVzLCBwb3NpdGlvbmVkRWxlbWVudEFuY2VzdG9yKTsKICB9CgogIHJldHVybiB7CiAgICBsZWZ0OiBhYnNvbHV0ZVJlY3RDb29yZGluYXRlcy5sZWZ0LAogICAgdG9wOiBhYnNvbHV0ZVJlY3RDb29yZGluYXRlcy50b3AsCiAgICBuYW1lOiBiZXN0UG9zaXRpb25OYW1lCiAgfTsKfSAvLyBGb3IgZ2l2ZW4gcG9zaXRpb24gZnVuY3Rpb24sIHJldHVybnMgYSBjb3JyZXNwb25kaW5nIGBSZWN0YCBpbnN0YW5jZS4KLy8KLy8gQHByaXZhdGUKLy8gQHBhcmFtIHtGdW5jdGlvbn0gcG9zaXRpb24gQSBmdW5jdGlvbiByZXR1cm5pbmcge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+UG9zaXRpb259LgovLyBAcGFyYW0ge3V0aWxzL2RvbS9yZWN0flJlY3R9IHRhcmdldFJlY3QgQSByZWN0IG9mIHRoZSB0YXJnZXQuCi8vIEBwYXJhbSB7dXRpbHMvZG9tL3JlY3R+UmVjdH0gZWxlbWVudFJlY3QgQSByZWN0IG9mIHBvc2l0aW9uZWQgZWxlbWVudC4KLy8gQHJldHVybnMge0FycmF5fG51bGx9IEFuIGFycmF5IGNvbnRhaW5pbmcgcG9zaXRpb24gbmFtZSBhbmQgaXRzIFJlY3QgKG9yIG51bGwgaWYgcG9zaXRpb24gc2hvdWxkIGJlIGlnbm9yZWQpLgoKZnVuY3Rpb24gZ2V0UG9zaXRpb25OYW1lQW5kUmVjdChwb3NpdGlvbiwgdGFyZ2V0UmVjdCwgZWxlbWVudFJlY3QpIHsKICB2YXIgcG9zaXRpb25EYXRhID0gcG9zaXRpb24odGFyZ2V0UmVjdCwgZWxlbWVudFJlY3QpOwoKICBpZiAoIXBvc2l0aW9uRGF0YSkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgbGVmdCA9IHBvc2l0aW9uRGF0YS5sZWZ0LAogICAgICB0b3AgPSBwb3NpdGlvbkRhdGEudG9wLAogICAgICBuYW1lID0gcG9zaXRpb25EYXRhLm5hbWU7CiAgcmV0dXJuIFtuYW1lLCBlbGVtZW50UmVjdC5jbG9uZSgpLm1vdmVUbyhsZWZ0LCB0b3ApXTsKfSAvLyBGb3IgYSBnaXZlbiBhcnJheSBvZiBwb3NpdGlvbmluZyBmdW5jdGlvbnMsIHJldHVybnMgc3VjaCB0aGF0IHByb3ZpZGVzIHRoZSBiZXN0Ci8vIGZpdCBvZiB0aGUgYGVsZW1lbnRSZWN0YCBpbnRvIHRoZSBgbGltaXRlclJlY3RgIGFuZCBgdmlld3BvcnRSZWN0YC4KLy8KLy8gQHByaXZhdGUKLy8KLy8gQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKLy8gQHBhcmFtIHttb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9ufk9wdGlvbnMjcG9zaXRpb25zfSBwb3NpdGlvbnMgRnVuY3Rpb25zIHJldHVybmluZyB7QGxpbmsgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5Qb3NpdGlvbn0KLy8gdG8gYmUgY2hlY2tlZCwgaW4gdGhlIG9yZGVyIG9mIHByZWZlcmVuY2UuCi8vIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zCi8vIEBwYXJhbSB7dXRpbHMvZG9tL3JlY3R+UmVjdH0gb3B0aW9ucy50YXJnZXRSZWN0IEEgcmVjdCBvZiB0aGUge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucyN0YXJnZXR9LgovLyBAcGFyYW0ge3V0aWxzL2RvbS9yZWN0flJlY3R9IG9wdGlvbnMuZWxlbWVudFJlY3QgQSByZWN0IG9mIHBvc2l0aW9uZWQge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucyNlbGVtZW50fS4KLy8gQHBhcmFtIHt1dGlscy9kb20vcmVjdH5SZWN0fSBvcHRpb25zLmxpbWl0ZXJSZWN0IEEgcmVjdCBvZiB0aGUge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucyNsaW1pdGVyfS4KLy8gQHBhcmFtIHt1dGlscy9kb20vcmVjdH5SZWN0fSBvcHRpb25zLnZpZXdwb3J0UmVjdCBBIHJlY3Qgb2YgdGhlIHZpZXdwb3J0LgovLwovLyBAcmV0dXJucyB7QXJyYXl9IEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG5hbWUgb2YgdGhlIHBvc2l0aW9uIGFuZCBpdCdzIHJlY3QuCgoKZnVuY3Rpb24gZ2V0QmVzdFBvc2l0aW9uTmFtZUFuZFJlY3QocG9zaXRpb25zLCBvcHRpb25zKSB7CiAgdmFyIGVsZW1lbnRSZWN0ID0gb3B0aW9ucy5lbGVtZW50UmVjdCwKICAgICAgdmlld3BvcnRSZWN0ID0gb3B0aW9ucy52aWV3cG9ydFJlY3Q7IC8vIFRoaXMgaXMgd2hlbiBlbGVtZW50IGlzIGZ1bGx5IHZpc2libGUuCgogIHZhciBlbGVtZW50UmVjdEFyZWEgPSBlbGVtZW50UmVjdC5nZXRBcmVhKCk7IC8vIExldCdzIGNhbGN1bGF0ZSBpbnRlcnNlY3Rpb24gYXJlYXMgZm9yIHBvc2l0aW9ucy4gSXQgd2lsbCBlbmQgZWFybHkgaWYgYmVzdCBtYXRjaCBpcyBmb3VuZC4KCiAgdmFyIHByb2Nlc3NlZFBvc2l0aW9ucyA9IHByb2Nlc3NQb3NpdGlvbnNUb0FyZWFzKHBvc2l0aW9ucywgb3B0aW9ucyk7IC8vIEZpcnN0IGxldCdzIGNoZWNrIGFsbCBwb3NpdGlvbnMgdGhhdCBmdWxseSBmaXQgaW4gdGhlIHZpZXdwb3J0LgoKICBpZiAodmlld3BvcnRSZWN0KSB7CiAgICB2YXIgcHJvY2Vzc2VkUG9zaXRpb25zSW5WaWV3cG9ydCA9IHByb2Nlc3NlZFBvc2l0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgIHZhciB2aWV3cG9ydEludGVyc2VjdEFyZWEgPSBfcmVmNC52aWV3cG9ydEludGVyc2VjdEFyZWE7CiAgICAgIHJldHVybiB2aWV3cG9ydEludGVyc2VjdEFyZWEgPT09IGVsZW1lbnRSZWN0QXJlYTsKICAgIH0pOyAvLyBUcnkgdG8gZmluZCBiZXN0IHBvc2l0aW9uIGZyb20gdGhvc2Ugd2hpY2ggZml0IGNvbXBsZXRlbHkgaW4gdmlld3BvcnQuCgogICAgdmFyIGJlc3RQb3NpdGlvbkRhdGEgPSBnZXRCZXN0T2ZQcm9jZXNzZWRQb3NpdGlvbnMocHJvY2Vzc2VkUG9zaXRpb25zSW5WaWV3cG9ydCwgZWxlbWVudFJlY3RBcmVhKTsKCiAgICBpZiAoYmVzdFBvc2l0aW9uRGF0YSkgewogICAgICByZXR1cm4gYmVzdFBvc2l0aW9uRGF0YTsKICAgIH0KICB9IC8vIEVpdGhlciB0aGVyZSBpcyBubyB2aWV3cG9ydFJlY3Qgb3IgdGhlcmUgaXMgbm8gcG9zaXRpb24gdGhhdCBmaXRzIGNvbXBsZXRlbHkgaW4gdGhlIHZpZXdwb3J0LgoKCiAgcmV0dXJuIGdldEJlc3RPZlByb2Nlc3NlZFBvc2l0aW9ucyhwcm9jZXNzZWRQb3NpdGlvbnMsIGVsZW1lbnRSZWN0QXJlYSk7Cn0gLy8gRm9yIGEgZ2l2ZW4gYXJyYXkgb2YgcG9zaXRpb25pbmcgZnVuY3Rpb25zLCBjYWxjdWxhdGVzIGludGVyc2VjdGlvbiBhcmVhcyBmb3IgdGhlbS4KLy8KLy8gTm90ZTogSWYgc29tZSBwb3NpdGlvbiBmdWxseSBmaXRzIGludG8gdGhlIGBsaW1pdGVyUmVjdGAsIGl0IHdpbGwgYmUgcmV0dXJuZWQgZWFybHksIHdpdGhvdXQgZnVydGhlciBjb25zaWRlcmF0aW9uCi8vIG9mIG90aGVyIHBvc2l0aW9ucy4KLy8KLy8gQHByaXZhdGUKLy8KLy8gQHBhcmFtIHttb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9ufk9wdGlvbnMjcG9zaXRpb25zfSBwb3NpdGlvbnMgRnVuY3Rpb25zIHJldHVybmluZyB7QGxpbmsgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5Qb3NpdGlvbn0KLy8gdG8gYmUgY2hlY2tlZCwgaW4gdGhlIG9yZGVyIG9mIHByZWZlcmVuY2UuCi8vIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zCi8vIEBwYXJhbSB7dXRpbHMvZG9tL3JlY3R+UmVjdH0gb3B0aW9ucy50YXJnZXRSZWN0IEEgcmVjdCBvZiB0aGUge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucyN0YXJnZXR9LgovLyBAcGFyYW0ge3V0aWxzL2RvbS9yZWN0flJlY3R9IG9wdGlvbnMuZWxlbWVudFJlY3QgQSByZWN0IG9mIHBvc2l0aW9uZWQge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucyNlbGVtZW50fS4KLy8gQHBhcmFtIHt1dGlscy9kb20vcmVjdH5SZWN0fSBvcHRpb25zLmxpbWl0ZXJSZWN0IEEgcmVjdCBvZiB0aGUge0BsaW5rIG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+T3B0aW9ucyNsaW1pdGVyfS4KLy8gQHBhcmFtIHt1dGlscy9kb20vcmVjdH5SZWN0fSBvcHRpb25zLnZpZXdwb3J0UmVjdCBBIHJlY3Qgb2YgdGhlIHZpZXdwb3J0LgovLwovLyBAcmV0dXJucyB7QXJyYXkuPE9iamVjdD59IEFycmF5IG9mIHBvc2l0aW9ucyB3aXRoIGNhbGN1bGF0ZWQgaW50ZXJzZWN0aW9uIGFyZWFzLiBFYWNoIGl0ZW0gaXMgYW4gb2JqZWN0IGNvbnRhaW5pbmc6Ci8vICoge1N0cmluZ30gcG9zaXRpb25OYW1lIE5hbWUgb2YgcG9zaXRpb24uCi8vICoge3V0aWxzL2RvbS9yZWN0flJlY3R9IHBvc2l0aW9uUmVjdCBSZWN0IG9mIHBvc2l0aW9uLgovLyAqIHtOdW1iZXJ9IGxpbWl0ZXJJbnRlcnNlY3RBcmVhIEFyZWEgb2YgaW50ZXJzZWN0aW9uIG9mIHRoZSBwb3NpdGlvbiB3aXRoIGxpbWl0ZXIgcGFydCB0aGF0IGlzIGluIHRoZSB2aWV3cG9ydC4KLy8gKiB7TnVtYmVyfSB2aWV3cG9ydEludGVyc2VjdEFyZWEgQXJlYSBvZiBpbnRlcnNlY3Rpb24gb2YgdGhlIHBvc2l0aW9uIHdpdGggdmlld3BvcnQuCgoKZnVuY3Rpb24gcHJvY2Vzc1Bvc2l0aW9uc1RvQXJlYXMocG9zaXRpb25zLCBfcmVmNSkgewogIHZhciB0YXJnZXRSZWN0ID0gX3JlZjUudGFyZ2V0UmVjdCwKICAgICAgZWxlbWVudFJlY3QgPSBfcmVmNS5lbGVtZW50UmVjdCwKICAgICAgbGltaXRlclJlY3QgPSBfcmVmNS5saW1pdGVyUmVjdCwKICAgICAgdmlld3BvcnRSZWN0ID0gX3JlZjUudmlld3BvcnRSZWN0OwogIHZhciBwcm9jZXNzZWRQb3NpdGlvbnMgPSBbXTsgLy8gVGhpcyBpcyB3aGVuIGVsZW1lbnQgaXMgZnVsbHkgdmlzaWJsZS4KCiAgdmFyIGVsZW1lbnRSZWN0QXJlYSA9IGVsZW1lbnRSZWN0LmdldEFyZWEoKTsKCiAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHBvc2l0aW9ucyksCiAgICAgIF9zdGVwOwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgdmFyIHBvc2l0aW9uID0gX3N0ZXAudmFsdWU7CiAgICAgIHZhciBwb3NpdGlvbkRhdGEgPSBnZXRQb3NpdGlvbk5hbWVBbmRSZWN0KHBvc2l0aW9uLCB0YXJnZXRSZWN0LCBlbGVtZW50UmVjdCk7CgogICAgICBpZiAoIXBvc2l0aW9uRGF0YSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICB2YXIgX3Bvc2l0aW9uRGF0YSA9IF9zbGljZWRUb0FycmF5KHBvc2l0aW9uRGF0YSwgMiksCiAgICAgICAgICBwb3NpdGlvbk5hbWUgPSBfcG9zaXRpb25EYXRhWzBdLAogICAgICAgICAgcG9zaXRpb25SZWN0ID0gX3Bvc2l0aW9uRGF0YVsxXTsKCiAgICAgIHZhciBsaW1pdGVySW50ZXJzZWN0QXJlYSA9IDA7CiAgICAgIHZhciB2aWV3cG9ydEludGVyc2VjdEFyZWEgPSAwOwoKICAgICAgaWYgKGxpbWl0ZXJSZWN0KSB7CiAgICAgICAgaWYgKHZpZXdwb3J0UmVjdCkgewogICAgICAgICAgLy8gQ29uc2lkZXIgb25seSB0aGUgcGFydCBvZiB0aGUgbGltaXRlciB3aGljaCBpcyB2aXNpYmxlIGluIHRoZSB2aWV3cG9ydC4gU28gdGhlIGxpbWl0ZXIgaXMgZ2V0dGluZyBsaW1pdGVkLgogICAgICAgICAgdmFyIGxpbWl0ZXJWaWV3cG9ydEludGVyc2VjdFJlY3QgPSBsaW1pdGVyUmVjdC5nZXRJbnRlcnNlY3Rpb24odmlld3BvcnRSZWN0KTsKCiAgICAgICAgICBpZiAobGltaXRlclZpZXdwb3J0SW50ZXJzZWN0UmVjdCkgewogICAgICAgICAgICAvLyBJZiB0aGUgbGltaXRlciBpcyB3aXRoaW4gdGhlIHZpZXdwb3J0LCB0aGVuIGNoZWNrIHRoZSBpbnRlcnNlY3Rpb24gYmV0d2VlbiB0aGF0IHBhcnQgb2YgdGhlCiAgICAgICAgICAgIC8vIGxpbWl0ZXIgYW5kIGFjdHVhbCBwb3NpdGlvbi4KICAgICAgICAgICAgbGltaXRlckludGVyc2VjdEFyZWEgPSBsaW1pdGVyVmlld3BvcnRJbnRlcnNlY3RSZWN0LmdldEludGVyc2VjdGlvbkFyZWEocG9zaXRpb25SZWN0KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGltaXRlckludGVyc2VjdEFyZWEgPSBsaW1pdGVyUmVjdC5nZXRJbnRlcnNlY3Rpb25BcmVhKHBvc2l0aW9uUmVjdCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodmlld3BvcnRSZWN0KSB7CiAgICAgICAgdmlld3BvcnRJbnRlcnNlY3RBcmVhID0gdmlld3BvcnRSZWN0LmdldEludGVyc2VjdGlvbkFyZWEocG9zaXRpb25SZWN0KTsKICAgICAgfQoKICAgICAgdmFyIHByb2Nlc3NlZFBvc2l0aW9uID0gewogICAgICAgIHBvc2l0aW9uTmFtZTogcG9zaXRpb25OYW1lLAogICAgICAgIHBvc2l0aW9uUmVjdDogcG9zaXRpb25SZWN0LAogICAgICAgIGxpbWl0ZXJJbnRlcnNlY3RBcmVhOiBsaW1pdGVySW50ZXJzZWN0QXJlYSwKICAgICAgICB2aWV3cG9ydEludGVyc2VjdEFyZWE6IHZpZXdwb3J0SW50ZXJzZWN0QXJlYQogICAgICB9OyAvLyBJZiBhIHN1Y2ggcG9zaXRpb24gaXMgZm91bmQgdGhhdCBlbGVtZW50IGlzIGZ1bGx5IGNvbnRhaW5lZCBieSB0aGUgbGltaXRlciB0aGVuLCBvYnZpb3VzbHksCiAgICAgIC8vIHRoZXJlIHdpbGwgYmUgbm8gYmV0dGVyIG9uZSwgc28gZmluaXNoaW5nLgoKICAgICAgaWYgKGxpbWl0ZXJJbnRlcnNlY3RBcmVhID09PSBlbGVtZW50UmVjdEFyZWEpIHsKICAgICAgICByZXR1cm4gW3Byb2Nlc3NlZFBvc2l0aW9uXTsKICAgICAgfQoKICAgICAgcHJvY2Vzc2VkUG9zaXRpb25zLnB1c2gocHJvY2Vzc2VkUG9zaXRpb24pOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yLmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yLmYoKTsKICB9CgogIHJldHVybiBwcm9jZXNzZWRQb3NpdGlvbnM7Cn0gLy8gRm9yIGEgZ2l2ZW4gYXJyYXkgb2YgcHJvY2Vzc2VkIHBvc2l0aW9uIGRhdGEgKHdpdGggY2FsY3VsYXRlZCBSZWN0cyBmb3IgcG9zaXRpb25zIGFuZCBpbnRlcnNlY3Rpb24gYXJlYXMpCi8vIHJldHVybnMgc3VjaCB0aGF0IHByb3ZpZGVzIHRoZSBiZXN0IGZpdCBvZiB0aGUgYGVsZW1lbnRSZWN0YCBpbnRvIHRoZSBgbGltaXRlclJlY3RgIGFuZCBgdmlld3BvcnRSZWN0YCBhdCB0aGUgc2FtZSB0aW1lLgovLwovLyAqKk5vdGUqKjogSXQgd2lsbCByZXR1cm4gZWFybHkgaWYgc29tZSBwb3NpdGlvbiBmdWxseSBmaXRzIGludG8gdGhlIGBsaW1pdGVyUmVjdGAuCi8vCi8vIEBwcml2YXRlCi8vIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IEFycmF5IG9mIHBvc2l0aW9ucyB3aXRoIGNhbGN1bGF0ZWQgaW50ZXJzZWN0aW9uIGFyZWFzIChpbiBvcmRlciBvZiBwcmVmZXJlbmNlKS4KLy8gRWFjaCBpdGVtIGlzIGFuIG9iamVjdCBjb250YWluaW5nOgovLwovLwkqIHtTdHJpbmd9IHBvc2l0aW9uTmFtZSBOYW1lIG9mIHBvc2l0aW9uLgovLwkqIHt1dGlscy9kb20vcmVjdH5SZWN0fSBwb3NpdGlvblJlY3QgUmVjdCBvZiBwb3NpdGlvbi4KLy8JKiB7TnVtYmVyfSBsaW1pdGVySW50ZXJzZWN0QXJlYSBBcmVhIG9mIGludGVyc2VjdGlvbiBvZiB0aGUgcG9zaXRpb24gd2l0aCBsaW1pdGVyIHBhcnQgdGhhdCBpcyBpbiB0aGUgdmlld3BvcnQuCi8vCSoge051bWJlcn0gdmlld3BvcnRJbnRlcnNlY3RBcmVhIEFyZWEgb2YgaW50ZXJzZWN0aW9uIG9mIHRoZSBwb3NpdGlvbiB3aXRoIHZpZXdwb3J0LgovLwovLyBAcGFyYW0ge051bWJlcn0gZWxlbWVudFJlY3RBcmVhIEFyZWEgb2YgcG9zaXRpb25lZCB7QGxpbmsgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5PcHRpb25zI2VsZW1lbnR9LgovLyBAcmV0dXJucyB7QXJyYXl8bnVsbH0gQW4gYXJyYXkgY29udGFpbmluZyB0aGUgbmFtZSBvZiB0aGUgcG9zaXRpb24gYW5kIGl0J3MgcmVjdCwgb3IgbnVsbCBpZiBub3QgZm91bmQuCgoKZnVuY3Rpb24gZ2V0QmVzdE9mUHJvY2Vzc2VkUG9zaXRpb25zKHByb2Nlc3NlZFBvc2l0aW9ucywgZWxlbWVudFJlY3RBcmVhKSB7CiAgdmFyIG1heEZpdEZhY3RvciA9IDA7CiAgdmFyIGJlc3RQb3NpdGlvblJlY3Q7CiAgdmFyIGJlc3RQb3NpdGlvbk5hbWU7CgogIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocHJvY2Vzc2VkUG9zaXRpb25zKSwKICAgICAgX3N0ZXAyOwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgdmFyIF9zdGVwMiR2YWx1ZSA9IF9zdGVwMi52YWx1ZSwKICAgICAgICAgIHBvc2l0aW9uTmFtZSA9IF9zdGVwMiR2YWx1ZS5wb3NpdGlvbk5hbWUsCiAgICAgICAgICBwb3NpdGlvblJlY3QgPSBfc3RlcDIkdmFsdWUucG9zaXRpb25SZWN0LAogICAgICAgICAgbGltaXRlckludGVyc2VjdEFyZWEgPSBfc3RlcDIkdmFsdWUubGltaXRlckludGVyc2VjdEFyZWEsCiAgICAgICAgICB2aWV3cG9ydEludGVyc2VjdEFyZWEgPSBfc3RlcDIkdmFsdWUudmlld3BvcnRJbnRlcnNlY3RBcmVhOwoKICAgICAgLy8gSWYgYSBzdWNoIHBvc2l0aW9uIGlzIGZvdW5kIHRoYXQgZWxlbWVudCBpcyBmdWxseSBjb250YWluZXIgYnkgdGhlIGxpbWl0ZXIgdGhlbiwgb2J2aW91c2x5LAogICAgICAvLyB0aGVyZSB3aWxsIGJlIG5vIGJldHRlciBvbmUsIHNvIGZpbmlzaGluZy4KICAgICAgaWYgKGxpbWl0ZXJJbnRlcnNlY3RBcmVhID09PSBlbGVtZW50UmVjdEFyZWEpIHsKICAgICAgICByZXR1cm4gW3Bvc2l0aW9uTmFtZSwgcG9zaXRpb25SZWN0XTsKICAgICAgfSAvLyBUbyBtYXhpbWl6ZSBib3RoIHZpZXdwb3J0IGFuZCBsaW1pdGVyIGludGVyc2VjdGlvbiBhcmVhcyB3ZSB1c2UgZGlzdGFuY2Ugb24gdmlld3BvcnRJbnRlcnNlY3RBcmVhCiAgICAgIC8vIGFuZCBsaW1pdGVySW50ZXJzZWN0QXJlYSBwbGFuZSAod2l0aG91dCBzcXJ0IGJlY2F1c2Ugd2UgYXJlIGxvb2tpbmcgZm9yIG1heCB2YWx1ZSkuCgoKICAgICAgdmFyIGZpdEZhY3RvciA9IE1hdGgucG93KHZpZXdwb3J0SW50ZXJzZWN0QXJlYSwgMikgKyBNYXRoLnBvdyhsaW1pdGVySW50ZXJzZWN0QXJlYSwgMik7CgogICAgICBpZiAoZml0RmFjdG9yID4gbWF4Rml0RmFjdG9yKSB7CiAgICAgICAgbWF4Rml0RmFjdG9yID0gZml0RmFjdG9yOwogICAgICAgIGJlc3RQb3NpdGlvblJlY3QgPSBwb3NpdGlvblJlY3Q7CiAgICAgICAgYmVzdFBvc2l0aW9uTmFtZSA9IHBvc2l0aW9uTmFtZTsKICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjIuZigpOwogIH0KCiAgcmV0dXJuIGJlc3RQb3NpdGlvblJlY3QgPyBbYmVzdFBvc2l0aW9uTmFtZSwgYmVzdFBvc2l0aW9uUmVjdF0gOiBudWxsOwp9IC8vIEZvciBhIGdpdmVuIGFic29sdXRlIFJlY3QgY29vcmRpbmF0ZXMgb2JqZWN0IGFuZCBhIHBvc2l0aW9uZWQgZWxlbWVudCBhbmNlc3RvciwgaXQgcmV0dXJucyBhbiBvYmplY3Qgd2l0aAovLyBuZXcgUmVjdCBjb29yZGluYXRlcyB0aGF0IG1ha2UgdXAgZm9yIHRoZSBwb3NpdGlvbiBhbmQgdGhlIHNjcm9sbCBvZiB0aGUgYW5jZXN0b3IuCi8vCi8vIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2hpbGUgUmVjdHMgKGFuZCBET01SZWN0cykgYXJlIHJlbGF0aXZlIHRvIHRoZSBicm93c2VyJ3Mgdmlld3BvcnQsIHRoZWlyIGNvb3JkaW5hdGVzCi8vIGFyZSB1c2VkIGluIHJlYWzigJNsaWZlIHRvIHBvc2l0aW9uIGVsZW1lbnRzIHdpdGggYHBvc2l0aW9uOiBhYnNvbHV0ZWAsIHdoaWNoIGFyZSBzY29wZWQgYnkgYW55IHBvc2l0aW9uZWQKLy8gKGFuZCBzY3JvbGxhYmxlKSBhbmNlc3RvcnMuCi8vCi8vIEBwcml2YXRlCi8vCi8vIEBwYXJhbSB7T2JqZWN0fSBhYnNvbHV0ZVJlY3RDb29yZGluYXRlcyBBbiBvYmplY3Qgd2l0aCBhYnNvbHV0ZSByZWN0IGNvb3JkaW5hdGVzLgovLyBAcGFyYW0ge09iamVjdH0gYWJzb2x1dGVSZWN0Q29vcmRpbmF0ZXMudG9wCi8vIEBwYXJhbSB7T2JqZWN0fSBhYnNvbHV0ZVJlY3RDb29yZGluYXRlcy5sZWZ0Ci8vIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBvc2l0aW9uZWRFbGVtZW50QW5jZXN0b3IgQW4gYW5jZXN0b3IgZWxlbWVudCB0aGF0IHNob3VsZCBiZSBjb25zaWRlcmVkLgovLwovLyBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3QgY29ycmVzcG9uZGluZyB0byBgYWJzb2x1dGVSZWN0Q29vcmRpbmF0ZXNgIGlucHV0IGJ1dCB3aXRoIHZhbHVlcyBzaGlmdGVkCi8vIHRvIG1ha2UgdXAgZm9yIHRoZSBwb3NpdGlvbmVkIGVsZW1lbnQgYW5jZXN0b3IuCgoKZnVuY3Rpb24gc2hpZnRSZWN0Q29vcmRpbmF0ZXNEdWVUb1Bvc2l0aW9uZWRBbmNlc3RvcihfcmVmNiwgcG9zaXRpb25lZEVsZW1lbnRBbmNlc3RvcikgewogIHZhciBsZWZ0ID0gX3JlZjYubGVmdCwKICAgICAgdG9wID0gX3JlZjYudG9wOwogIHZhciBhbmNlc3RvclBvc2l0aW9uID0gZ2V0QWJzb2x1dGVSZWN0Q29vcmRpbmF0ZXMobmV3IFJlY3QocG9zaXRpb25lZEVsZW1lbnRBbmNlc3RvcikpOwogIHZhciBhbmNlc3RvckJvcmRlcldpZHRocyA9IGdldEJvcmRlcldpZHRocyhwb3NpdGlvbmVkRWxlbWVudEFuY2VzdG9yKTsgLy8gKGh0dHBzOi8vZ2l0aHViLmNvbS9ja2VkaXRvci9ja2VkaXRvcjUtdWktZGVmYXVsdC9pc3N1ZXMvMTI2KQogIC8vIElmIHRoZXJlJ3Mgc29tZSBwb3NpdGlvbmVkIGFuY2VzdG9yIG9mIHRoZSBwYW5lbCwgdGhlbiBpdHMgYFJlY3RgIG11c3QgYmUgdGFrZW4gaW50bwogIC8vIGNvbnNpZGVyYXRpb24uIGBSZWN0YCBpcyBhbHdheXMgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IHdoaWxlIGBwb3NpdGlvbjogYWJzb2x1dGVgIHdvcmtzCiAgLy8gd2l0aCByZXNwZWN0IHRvIHRoYXQgcG9zaXRpb25lZCBhbmNlc3Rvci4KCiAgbGVmdCAtPSBhbmNlc3RvclBvc2l0aW9uLmxlZnQ7CiAgdG9wIC09IGFuY2VzdG9yUG9zaXRpb24udG9wOyAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9pc3N1ZXMvMTM5KQogIC8vIElmIHRoZXJlJ3Mgc29tZSBwb3NpdGlvbmVkIGFuY2VzdG9yIG9mIHRoZSBwYW5lbCwgbm90IG9ubHkgaXRzIHBvc2l0aW9uIG11c3QgYmUgdGFrZW4gaW50bwogIC8vIGNvbnNpZGVyYXRpb24gKHNlZSBhYm92ZSkgYnV0IGFsc28gaXRzIGludGVybmFsIHNjcm9sbHMuIFNjcm9sbCBoYXZlIGFuIGltcGFjdCBoZXJlIGJlY2F1c2UgYFJlY3RgCiAgLy8gaXMgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IChpdCBkb2Vzbid0IGNhcmUgYWJvdXQgc2Nyb2xsaW5nKSwgd2hpbGUgYHBvc2l0aW9uOiBhYnNvbHV0ZWAKICAvLyBtdXN0IGNvbXBlbnNhdGUgdGhhdCBzY3JvbGxpbmcuCgogIGxlZnQgKz0gcG9zaXRpb25lZEVsZW1lbnRBbmNlc3Rvci5zY3JvbGxMZWZ0OwogIHRvcCArPSBwb3NpdGlvbmVkRWxlbWVudEFuY2VzdG9yLnNjcm9sbFRvcDsgLy8gKGh0dHBzOi8vZ2l0aHViLmNvbS9ja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvaXNzdWVzLzEzOSkKICAvLyBJZiB0aGVyZSdzIHNvbWUgcG9zaXRpb25lZCBhbmNlc3RvciBvZiB0aGUgcGFuZWwsIHRoZW4gaXRzIGBSZWN0YCBpbmNsdWRlcyBpdHMgQ1NTIGBib3JkZXJXaWR0aGAKICAvLyB3aGlsZSBgcG9zaXRpb246IGFic29sdXRlYCBwb3NpdGlvbmluZyBkb2VzIG5vdCBjb25zaWRlciBpdC4KICAvLyBFLmcuIGB7IHBvc2l0aW9uOiBhYnNvbHV0ZSwgdG9wOiAwLCBsZWZ0OiAwIH1gIG1lYW5zIHVwcGVyIGxlZnQgY29ybmVyIG9mIHRoZSBlbGVtZW50LAogIC8vIG5vdCB1cHBlci1sZWZ0IGNvcm5lciBvZiBpdHMgYm9yZGVyLgoKICBsZWZ0IC09IGFuY2VzdG9yQm9yZGVyV2lkdGhzLmxlZnQ7CiAgdG9wIC09IGFuY2VzdG9yQm9yZGVyV2lkdGhzLnRvcDsKICByZXR1cm4gewogICAgbGVmdDogbGVmdCwKICAgIHRvcDogdG9wCiAgfTsKfSAvLyBET01SZWN0IChhbHNvIFJlY3QpIHdvcmtzIGluIGEgc2Nyb2xs4oCTaW5kZXBlbmRlbnQgZ2VvbWV0cnkgYnV0IGBwb3NpdGlvbjogYWJzb2x1dGVgIGRvZXNuJ3QuCi8vIFRoaXMgZnVuY3Rpb24gY29udmVydHMgUmVjdCB0byBgcG9zaXRpb246IGFic29sdXRlYCBjb29yZGluYXRlcy4KLy8KLy8gQHByaXZhdGUKLy8gQHBhcmFtIHt1dGlscy9kb20vcmVjdH5SZWN0fSByZWN0IEEgcmVjdCB0byBiZSBjb252ZXJ0ZWQuCi8vIEByZXR1cm5zIHtPYmplY3R9IE9iamVjdCBjb250YWluaW5nIGBsZWZ0YCBhbmQgYHRvcGAgcHJvcGVydGllcywgaW4gYWJzb2x1dGUgY29vcmRpbmF0ZXMuCgoKZnVuY3Rpb24gZ2V0QWJzb2x1dGVSZWN0Q29vcmRpbmF0ZXMoX3JlZjcpIHsKICB2YXIgbGVmdCA9IF9yZWY3LmxlZnQsCiAgICAgIHRvcCA9IF9yZWY3LnRvcDsKICB2YXIgX2dsb2JhbCR3aW5kb3cgPSBnbG9iYWwud2luZG93LAogICAgICBzY3JvbGxYID0gX2dsb2JhbCR3aW5kb3cuc2Nyb2xsWCwKICAgICAgc2Nyb2xsWSA9IF9nbG9iYWwkd2luZG93LnNjcm9sbFk7CiAgcmV0dXJuIHsKICAgIGxlZnQ6IGxlZnQgKyBzY3JvbGxYLAogICAgdG9wOiB0b3AgKyBzY3JvbGxZCiAgfTsKfQovKioKICogVGhlIGBnZXRPcHRpbWFsUG9zaXRpb24oKWAgaGVscGVyIG9wdGlvbnMuCiAqCiAqIEBpbnRlcmZhY2UgbW9kdWxlOnV0aWxzL2RvbS9wb3NpdGlvbn5PcHRpb25zCiAqLwoKLyoqCiAqIEVsZW1lbnQgdGhhdCBpcyB0byBiZSBwb3NpdGlvbmVkLgogKgogKiBAbWVtYmVyIHtIVE1MRWxlbWVudH0gI2VsZW1lbnQKICovCgovKioKICogVGFyZ2V0IHdpdGggcmVzcGVjdCB0byB3aGljaCB0aGUgYGVsZW1lbnRgIGlzIHRvIGJlIHBvc2l0aW9uZWQuCiAqCiAqIEBtZW1iZXIge0hUTUxFbGVtZW50fFJhbmdlfENsaWVudFJlY3R8UmVjdHxGdW5jdGlvbn0gI3RhcmdldAogKi8KCi8qKgogKiBBbiBhcnJheSBvZiBmdW5jdGlvbnMgd2hpY2ggcmV0dXJuIHtAbGluayBtb2R1bGU6dXRpbHMvZG9tL3Bvc2l0aW9uflBvc2l0aW9ufSByZWxhdGl2ZQogKiB0byB0aGUgYHRhcmdldGAsIGluIHRoZSBvcmRlciBvZiBwcmVmZXJlbmNlLgogKgogKiAqKk5vdGUqKjogSWYgYSBmdW5jdGlvbiByZXR1cm5zIGBudWxsYCwgaXQgaXMgaWdub3JlZCBieSB0aGUgYGdldE9wdGltYWxQb3NpdGlvbigpYC4KICoKICogQG1lbWJlciB7QXJyYXkuPEZ1bmN0aW9uPn0gI3Bvc2l0aW9ucwogKi8KCi8qKgogKiBXaGVuIHNldCwgdGhlIGFsZ29yaXRobSB3aWxsIGNob3NlIHBvc2l0aW9uIHdoaWNoIGZpdHMgdGhlIG1vc3QgaW4gdGhlCiAqIGxpbWl0ZXIncyBib3VuZGluZyByZWN0LgogKgogKiBAbWVtYmVyIHtIVE1MRWxlbWVudHxSYW5nZXxDbGllbnRSZWN0fFJlY3R8RnVuY3Rpb259ICNsaW1pdGVyCiAqLwoKLyoqCiAqIFdoZW4gc2V0LCB0aGUgYWxnb3JpdGhtIHdpbGwgY2hvc2Ugc3VjaCBhIHBvc2l0aW9uIHdoaWNoIGZpdHMgYGVsZW1lbnRgCiAqIHRoZSBtb3N0IGluc2lkZSB2aXNpYmxlIHZpZXdwb3J0LgogKgogKiBAbWVtYmVyIHtCb29sZWFufSAjZml0SW5WaWV3cG9ydAogKi8KCi8qKgogKiBBbiBvYmplY3QgZGVzY3JpYmluZyBhIHBvc2l0aW9uIGluIGBwb3NpdGlvbjogYWJzb2x1dGVgIGNvb3JkaW5hdGUKICogc3lzdGVtLCBhbG9uZyB3aXRoIHBvc2l0aW9uIG5hbWUuCiAqCiAqIEB0eXBlZGVmIHtPYmplY3R9IG1vZHVsZTp1dGlscy9kb20vcG9zaXRpb25+UG9zaXRpb24KICoKICogQHByb3BlcnR5IHtOdW1iZXJ9IHRvcCBUb3AgcG9zaXRpb24gb2Zmc2V0LgogKiBAcHJvcGVydHkge051bWJlcn0gbGVmdCBMZWZ0IHBvc2l0aW9uIG9mZnNldC4KICogQHByb3BlcnR5IHtTdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgcG9zaXRpb24uCiAqLw=="},{"version":3,"sources":["/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-utils/src/dom/position.js"],"names":["global","Rect","getPositionedAncestor","getBorderWidths","isFunction","getOptimalPosition","element","target","positions","limiter","fitInViewport","positionedElementAncestor","elementRect","targetRect","bestPositionRect","bestPositionName","getPositionNameAndRect","limiterRect","getVisible","viewportRect","window","bestPosition","getBestPositionNameAndRect","absoluteRectCoordinates","getAbsoluteRectCoordinates","shiftRectCoordinatesDueToPositionedAncestor","left","top","name","position","positionData","clone","moveTo","options","elementRectArea","getArea","processedPositions","processPositionsToAreas","processedPositionsInViewport","filter","viewportIntersectArea","bestPositionData","getBestOfProcessedPositions","positionName","positionRect","limiterIntersectArea","limiterViewportIntersectRect","getIntersection","getIntersectionArea","processedPosition","push","maxFitFactor","fitFactor","ancestorPosition","ancestorBorderWidths","scrollLeft","scrollTop","scrollX","scrollY"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module utils/dom/position\n */\n\nimport global from './global';\nimport Rect from './rect';\nimport getPositionedAncestor from './getpositionedancestor';\nimport getBorderWidths from './getborderwidths';\nimport { isFunction } from 'lodash-es';\n\n/**\n * Calculates the `position: absolute` coordinates of a given element so it can be positioned with respect to the\n * target in the visually most efficient way, taking various restrictions like viewport or limiter geometry\n * into consideration.\n *\n *\t\t// The element which is to be positioned.\n *\t\tconst element = document.body.querySelector( '#toolbar' );\n *\n *\t\t// A target to which the element is positioned relatively.\n *\t\tconst target = document.body.querySelector( '#container' );\n *\n *\t\t// Finding the optimal coordinates for the positioning.\n *\t\tconst { left, top, name } = getOptimalPosition( {\n *\t\t\telement: element,\n *\t\t\ttarget: target,\n *\n * \t\t\t// The algorithm will chose among these positions to meet the requirements such\n * \t\t\t// as \"limiter\" element or \"fitInViewport\", set below. The positions are considered\n * \t\t\t// in the order of the array.\n *\t\t\tpositions: [\n *\t\t\t\t//\n *\t\t\t \t//\t[ Target ]\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t|     Element     |\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\n *\t\t\t\ttargetRect => ( {\n *\t\t\t\t\ttop: targetRect.bottom,\n *\t\t\t\t\tleft: targetRect.left,\n *\t\t\t\t\tname: 'mySouthEastPosition'\n *\t\t\t\t} ),\n *\n *\t\t\t\t//\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t|     Element     |\n *\t\t\t\t//\t+-----------------+\n *\t\t\t\t//\t[ Target ]\n *\t\t\t\t//\n *\t\t\t\t( targetRect, elementRect ) => ( {\n *\t\t\t\t\ttop: targetRect.top - elementRect.height,\n *\t\t\t\t\tleft: targetRect.left,\n *\t\t\t\t\tname: 'myNorthEastPosition'\n *\t\t\t\t} )\n *\t\t\t],\n *\n *\t\t\t// Find a position such guarantees the element remains within visible boundaries of <body>.\n *\t\t\tlimiter: document.body,\n *\n *\t\t\t// Find a position such guarantees the element remains within visible boundaries of the browser viewport.\n *\t\t\tfitInViewport: true\n *\t\t} );\n *\n *\t\t// The best position which fits into document.body and the viewport. May be useful\n *\t\t// to set proper class on the `element`.\n *\t\tconsole.log( name ); // -> \"myNorthEastPosition\"\n *\n *\t\t// Using the absolute coordinates which has been found to position the element\n *\t\t// as in the diagram depicting the \"myNorthEastPosition\" position.\n *\t\telement.style.top = top;\n *\t\telement.style.left = left;\n *\n * @param {module:utils/dom/position~Options} options Positioning options object.\n * @returns {module:utils/dom/position~Position}\n */\nexport function getOptimalPosition( { element, target, positions, limiter, fitInViewport } ) {\n\t// If the {@link module:utils/dom/position~Options#target} is a function, use what it returns.\n\t// https://github.com/ckeditor/ckeditor5-utils/issues/157\n\tif ( isFunction( target ) ) {\n\t\ttarget = target();\n\t}\n\n\t// If the {@link module:utils/dom/position~Options#limiter} is a function, use what it returns.\n\t// https://github.com/ckeditor/ckeditor5-ui/issues/260\n\tif ( isFunction( limiter ) ) {\n\t\tlimiter = limiter();\n\t}\n\n\tconst positionedElementAncestor = getPositionedAncestor( element );\n\tconst elementRect = new Rect( element );\n\tconst targetRect = new Rect( target );\n\n\tlet bestPositionRect;\n\tlet bestPositionName;\n\n\t// If there are no limits, just grab the very first position and be done with that drama.\n\tif ( !limiter && !fitInViewport ) {\n\t\t[ bestPositionName, bestPositionRect ] = getPositionNameAndRect( positions[ 0 ], targetRect, elementRect );\n\t} else {\n\t\tconst limiterRect = limiter && new Rect( limiter ).getVisible();\n\t\tconst viewportRect = fitInViewport && new Rect( global.window );\n\t\tconst bestPosition = getBestPositionNameAndRect( positions, { targetRect, elementRect, limiterRect, viewportRect } );\n\n\t\t// If there's no best position found, i.e. when all intersections have no area because\n\t\t// rects have no width or height, then just use the first available position.\n\t\t[ bestPositionName, bestPositionRect ] = bestPosition || getPositionNameAndRect( positions[ 0 ], targetRect, elementRect );\n\t}\n\n\tlet absoluteRectCoordinates = getAbsoluteRectCoordinates( bestPositionRect );\n\n\tif ( positionedElementAncestor ) {\n\t\tabsoluteRectCoordinates = shiftRectCoordinatesDueToPositionedAncestor( absoluteRectCoordinates, positionedElementAncestor );\n\t}\n\n\treturn {\n\t\tleft: absoluteRectCoordinates.left,\n\t\ttop: absoluteRectCoordinates.top,\n\t\tname: bestPositionName\n\t};\n}\n\n// For given position function, returns a corresponding `Rect` instance.\n//\n// @private\n// @param {Function} position A function returning {@link module:utils/dom/position~Position}.\n// @param {utils/dom/rect~Rect} targetRect A rect of the target.\n// @param {utils/dom/rect~Rect} elementRect A rect of positioned element.\n// @returns {Array|null} An array containing position name and its Rect (or null if position should be ignored).\nfunction getPositionNameAndRect( position, targetRect, elementRect ) {\n\tconst positionData = position( targetRect, elementRect );\n\n\tif ( !positionData ) {\n\t\treturn null;\n\t}\n\n\tconst { left, top, name } = positionData;\n\n\treturn [ name, elementRect.clone().moveTo( left, top ) ];\n}\n\n// For a given array of positioning functions, returns such that provides the best\n// fit of the `elementRect` into the `limiterRect` and `viewportRect`.\n//\n// @private\n//\n// @param {Object} options\n// @param {module:utils/dom/position~Options#positions} positions Functions returning {@link module:utils/dom/position~Position}\n// to be checked, in the order of preference.\n// @param {Object} options\n// @param {utils/dom/rect~Rect} options.targetRect A rect of the {@link module:utils/dom/position~Options#target}.\n// @param {utils/dom/rect~Rect} options.elementRect A rect of positioned {@link module:utils/dom/position~Options#element}.\n// @param {utils/dom/rect~Rect} options.limiterRect A rect of the {@link module:utils/dom/position~Options#limiter}.\n// @param {utils/dom/rect~Rect} options.viewportRect A rect of the viewport.\n//\n// @returns {Array} An array containing the name of the position and it's rect.\nfunction getBestPositionNameAndRect( positions, options ) {\n\tconst { elementRect, viewportRect } = options;\n\n\t// This is when element is fully visible.\n\tconst elementRectArea = elementRect.getArea();\n\n\t// Let's calculate intersection areas for positions. It will end early if best match is found.\n\tconst processedPositions = processPositionsToAreas( positions, options );\n\n\t// First let's check all positions that fully fit in the viewport.\n\tif ( viewportRect ) {\n\t\tconst processedPositionsInViewport = processedPositions.filter( ( { viewportIntersectArea } ) => {\n\t\t\treturn viewportIntersectArea === elementRectArea;\n\t\t} );\n\n\t\t// Try to find best position from those which fit completely in viewport.\n\t\tconst bestPositionData = getBestOfProcessedPositions( processedPositionsInViewport, elementRectArea );\n\n\t\tif ( bestPositionData ) {\n\t\t\treturn bestPositionData;\n\t\t}\n\t}\n\n\t// Either there is no viewportRect or there is no position that fits completely in the viewport.\n\treturn getBestOfProcessedPositions( processedPositions, elementRectArea );\n}\n\n// For a given array of positioning functions, calculates intersection areas for them.\n//\n// Note: If some position fully fits into the `limiterRect`, it will be returned early, without further consideration\n// of other positions.\n//\n// @private\n//\n// @param {module:utils/dom/position~Options#positions} positions Functions returning {@link module:utils/dom/position~Position}\n// to be checked, in the order of preference.\n// @param {Object} options\n// @param {utils/dom/rect~Rect} options.targetRect A rect of the {@link module:utils/dom/position~Options#target}.\n// @param {utils/dom/rect~Rect} options.elementRect A rect of positioned {@link module:utils/dom/position~Options#element}.\n// @param {utils/dom/rect~Rect} options.limiterRect A rect of the {@link module:utils/dom/position~Options#limiter}.\n// @param {utils/dom/rect~Rect} options.viewportRect A rect of the viewport.\n//\n// @returns {Array.<Object>} Array of positions with calculated intersection areas. Each item is an object containing:\n// * {String} positionName Name of position.\n// * {utils/dom/rect~Rect} positionRect Rect of position.\n// * {Number} limiterIntersectArea Area of intersection of the position with limiter part that is in the viewport.\n// * {Number} viewportIntersectArea Area of intersection of the position with viewport.\nfunction processPositionsToAreas( positions, { targetRect, elementRect, limiterRect, viewportRect } ) {\n\tconst processedPositions = [];\n\n\t// This is when element is fully visible.\n\tconst elementRectArea = elementRect.getArea();\n\n\tfor ( const position of positions ) {\n\t\tconst positionData = getPositionNameAndRect( position, targetRect, elementRect );\n\n\t\tif ( !positionData ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst [ positionName, positionRect ] = positionData;\n\t\tlet limiterIntersectArea = 0;\n\t\tlet viewportIntersectArea = 0;\n\n\t\tif ( limiterRect ) {\n\t\t\tif ( viewportRect ) {\n\t\t\t\t// Consider only the part of the limiter which is visible in the viewport. So the limiter is getting limited.\n\t\t\t\tconst limiterViewportIntersectRect = limiterRect.getIntersection( viewportRect );\n\n\t\t\t\tif ( limiterViewportIntersectRect ) {\n\t\t\t\t\t// If the limiter is within the viewport, then check the intersection between that part of the\n\t\t\t\t\t// limiter and actual position.\n\t\t\t\t\tlimiterIntersectArea = limiterViewportIntersectRect.getIntersectionArea( positionRect );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlimiterIntersectArea = limiterRect.getIntersectionArea( positionRect );\n\t\t\t}\n\t\t}\n\n\t\tif ( viewportRect ) {\n\t\t\tviewportIntersectArea = viewportRect.getIntersectionArea( positionRect );\n\t\t}\n\n\t\tconst processedPosition = {\n\t\t\tpositionName,\n\t\t\tpositionRect,\n\t\t\tlimiterIntersectArea,\n\t\t\tviewportIntersectArea\n\t\t};\n\n\t\t// If a such position is found that element is fully contained by the limiter then, obviously,\n\t\t// there will be no better one, so finishing.\n\t\tif ( limiterIntersectArea === elementRectArea ) {\n\t\t\treturn [ processedPosition ];\n\t\t}\n\n\t\tprocessedPositions.push( processedPosition );\n\t}\n\n\treturn processedPositions;\n}\n\n// For a given array of processed position data (with calculated Rects for positions and intersection areas)\n// returns such that provides the best fit of the `elementRect` into the `limiterRect` and `viewportRect` at the same time.\n//\n// **Note**: It will return early if some position fully fits into the `limiterRect`.\n//\n// @private\n// @param {Array.<Object>} Array of positions with calculated intersection areas (in order of preference).\n// Each item is an object containing:\n//\n//\t* {String} positionName Name of position.\n//\t* {utils/dom/rect~Rect} positionRect Rect of position.\n//\t* {Number} limiterIntersectArea Area of intersection of the position with limiter part that is in the viewport.\n//\t* {Number} viewportIntersectArea Area of intersection of the position with viewport.\n//\n// @param {Number} elementRectArea Area of positioned {@link module:utils/dom/position~Options#element}.\n// @returns {Array|null} An array containing the name of the position and it's rect, or null if not found.\nfunction getBestOfProcessedPositions( processedPositions, elementRectArea ) {\n\tlet maxFitFactor = 0;\n\tlet bestPositionRect;\n\tlet bestPositionName;\n\n\tfor ( const { positionName, positionRect, limiterIntersectArea, viewportIntersectArea } of processedPositions ) {\n\t\t// If a such position is found that element is fully container by the limiter then, obviously,\n\t\t// there will be no better one, so finishing.\n\t\tif ( limiterIntersectArea === elementRectArea ) {\n\t\t\treturn [ positionName, positionRect ];\n\t\t}\n\n\t\t// To maximize both viewport and limiter intersection areas we use distance on viewportIntersectArea\n\t\t// and limiterIntersectArea plane (without sqrt because we are looking for max value).\n\t\tconst fitFactor = viewportIntersectArea ** 2 + limiterIntersectArea ** 2;\n\n\t\tif ( fitFactor > maxFitFactor ) {\n\t\t\tmaxFitFactor = fitFactor;\n\t\t\tbestPositionRect = positionRect;\n\t\t\tbestPositionName = positionName;\n\t\t}\n\t}\n\n\treturn bestPositionRect ? [ bestPositionName, bestPositionRect ] : null;\n}\n\n// For a given absolute Rect coordinates object and a positioned element ancestor, it returns an object with\n// new Rect coordinates that make up for the position and the scroll of the ancestor.\n//\n// This is necessary because while Rects (and DOMRects) are relative to the browser's viewport, their coordinates\n// are used in real–life to position elements with `position: absolute`, which are scoped by any positioned\n// (and scrollable) ancestors.\n//\n// @private\n//\n// @param {Object} absoluteRectCoordinates An object with absolute rect coordinates.\n// @param {Object} absoluteRectCoordinates.top\n// @param {Object} absoluteRectCoordinates.left\n// @param {HTMLElement} positionedElementAncestor An ancestor element that should be considered.\n//\n// @returns {Object} An object corresponding to `absoluteRectCoordinates` input but with values shifted\n// to make up for the positioned element ancestor.\nfunction shiftRectCoordinatesDueToPositionedAncestor( { left, top }, positionedElementAncestor ) {\n\tconst ancestorPosition = getAbsoluteRectCoordinates( new Rect( positionedElementAncestor ) );\n\tconst ancestorBorderWidths = getBorderWidths( positionedElementAncestor );\n\n\t// (https://github.com/ckeditor/ckeditor5-ui-default/issues/126)\n\t// If there's some positioned ancestor of the panel, then its `Rect` must be taken into\n\t// consideration. `Rect` is always relative to the viewport while `position: absolute` works\n\t// with respect to that positioned ancestor.\n\tleft -= ancestorPosition.left;\n\ttop -= ancestorPosition.top;\n\n\t// (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t// If there's some positioned ancestor of the panel, not only its position must be taken into\n\t// consideration (see above) but also its internal scrolls. Scroll have an impact here because `Rect`\n\t// is relative to the viewport (it doesn't care about scrolling), while `position: absolute`\n\t// must compensate that scrolling.\n\tleft += positionedElementAncestor.scrollLeft;\n\ttop += positionedElementAncestor.scrollTop;\n\n\t// (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t// If there's some positioned ancestor of the panel, then its `Rect` includes its CSS `borderWidth`\n\t// while `position: absolute` positioning does not consider it.\n\t// E.g. `{ position: absolute, top: 0, left: 0 }` means upper left corner of the element,\n\t// not upper-left corner of its border.\n\tleft -= ancestorBorderWidths.left;\n\ttop -= ancestorBorderWidths.top;\n\n\treturn { left, top };\n}\n\n// DOMRect (also Rect) works in a scroll–independent geometry but `position: absolute` doesn't.\n// This function converts Rect to `position: absolute` coordinates.\n//\n// @private\n// @param {utils/dom/rect~Rect} rect A rect to be converted.\n// @returns {Object} Object containing `left` and `top` properties, in absolute coordinates.\nfunction getAbsoluteRectCoordinates( { left, top } ) {\n\tconst { scrollX, scrollY } = global.window;\n\n\treturn {\n\t\tleft: left + scrollX,\n\t\ttop: top + scrollY\n\t};\n}\n\n/**\n * The `getOptimalPosition()` helper options.\n *\n * @interface module:utils/dom/position~Options\n */\n\n/**\n * Element that is to be positioned.\n *\n * @member {HTMLElement} #element\n */\n\n/**\n * Target with respect to which the `element` is to be positioned.\n *\n * @member {HTMLElement|Range|ClientRect|Rect|Function} #target\n */\n\n/**\n * An array of functions which return {@link module:utils/dom/position~Position} relative\n * to the `target`, in the order of preference.\n *\n * **Note**: If a function returns `null`, it is ignored by the `getOptimalPosition()`.\n *\n * @member {Array.<Function>} #positions\n */\n\n/**\n * When set, the algorithm will chose position which fits the most in the\n * limiter's bounding rect.\n *\n * @member {HTMLElement|Range|ClientRect|Rect|Function} #limiter\n */\n\n/**\n * When set, the algorithm will chose such a position which fits `element`\n * the most inside visible viewport.\n *\n * @member {Boolean} #fitInViewport\n */\n\n/**\n * An object describing a position in `position: absolute` coordinate\n * system, along with position name.\n *\n * @typedef {Object} module:utils/dom/position~Position\n *\n * @property {Number} top Top position offset.\n * @property {Number} left Left position offset.\n * @property {String} name Name of the position.\n */\n"]}]}