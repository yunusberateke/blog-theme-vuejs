{"remainingRequest":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js?{}!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/model/utils/getselectedcontent.js","dependencies":[{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/model/utils/getselectedcontent.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKCi8qKgogKiBAbGljZW5zZSBDb3B5cmlnaHQgKGMpIDIwMDMtMjAyMSwgQ0tTb3VyY2UgLSBGcmVkZXJpY28gS25hYmJlbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogRm9yIGxpY2Vuc2luZywgc2VlIExJQ0VOU0UubWQgb3IgaHR0cHM6Ly9ja2VkaXRvci5jb20vbGVnYWwvY2tlZGl0b3Itb3NzLWxpY2Vuc2UKICovCgovKioKICogQG1vZHVsZSBlbmdpbmUvbW9kZWwvdXRpbHMvZ2V0c2VsZWN0ZWRjb250ZW50CiAqLwoKLyoqCiAqIEdldHMgYSBjbG9uZSBvZiB0aGUgc2VsZWN0ZWQgY29udGVudC4KICoKICogRm9yIGV4YW1wbGUsIGZvciB0aGUgZm9sbG93aW5nIHNlbGVjdGlvbjoKICoKICogYGBgaHRtbAogKiA8cD54PC9wPjxxdW90ZT48cD55PC9wPjxoPmZpcltzdDwvaD48L3F1b3RlPjxwPnNlXWNvbmQ8L3A+PHA+ejwvcD4KICogYGBgCiAqCiAqIEl0IHdpbGwgcmV0dXJuIGEgZG9jdW1lbnQgZnJhZ21lbnQgd2l0aCBzdWNoIGEgY29udGVudDoKICoKICogYGBgaHRtbAogKiA8cXVvdGU+PGg+c3Q8L2g+PC9xdW90ZT48cD5zZTwvcD4KICogYGBgCiAqCiAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS9tb2RlbC9tb2RlbH5Nb2RlbH0gbW9kZWwgVGhlIG1vZGVsIGluIGNvbnRleHQgb2Ygd2hpY2gKICogdGhlIHNlbGVjdGlvbiBtb2RpZmljYXRpb24gc2hvdWxkIGJlIHBlcmZvcm1lZC4KICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL21vZGVsL3NlbGVjdGlvbn5TZWxlY3Rpb258bW9kdWxlOmVuZ2luZS9tb2RlbC9kb2N1bWVudHNlbGVjdGlvbn5Eb2N1bWVudFNlbGVjdGlvbn0gc2VsZWN0aW9uCiAqIFRoZSBzZWxlY3Rpb24gb2Ygd2hpY2ggY29udGVudCB3aWxsIGJlIHJldHVybmVkLgogKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS9tb2RlbC9kb2N1bWVudGZyYWdtZW50fkRvY3VtZW50RnJhZ21lbnR9CiAqLwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRTZWxlY3RlZENvbnRlbnQobW9kZWwsIHNlbGVjdGlvbikgewogIHJldHVybiBtb2RlbC5jaGFuZ2UoZnVuY3Rpb24gKHdyaXRlcikgewogICAgdmFyIGZyYWcgPSB3cml0ZXIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwogICAgdmFyIHJhbmdlID0gc2VsZWN0aW9uLmdldEZpcnN0UmFuZ2UoKTsKCiAgICBpZiAoIXJhbmdlIHx8IHJhbmdlLmlzQ29sbGFwc2VkKSB7CiAgICAgIHJldHVybiBmcmFnOwogICAgfQoKICAgIHZhciByb290ID0gcmFuZ2Uuc3RhcnQucm9vdDsKICAgIHZhciBjb21tb25QYXRoID0gcmFuZ2Uuc3RhcnQuZ2V0Q29tbW9uUGF0aChyYW5nZS5lbmQpOwogICAgdmFyIGNvbW1vblBhcmVudCA9IHJvb3QuZ2V0Tm9kZUJ5UGF0aChjb21tb25QYXRoKTsgLy8gIyMgMXN0IHN0ZXAKICAgIC8vCiAgICAvLyBGaXJzdCwgd2UnbGwgY2xvbmUgYSBmcmFnbWVudCByZXByZXNlbnRlZCBieSBhIG1pbmltYWwgZmxhdCByYW5nZQogICAgLy8gY29udGFpbmluZyB0aGUgb3JpZ2luYWwgcmFuZ2UgdG8gYmUgY2xvbmVkLgogICAgLy8gRS5nLiBsZXQncyBjb25zaWRlciBzdWNoIGEgcmFuZ2U6CiAgICAvLwogICAgLy8gPHA+eDwvcD48cXVvdGU+PHA+eTwvcD48aD5maXJbc3Q8L2g+PC9xdW90ZT48cD5zZV1jb25kPC9wPjxwPno8L3A+CiAgICAvLwogICAgLy8gQSBtaW5pbWFsIGZsYXQgcmFuZ2UgY29udGFpbmluZyB0aGlzIG9uZSBpczoKICAgIC8vCiAgICAvLyA8cD54PC9wPls8cXVvdGU+PHA+eTwvcD48aD5maXJzdDwvaD48L3F1b3RlPjxwPnNlY29uZDwvcD5dPHA+ejwvcD4KICAgIC8vCiAgICAvLyBXZSBjYW4gZWFzaWx5IGNsb25lIHRoaXMgc3RydWN0dXJlLCBwcmVzZXJ2aW5nIGUuZy4gdGhlIDxxdW90ZT4gZWxlbWVudC4KCiAgICB2YXIgZmxhdFN1YnRyZWVSYW5nZTsKCiAgICBpZiAocmFuZ2Uuc3RhcnQucGFyZW50ID09IHJhbmdlLmVuZC5wYXJlbnQpIHsKICAgICAgLy8gVGhlIG9yaWdpbmFsIHJhbmdlIGlzIGZsYXQsIHNvIHRha2UgaXQuCiAgICAgIGZsYXRTdWJ0cmVlUmFuZ2UgPSByYW5nZTsKICAgIH0gZWxzZSB7CiAgICAgIGZsYXRTdWJ0cmVlUmFuZ2UgPSB3cml0ZXIuY3JlYXRlUmFuZ2Uod3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQoY29tbW9uUGFyZW50LCByYW5nZS5zdGFydC5wYXRoW2NvbW1vblBhdGgubGVuZ3RoXSksIHdyaXRlci5jcmVhdGVQb3NpdGlvbkF0KGNvbW1vblBhcmVudCwgcmFuZ2UuZW5kLnBhdGhbY29tbW9uUGF0aC5sZW5ndGhdICsgMSkpOwogICAgfQoKICAgIHZhciBob3dNYW55ID0gZmxhdFN1YnRyZWVSYW5nZS5lbmQub2Zmc2V0IC0gZmxhdFN1YnRyZWVSYW5nZS5zdGFydC5vZmZzZXQ7IC8vIENsb25lIHRoZSB3aG9sZSBjb250ZW50cy4KCiAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZmxhdFN1YnRyZWVSYW5nZS5nZXRJdGVtcyh7CiAgICAgIHNoYWxsb3c6IHRydWUKICAgIH0pKSwKICAgICAgICBfc3RlcDsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CgogICAgICAgIGlmIChpdGVtLmlzKCckdGV4dFByb3h5JykpIHsKICAgICAgICAgIHdyaXRlci5hcHBlbmRUZXh0KGl0ZW0uZGF0YSwgaXRlbS5nZXRBdHRyaWJ1dGVzKCksIGZyYWcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3cml0ZXIuYXBwZW5kKHdyaXRlci5jbG9uZUVsZW1lbnQoaXRlbSwgdHJ1ZSksIGZyYWcpOwogICAgICAgIH0KICAgICAgfSAvLyAjIyAybmQgc3RlcAogICAgICAvLwogICAgICAvLyBJZiB0aGUgb3JpZ2luYWwgcmFuZ2Ugd2Fzbid0IGZsYXQsIHRoZW4gd2UgbmVlZCB0byByZW1vdmUgdGhlIGV4Y2VzcyBub2RlcyBmcm9tIHRoZSBib3RoIGVuZHMgb2YgdGhlIGNsb25lZCBmcmFnbWVudC4KICAgICAgLy8KICAgICAgLy8gRm9yIGV4YW1wbGUsIGZvciB0aGUgcmFuZ2Ugc2hvd24gaW4gdGhlIDFzdCBzdGVwIGNvbW1lbnQsIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZXNlIHBpZWNlczoKICAgICAgLy8KICAgICAgLy8gPHF1b3RlPls8cD55PC9wPl08aD5bZmlyXXN0PC9oPjwvcXVvdGU+PHA+c2VbY29uZF08L3A+CiAgICAgIC8vCiAgICAgIC8vIFNvIHRoaXMgd2lsbCBiZSB0aGUgZmluYWwgY29waWVkIGNvbnRlbnQ6CiAgICAgIC8vCiAgICAgIC8vIDxxdW90ZT48aD5zdDwvaD48L3F1b3RlPjxwPnNlPC9wPgogICAgICAvLwogICAgICAvLyBJbiBvcmRlciB0byBkbyB0aGF0LCB3ZSByZW1vdmUgY29udGVudCBmcm9tIHRoZXNlIHR3byByYW5nZXM6CiAgICAgIC8vCiAgICAgIC8vIFs8cXVvdGU+PHA+eTwvcD48aD5maXJdc3Q8L2g+PC9xdW90ZT48cD5zZVtjb25kPC9wPl0KCiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvci5mKCk7CiAgICB9CgogICAgaWYgKGZsYXRTdWJ0cmVlUmFuZ2UgIT0gcmFuZ2UpIHsKICAgICAgLy8gRmluZCB0aGUgcG9zaXRpb24gb2YgdGhlIG9yaWdpbmFsIHJhbmdlIGluIHRoZSBjbG9uZWQgZnJhZ21lbnQuCiAgICAgIHZhciBuZXdSYW5nZSA9IHJhbmdlLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZShmbGF0U3VidHJlZVJhbmdlLnN0YXJ0LCB3cml0ZXIuY3JlYXRlUG9zaXRpb25BdChmcmFnLCAwKSwgaG93TWFueSlbMF07CgogICAgICB2YXIgbGVmdEV4Y2Vzc1JhbmdlID0gd3JpdGVyLmNyZWF0ZVJhbmdlKHdyaXRlci5jcmVhdGVQb3NpdGlvbkF0KGZyYWcsIDApLCBuZXdSYW5nZS5zdGFydCk7CiAgICAgIHZhciByaWdodEV4Y2Vzc1JhbmdlID0gd3JpdGVyLmNyZWF0ZVJhbmdlKG5ld1JhbmdlLmVuZCwgd3JpdGVyLmNyZWF0ZVBvc2l0aW9uQXQoZnJhZywgJ2VuZCcpKTsKICAgICAgcmVtb3ZlUmFuZ2VDb250ZW50KHJpZ2h0RXhjZXNzUmFuZ2UsIHdyaXRlcik7CiAgICAgIHJlbW92ZVJhbmdlQ29udGVudChsZWZ0RXhjZXNzUmFuZ2UsIHdyaXRlcik7CiAgICB9CgogICAgcmV0dXJuIGZyYWc7CiAgfSk7Cn0gLy8gQWZ0ZXIgaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yNS1lbmdpbmUvaXNzdWVzLzY5MCBpcyBmaXhlZCwKLy8gdGhpcyBmdW5jdGlvbiB3aWxsLCBtb3N0IGxpa2VseSwgYmUgYWJsZSB0byByZXdyaXR0ZW4gdXNpbmcgZ2V0TWluaW1hbEZsYXRSYW5nZXMoKS4KCmZ1bmN0aW9uIHJlbW92ZVJhbmdlQ29udGVudChyYW5nZSwgd3JpdGVyKSB7CiAgdmFyIHBhcmVudHNUb0NoZWNrID0gW107CiAgQXJyYXkuZnJvbShyYW5nZS5nZXRJdGVtcyh7CiAgICBkaXJlY3Rpb246ICdiYWNrd2FyZCcKICB9KSkgLy8gV2Ugc2hvdWxkIGJldHRlciBzdG9yZSByYW5nZXMgYmVjYXVzZSB0ZXh0IHByb3hpZXMgd2lsbCBsb3NlIGludGVncml0eQogIC8vIHdpdGggdGhlIHRleHQgbm9kZXMgd2hlbiB3ZSdsbCBzdGFydCByZW1vdmluZyBjb250ZW50LgogIC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiB3cml0ZXIuY3JlYXRlUmFuZ2VPbihpdGVtKTsKICB9KSAvLyBGaWx0ZXIgb25seSB0aGVzZSBpdGVtcyB3aGljaCBhcmUgZnVsbHkgY29udGFpbmVkIGluIHRoZSBwYXNzZWQgcmFuZ2UuCiAgLy8KICAvLyBFLmcuIGZvciB0aGUgZm9sbG93aW5nIHJhbmdlOiBbPHF1b3RlPjxwPnk8L3A+PGg+ZmlyXXN0PC9oPgogIC8vIHRoZSB3YWxrZXIgd2lsbCByZXR1cm4gdGhlIGVudGlyZSA8aD4gZWxlbWVudCwgd2hlbiBvbmx5IHRoZSAiZmlyIiBpdGVtIGluc2lkZSBpdCBpcyBmdWxseSBjb250YWluZWQuCiAgLmZpbHRlcihmdW5jdGlvbiAoaXRlbVJhbmdlKSB7CiAgICAvLyBXZSBzaG91bGQgYmUgYWJsZSB0byB1c2UgUmFuZ2UuY29udGFpbnNSYW5nZSwgYnV0IGh0dHBzOi8vZ2l0aHViLmNvbS9ja2VkaXRvci9ja2VkaXRvcjUtZW5naW5lL2lzc3Vlcy82OTEuCiAgICB2YXIgY29udGFpbmVkID0gKGl0ZW1SYW5nZS5zdGFydC5pc0FmdGVyKHJhbmdlLnN0YXJ0KSB8fCBpdGVtUmFuZ2Uuc3RhcnQuaXNFcXVhbChyYW5nZS5zdGFydCkpICYmIChpdGVtUmFuZ2UuZW5kLmlzQmVmb3JlKHJhbmdlLmVuZCkgfHwgaXRlbVJhbmdlLmVuZC5pc0VxdWFsKHJhbmdlLmVuZCkpOwogICAgcmV0dXJuIGNvbnRhaW5lZDsKICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtUmFuZ2UpIHsKICAgIHBhcmVudHNUb0NoZWNrLnB1c2goaXRlbVJhbmdlLnN0YXJ0LnBhcmVudCk7CiAgICB3cml0ZXIucmVtb3ZlKGl0ZW1SYW5nZSk7CiAgfSk7IC8vIFJlbW92ZSBhbmNlc3RvcnMgb2YgdGhlIHJlbW92ZWQgaXRlbXMgaWYgdGhleSB0dXJuZWQgdG8gYmUgZW1wdHkgbm93CiAgLy8gKHRoZWlyIHdob2xlIGNvbnRlbnQgd2FzIGNvbnRhaW5lZCBpbiB0aGUgcmFuZ2UpLgoKICBwYXJlbnRzVG9DaGVjay5mb3JFYWNoKGZ1bmN0aW9uIChwYXJlbnRUb0NoZWNrKSB7CiAgICB2YXIgcGFyZW50ID0gcGFyZW50VG9DaGVjazsKCiAgICB3aGlsZSAocGFyZW50LnBhcmVudCAmJiBwYXJlbnQuaXNFbXB0eSkgewogICAgICB2YXIgcmVtb3ZlUmFuZ2UgPSB3cml0ZXIuY3JlYXRlUmFuZ2VPbihwYXJlbnQpOwogICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50OwogICAgICB3cml0ZXIucmVtb3ZlKHJlbW92ZVJhbmdlKTsKICAgIH0KICB9KTsKfQ=="},{"version":3,"sources":["/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/model/utils/getselectedcontent.js"],"names":["getSelectedContent","model","selection","change","writer","frag","createDocumentFragment","range","getFirstRange","isCollapsed","root","start","commonPath","getCommonPath","end","commonParent","getNodeByPath","flatSubtreeRange","parent","createRange","createPositionAt","path","length","howMany","offset","getItems","shallow","item","is","appendText","data","getAttributes","append","cloneElement","newRange","_getTransformedByMove","leftExcessRange","rightExcessRange","removeRangeContent","parentsToCheck","Array","from","direction","map","createRangeOn","filter","itemRange","contained","isAfter","isEqual","isBefore","forEach","push","remove","parentToCheck","isEmpty","removeRange"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/model/utils/getselectedcontent\n */\n\n/**\n * Gets a clone of the selected content.\n *\n * For example, for the following selection:\n *\n * ```html\n * <p>x</p><quote><p>y</p><h>fir[st</h></quote><p>se]cond</p><p>z</p>\n * ```\n *\n * It will return a document fragment with such a content:\n *\n * ```html\n * <quote><h>st</h></quote><p>se</p>\n * ```\n *\n * @param {module:engine/model/model~Model} model The model in context of which\n * the selection modification should be performed.\n * @param {module:engine/model/selection~Selection|module:engine/model/documentselection~DocumentSelection} selection\n * The selection of which content will be returned.\n * @returns {module:engine/model/documentfragment~DocumentFragment}\n */\nexport default function getSelectedContent( model, selection ) {\n\treturn model.change( writer => {\n\t\tconst frag = writer.createDocumentFragment();\n\t\tconst range = selection.getFirstRange();\n\n\t\tif ( !range || range.isCollapsed ) {\n\t\t\treturn frag;\n\t\t}\n\n\t\tconst root = range.start.root;\n\t\tconst commonPath = range.start.getCommonPath( range.end );\n\t\tconst commonParent = root.getNodeByPath( commonPath );\n\n\t\t// ## 1st step\n\t\t//\n\t\t// First, we'll clone a fragment represented by a minimal flat range\n\t\t// containing the original range to be cloned.\n\t\t// E.g. let's consider such a range:\n\t\t//\n\t\t// <p>x</p><quote><p>y</p><h>fir[st</h></quote><p>se]cond</p><p>z</p>\n\t\t//\n\t\t// A minimal flat range containing this one is:\n\t\t//\n\t\t// <p>x</p>[<quote><p>y</p><h>first</h></quote><p>second</p>]<p>z</p>\n\t\t//\n\t\t// We can easily clone this structure, preserving e.g. the <quote> element.\n\t\tlet flatSubtreeRange;\n\n\t\tif ( range.start.parent == range.end.parent ) {\n\t\t\t// The original range is flat, so take it.\n\t\t\tflatSubtreeRange = range;\n\t\t} else {\n\t\t\tflatSubtreeRange = writer.createRange(\n\t\t\t\twriter.createPositionAt( commonParent, range.start.path[ commonPath.length ] ),\n\t\t\t\twriter.createPositionAt( commonParent, range.end.path[ commonPath.length ] + 1 )\n\t\t\t);\n\t\t}\n\n\t\tconst howMany = flatSubtreeRange.end.offset - flatSubtreeRange.start.offset;\n\n\t\t// Clone the whole contents.\n\t\tfor ( const item of flatSubtreeRange.getItems( { shallow: true } ) ) {\n\t\t\tif ( item.is( '$textProxy' ) ) {\n\t\t\t\twriter.appendText( item.data, item.getAttributes(), frag );\n\t\t\t} else {\n\t\t\t\twriter.append( writer.cloneElement( item, true ), frag );\n\t\t\t}\n\t\t}\n\n\t\t// ## 2nd step\n\t\t//\n\t\t// If the original range wasn't flat, then we need to remove the excess nodes from the both ends of the cloned fragment.\n\t\t//\n\t\t// For example, for the range shown in the 1st step comment, we need to remove these pieces:\n\t\t//\n\t\t// <quote>[<p>y</p>]<h>[fir]st</h></quote><p>se[cond]</p>\n\t\t//\n\t\t// So this will be the final copied content:\n\t\t//\n\t\t// <quote><h>st</h></quote><p>se</p>\n\t\t//\n\t\t// In order to do that, we remove content from these two ranges:\n\t\t//\n\t\t// [<quote><p>y</p><h>fir]st</h></quote><p>se[cond</p>]\n\t\tif ( flatSubtreeRange != range ) {\n\t\t\t// Find the position of the original range in the cloned fragment.\n\t\t\tconst newRange = range._getTransformedByMove( flatSubtreeRange.start, writer.createPositionAt( frag, 0 ), howMany )[ 0 ];\n\n\t\t\tconst leftExcessRange = writer.createRange( writer.createPositionAt( frag, 0 ), newRange.start );\n\t\t\tconst rightExcessRange = writer.createRange( newRange.end, writer.createPositionAt( frag, 'end' ) );\n\n\t\t\tremoveRangeContent( rightExcessRange, writer );\n\t\t\tremoveRangeContent( leftExcessRange, writer );\n\t\t}\n\n\t\treturn frag;\n\t} );\n}\n\n// After https://github.com/ckeditor/ckeditor5-engine/issues/690 is fixed,\n// this function will, most likely, be able to rewritten using getMinimalFlatRanges().\nfunction removeRangeContent( range, writer ) {\n\tconst parentsToCheck = [];\n\n\tArray.from( range.getItems( { direction: 'backward' } ) )\n\t\t// We should better store ranges because text proxies will lose integrity\n\t\t// with the text nodes when we'll start removing content.\n\t\t.map( item => writer.createRangeOn( item ) )\n\t\t// Filter only these items which are fully contained in the passed range.\n\t\t//\n\t\t// E.g. for the following range: [<quote><p>y</p><h>fir]st</h>\n\t\t// the walker will return the entire <h> element, when only the \"fir\" item inside it is fully contained.\n\t\t.filter( itemRange => {\n\t\t\t// We should be able to use Range.containsRange, but https://github.com/ckeditor/ckeditor5-engine/issues/691.\n\t\t\tconst contained =\n\t\t\t\t( itemRange.start.isAfter( range.start ) || itemRange.start.isEqual( range.start ) ) &&\n\t\t\t\t( itemRange.end.isBefore( range.end ) || itemRange.end.isEqual( range.end ) );\n\n\t\t\treturn contained;\n\t\t} )\n\t\t.forEach( itemRange => {\n\t\t\tparentsToCheck.push( itemRange.start.parent );\n\n\t\t\twriter.remove( itemRange );\n\t\t} );\n\n\t// Remove ancestors of the removed items if they turned to be empty now\n\t// (their whole content was contained in the range).\n\tparentsToCheck.forEach( parentToCheck => {\n\t\tlet parent = parentToCheck;\n\n\t\twhile ( parent.parent && parent.isEmpty ) {\n\t\t\tconst removeRange = writer.createRangeOn( parent );\n\n\t\t\tparent = parent.parent;\n\n\t\t\twriter.remove( removeRange );\n\t\t}\n\t} );\n}\n"]}]}