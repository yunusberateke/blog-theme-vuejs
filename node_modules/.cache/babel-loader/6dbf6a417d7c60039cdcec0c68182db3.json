{"remainingRequest":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js?{}!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-core/src/plugincollection.js","dependencies":[{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-core/src/plugincollection.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvaG9tZS9la2ViZXJhdC9ZYW5kZXguRGlzay9Qcm9qZWxlcmltL0JlbmltUHJvamVsZXJpbS93ZWJzaXRlbS93ZWJzaXRlbS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvaG9tZS9la2ViZXJhdC9ZYW5kZXguRGlzay9Qcm9qZWxlcmltL0JlbmltUHJvamVsZXJpbS93ZWJzaXRlbS93ZWJzaXRlbS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwoKLyoqCiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAwMy0yMDIxLCBDS1NvdXJjZSAtIEZyZWRlcmljbyBLbmFiYmVuLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBGb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwczovL2NrZWRpdG9yLmNvbS9sZWdhbC9ja2VkaXRvci1vc3MtbGljZW5zZQogKi8KCi8qKgogKiBAbW9kdWxlIGNvcmUvcGx1Z2luY29sbGVjdGlvbgogKi8KaW1wb3J0IENLRWRpdG9yRXJyb3IgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvY2tlZGl0b3JlcnJvcic7CmltcG9ydCBFbWl0dGVyTWl4aW4gZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvZW1pdHRlcm1peGluJzsKaW1wb3J0IG1peCBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9taXgnOwovKioKICogTWFuYWdlcyBhIGxpc3Qgb2YgQ0tFZGl0b3IgcGx1Z2lucywgaW5jbHVkaW5nIGxvYWRpbmcsIHJlc29sdmluZyBkZXBlbmRlbmNpZXMgYW5kIGluaXRpYWxpemF0aW9uLgogKgogKiBAbWl4ZXMgbW9kdWxlOnV0aWxzL2VtaXR0ZXJtaXhpbn5FbWl0dGVyTWl4aW4KICovCgp2YXIgUGx1Z2luQ29sbGVjdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgLyoqCiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgcGx1Z2luIGNvbGxlY3Rpb24gY2xhc3MuCiAgICogQWxsb3dzIGxvYWRpbmcgYW5kIGluaXRpYWxpemluZyBwbHVnaW5zIGFuZCB0aGVpciBkZXBlbmRlbmNpZXMuCiAgICogQWxsb3dzIHByb3ZpZGluZyBhIGxpc3Qgb2YgYWxyZWFkeSBsb2FkZWQgcGx1Z2lucy4gVGhlc2UgcGx1Z2lucyB3aWxsIG5vdCBiZSBkZXN0cm95ZWQgYWxvbmcgd2l0aCB0aGlzIGNvbGxlY3Rpb24uCiAgICoKICAgKiBAcGFyYW0ge21vZHVsZTpjb3JlL2VkaXRvci9lZGl0b3J+RWRpdG9yfG1vZHVsZTpjb3JlL2NvbnRleHR+Q29udGV4dH0gY29udGV4dAogICAqIEBwYXJhbSB7QXJyYXkuPEZ1bmN0aW9uPn0gW2F2YWlsYWJsZVBsdWdpbnNdIFBsdWdpbnMgKGNvbnN0cnVjdG9ycykgd2hpY2ggdGhlIGNvbGxlY3Rpb24gd2lsbCBiZSBhYmxlIHRvIHVzZQogICAqIHdoZW4ge0BsaW5rIG1vZHVsZTpjb3JlL3BsdWdpbmNvbGxlY3Rpb25+UGx1Z2luQ29sbGVjdGlvbiNpbml0fSBpcyB1c2VkIHdpdGggdGhlIHBsdWdpbiBuYW1lcyAoc3RyaW5ncywgaW5zdGVhZCBvZiBjb25zdHJ1Y3RvcnMpLgogICAqIFVzdWFsbHksIHRoZSBlZGl0b3Igd2lsbCBwYXNzIGl0cyBidWlsdC1pbiBwbHVnaW5zIHRvIHRoZSBjb2xsZWN0aW9uIHNvIHRoZXkgY2FuIGxhdGVyIGJlCiAgICogdXNlZCBpbiBgY29uZmlnLnBsdWdpbnNgIG9yIGBjb25maWcucmVtb3ZlUGx1Z2luc2AgYnkgbmFtZXMuCiAgICogQHBhcmFtIHtJdGVyYWJsZS48QXJyYXk+fSBjb250ZXh0UGx1Z2lucyBBIGxpc3Qgb2YgYWxyZWFkeSBpbml0aWFsaXplZCBwbHVnaW5zIHJlcHJlc2VudGVkIGJ5IGEKICAgKiBgWyBQbHVnaW5Db25zdHJ1Y3RvciwgcGx1Z2luSW5zdGFuY2UgXWAgcGFpci4KICAgKi8KICBmdW5jdGlvbiBQbHVnaW5Db2xsZWN0aW9uKGNvbnRleHQpIHsKICAgIHZhciBhdmFpbGFibGVQbHVnaW5zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTsKICAgIHZhciBjb250ZXh0UGx1Z2lucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogW107CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBsdWdpbkNvbGxlY3Rpb24pOwoKICAgIC8qKgogICAgICogQHByb3RlY3RlZAogICAgICogQHR5cGUge21vZHVsZTpjb3JlL2VkaXRvci9lZGl0b3J+RWRpdG9yfG1vZHVsZTpjb3JlL2NvbnRleHR+Q29udGV4dH0KICAgICAqLwogICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7CiAgICAvKioKICAgICAqIEBwcm90ZWN0ZWQKICAgICAqIEB0eXBlIHtNYXB9CiAgICAgKi8KCiAgICB0aGlzLl9wbHVnaW5zID0gbmV3IE1hcCgpOwogICAgLyoqCiAgICAgKiBBIG1hcCBvZiBwbHVnaW4gY29uc3RydWN0b3JzIHRoYXQgY2FuIGJlIHJldHJpZXZlZCBieSB0aGVpciBuYW1lcy4KICAgICAqCiAgICAgKiBAcHJvdGVjdGVkCiAgICAgKiBAdHlwZSB7TWFwLjxTdHJpbmd8RnVuY3Rpb24sRnVuY3Rpb24+fQogICAgICovCgogICAgdGhpcy5fYXZhaWxhYmxlUGx1Z2lucyA9IG5ldyBNYXAoKTsKCiAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYXZhaWxhYmxlUGx1Z2lucyksCiAgICAgICAgX3N0ZXA7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgUGx1Z2luQ29uc3RydWN0b3IgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgaWYgKFBsdWdpbkNvbnN0cnVjdG9yLnBsdWdpbk5hbWUpIHsKICAgICAgICAgIHRoaXMuX2F2YWlsYWJsZVBsdWdpbnMuc2V0KFBsdWdpbkNvbnN0cnVjdG9yLnBsdWdpbk5hbWUsIFBsdWdpbkNvbnN0cnVjdG9yKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgLyoqCiAgICAgICAqIE1hcCBvZiB7QGxpbmsgbW9kdWxlOmNvcmUvY29udGV4dHBsdWdpbn5Db250ZXh0UGx1Z2luIGNvbnRleHQgcGx1Z2luc30gd2hpY2ggY2FuIGJlIHJldHJpZXZlZCBieSB0aGVpciBjb25zdHJ1Y3RvcnMgb3IgaW5zdGFuY2VzLgogICAgICAgKgogICAgICAgKiBAcHJvdGVjdGVkCiAgICAgICAqIEB0eXBlIHtNYXA8RnVuY3Rpb24sRnVuY3Rpb24+fQogICAgICAgKi8KCiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvci5mKCk7CiAgICB9CgogICAgdGhpcy5fY29udGV4dFBsdWdpbnMgPSBuZXcgTWFwKCk7CgogICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihjb250ZXh0UGx1Z2lucyksCiAgICAgICAgX3N0ZXAyOwoKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIF9zdGVwMiR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwMi52YWx1ZSwgMiksCiAgICAgICAgICAgIF9QbHVnaW5Db25zdHJ1Y3RvciA9IF9zdGVwMiR2YWx1ZVswXSwKICAgICAgICAgICAgcGx1Z2luSW5zdGFuY2UgPSBfc3RlcDIkdmFsdWVbMV07CgogICAgICAgIHRoaXMuX2NvbnRleHRQbHVnaW5zLnNldChfUGx1Z2luQ29uc3RydWN0b3IsIHBsdWdpbkluc3RhbmNlKTsKCiAgICAgICAgdGhpcy5fY29udGV4dFBsdWdpbnMuc2V0KHBsdWdpbkluc3RhbmNlLCBfUGx1Z2luQ29uc3RydWN0b3IpOyAvLyBUbyBtYWtlIGl0IHBvc3NpYmxlIHRvIHJlcXVpcmUgYSBwbHVnaW4gYnkgaXRzIG5hbWUuCgoKICAgICAgICBpZiAoX1BsdWdpbkNvbnN0cnVjdG9yLnBsdWdpbk5hbWUpIHsKICAgICAgICAgIHRoaXMuX2F2YWlsYWJsZVBsdWdpbnMuc2V0KF9QbHVnaW5Db25zdHJ1Y3Rvci5wbHVnaW5OYW1lLCBfUGx1Z2luQ29uc3RydWN0b3IpOwogICAgICAgIH0KICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICB9CiAgfQogIC8qKgogICAqIEl0ZXJhYmxlIGludGVyZmFjZS4KICAgKgogICAqIFJldHVybnMgYFsgUGx1Z2luQ29uc3RydWN0b3IsIHBsdWdpbkluc3RhbmNlIF1gIHBhaXJzLgogICAqCiAgICogQHJldHVybnMge0l0ZXJhYmxlLjxBcnJheT59CiAgICovCgoKICBfY3JlYXRlQ2xhc3MoUGx1Z2luQ29sbGVjdGlvbiwgW3sKICAgIGtleTogU3ltYm9sLml0ZXJhdG9yLAogICAgdmFsdWU6CiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiB2YWx1ZSgpIHsKICAgICAgdmFyIF9pdGVyYXRvcjMsIF9zdGVwMywgZW50cnk7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gdmFsdWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLl9wbHVnaW5zKTsKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKCiAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5zKCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgaWYgKChfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBlbnRyeSA9IF9zdGVwMy52YWx1ZTsKCiAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIGVudHJ5WzBdID09ICdmdW5jdGlvbicpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5OwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwoKICAgICAgICAgICAgICBfaXRlcmF0b3IzLmUoX2NvbnRleHQudDApOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTU7CgogICAgICAgICAgICAgIF9pdGVyYXRvcjMuZigpOwoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDE1KTsKCiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHZhbHVlLCB0aGlzLCBbWzEsIDEyLCAxNSwgMThdXSk7CiAgICB9KQogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBwbHVnaW4gaW5zdGFuY2UgYnkgaXRzIGNvbnN0cnVjdG9yIG9yIG5hbWUuCiAgICAgKgogICAgICoJCS8vIENoZWNrIGlmICdDbGlwYm9hcmQnIHBsdWdpbiB3YXMgbG9hZGVkLgogICAgICoJCWlmICggZWRpdG9yLnBsdWdpbnMuaGFzKCAnQ2xpcGJvYXJkUGlwZWxpbmUnICkgKSB7CiAgICAgKgkJCS8vIEdldCBjbGlwYm9hcmQgcGx1Z2luIGluc3RhbmNlCiAgICAgKgkJCWNvbnN0IGNsaXBib2FyZCA9IGVkaXRvci5wbHVnaW5zLmdldCggJ0NsaXBib2FyZFBpcGVsaW5lJyApOwogICAgICoKICAgICAqCQkJdGhpcy5saXN0ZW5UbyggY2xpcGJvYXJkLCAnaW5wdXRUcmFuc2Zvcm1hdGlvbicsICggZXZ0LCBkYXRhICkgPT4gewogICAgICoJCQkJLy8gRG8gc29tZXRoaW5nIG9uIGNsaXBib2FyZCBpbnB1dC4KICAgICAqCQkJfSApOwogICAgICoJCX0KICAgICAqCiAgICAgKiAqKk5vdGUqKjogVGhpcyBtZXRob2Qgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiBhIHBsdWdpbiBpcyBub3QgbG9hZGVkLiBVc2UgYHtAbGluayAjaGFzIGVkaXRvci5wbHVnaW5zLmhhcygpfWAKICAgICAqIHRvIGNoZWNrIGlmIGEgcGx1Z2luIGlzIGF2YWlsYWJsZS4KICAgICAqCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ30ga2V5IFRoZSBwbHVnaW4gY29uc3RydWN0b3Igb3Ige0BsaW5rIG1vZHVsZTpjb3JlL3BsdWdpbn5QbHVnaW5JbnRlcmZhY2UucGx1Z2luTmFtZSBuYW1lfS4KICAgICAqIEByZXR1cm5zIHttb2R1bGU6Y29yZS9wbHVnaW5+UGx1Z2luSW50ZXJmYWNlfQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KGtleSkgewogICAgICB2YXIgcGx1Z2luID0gdGhpcy5fcGx1Z2lucy5nZXQoa2V5KTsKCiAgICAgIGlmICghcGx1Z2luKSB7CiAgICAgICAgdmFyIHBsdWdpbk5hbWUgPSBrZXk7CgogICAgICAgIGlmICh0eXBlb2Yga2V5ID09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIHBsdWdpbk5hbWUgPSBrZXkucGx1Z2luTmFtZSB8fCBrZXkubmFtZTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHBsdWdpbiBpcyBub3QgbG9hZGVkIGFuZCBjb3VsZCBub3QgYmUgb2J0YWluZWQuCiAgICAgICAgICoKICAgICAgICAgKiBQbHVnaW4gY2xhc3NlcyAoY29uc3RydWN0b3JzKSBuZWVkIHRvIGJlIHByb3ZpZGVkIHRvIHRoZSBlZGl0b3IgYW5kIG11c3QgYmUgbG9hZGVkIGJlZm9yZSB0aGV5IGNhbiBiZSBvYnRhaW5lZCBmcm9tCiAgICAgICAgICogdGhlIHBsdWdpbiBjb2xsZWN0aW9uLgogICAgICAgICAqIFRoaXMgaXMgdXN1YWxseSBkb25lIGluIENLRWRpdG9yIDUgYnVpbGRzIGJ5IHNldHRpbmcgdGhlIHtAbGluayBtb2R1bGU6Y29yZS9lZGl0b3IvZWRpdG9yfkVkaXRvci5idWlsdGluUGx1Z2luc30KICAgICAgICAgKiBwcm9wZXJ0eS4KICAgICAgICAgKgogICAgICAgICAqICoqTm90ZSoqOiBZb3UgY2FuIHVzZSBge0BsaW5rIG1vZHVsZTpjb3JlL3BsdWdpbmNvbGxlY3Rpb25+UGx1Z2luQ29sbGVjdGlvbiNoYXMgZWRpdG9yLnBsdWdpbnMuaGFzKCl9YAogICAgICAgICAqIHRvIGNoZWNrIGlmIGEgcGx1Z2luIHdhcyBsb2FkZWQuCiAgICAgICAgICoKICAgICAgICAgKiBAZXJyb3IgcGx1Z2luY29sbGVjdGlvbi1wbHVnaW4tbm90LWxvYWRlZAogICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwbHVnaW4gVGhlIG5hbWUgb2YgdGhlIHBsdWdpbiB3aGljaCBpcyBub3QgbG9hZGVkLgogICAgICAgICAqLwoKCiAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ3BsdWdpbmNvbGxlY3Rpb24tcGx1Z2luLW5vdC1sb2FkZWQnLCB0aGlzLl9jb250ZXh0LCB7CiAgICAgICAgICBwbHVnaW46IHBsdWdpbk5hbWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBsdWdpbjsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIGlmIGEgcGx1Z2luIGlzIGxvYWRlZC4KICAgICAqCiAgICAgKgkJLy8gQ2hlY2sgaWYgdGhlICdDbGlwYm9hcmQnIHBsdWdpbiB3YXMgbG9hZGVkLgogICAgICoJCWlmICggZWRpdG9yLnBsdWdpbnMuaGFzKCAnQ2xpcGJvYXJkUGlwZWxpbmUnICkgKSB7CiAgICAgKgkJCS8vIE5vdyB1c2UgdGhlIGNsaXBib2FyZCBwbHVnaW4gaW5zdGFuY2U6CiAgICAgKgkJCWNvbnN0IGNsaXBib2FyZCA9IGVkaXRvci5wbHVnaW5zLmdldCggJ0NsaXBib2FyZFBpcGVsaW5lJyApOwogICAgICoKICAgICAqCQkJLy8gLi4uCiAgICAgKgkJfQogICAgICoKICAgICAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfSBrZXkgVGhlIHBsdWdpbiBjb25zdHJ1Y3RvciBvciB7QGxpbmsgbW9kdWxlOmNvcmUvcGx1Z2luflBsdWdpbkludGVyZmFjZS5wbHVnaW5OYW1lIG5hbWV9LgogICAgICogQHJldHVybnMge0Jvb2xlYW59CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaGFzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXMoa2V5KSB7CiAgICAgIHJldHVybiB0aGlzLl9wbHVnaW5zLmhhcyhrZXkpOwogICAgfQogICAgLyoqCiAgICAgKiBJbml0aWFsaXplcyBhIHNldCBvZiBwbHVnaW5zIGFuZCBhZGRzIHRoZW0gdG8gdGhlIGNvbGxlY3Rpb24uCiAgICAgKgogICAgICogQHBhcmFtIHtBcnJheS48RnVuY3Rpb258U3RyaW5nPn0gcGx1Z2lucyBBbiBhcnJheSBvZiB7QGxpbmsgbW9kdWxlOmNvcmUvcGx1Z2luflBsdWdpbkludGVyZmFjZSBwbHVnaW4gY29uc3RydWN0b3JzfQogICAgICogb3Ige0BsaW5rIG1vZHVsZTpjb3JlL3BsdWdpbn5QbHVnaW5JbnRlcmZhY2UucGx1Z2luTmFtZSBwbHVnaW4gbmFtZXN9LgogICAgICogQHBhcmFtIHtBcnJheS48U3RyaW5nfEZ1bmN0aW9uPn0gW3BsdWdpbnNUb1JlbW92ZV0gTmFtZXMgb2YgdGhlIHBsdWdpbnMgb3IgcGx1Z2luIGNvbnN0cnVjdG9ycwogICAgICogdGhhdCBzaG91bGQgbm90IGJlIGxvYWRlZCAoZGVzcGl0ZSBiZWluZyBzcGVjaWZpZWQgaW4gdGhlIGBwbHVnaW5zYCBhcnJheSkuCiAgICAgKiBAcGFyYW0ge0FycmF5LjxGdW5jdGlvbj59IFtwbHVnaW5zU3Vic3RpdHV0aW9uc10gQW4gYXJyYXkgb2Yge0BsaW5rIG1vZHVsZTpjb3JlL3BsdWdpbn5QbHVnaW5JbnRlcmZhY2UgcGx1Z2luIGNvbnN0cnVjdG9yc30KICAgICAqIHRoYXQgd2lsbCBiZSB1c2VkIHRvIHJlcGxhY2UgcGx1Z2lucyBvZiB0aGUgc2FtZSBuYW1lcyB0aGF0IHdlcmUgcGFzc2VkIGluIGBwbHVnaW5zYCBvciB0aGF0IGFyZSBpbiB0aGVpciBkZXBlbmRlbmN5IHRyZWUuCiAgICAgKiBBIHVzZWZ1bCBvcHRpb24gZm9yIHJlcGxhY2luZyBidWlsdC1pbiBwbHVnaW5zIHdoaWxlIGNyZWF0aW5nIHRlc3RzIChmb3IgbW9ja2luZyB0aGVpciBBUElzKS4gUGx1Z2lucyB0aGF0IHdpbGwgYmUgcmVwbGFjZWQKICAgICAqIG11c3QgZm9sbG93IHRoZXNlIHJ1bGVzOgogICAgICogICAqIFRoZSBuZXcgcGx1Z2luIG11c3QgYmUgYSBjbGFzcy4KICAgICAqICAgKiBUaGUgbmV3IHBsdWdpbiBtdXN0IGJlIG5hbWVkLgogICAgICogICAqIEJvdGggcGx1Z2lucyBtdXN0IG5vdCBkZXBlbmQgb24gb3RoZXIgcGx1Z2lucy4KICAgICAqIEByZXR1cm5zIHtQcm9taXNlLjxtb2R1bGU6Y29yZS9wbHVnaW5+TG9hZGVkUGx1Z2lucz59IEEgcHJvbWlzZSB3aGljaCBnZXRzIHJlc29sdmVkIG9uY2UgYWxsIHBsdWdpbnMgYXJlIGxvYWRlZAogICAgICogYW5kIGF2YWlsYWJsZSBpbiB0aGUgY29sbGVjdGlvbi4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJpbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KHBsdWdpbnMpIHsKICAgICAgdmFyIHBsdWdpbnNUb1JlbW92ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107CiAgICAgIHZhciBwbHVnaW5zU3Vic3RpdHV0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogW107CiAgICAgIC8vIFBsdWdpbiBpbml0aWFsaXphdGlvbiBwcm9jZWR1cmUgY29uc2lzdHMgb2YgMiBtYWluIHN0ZXBzOgogICAgICAvLyAxKSBjb2xsZWN0aW5nIGFsbCBhdmFpbGFibGUgcGx1Z2luIGNvbnN0cnVjdG9ycywKICAgICAgLy8gMikgdmVyaWZpY2F0aW9uIHdoZXRoZXIgYWxsIHJlcXVpcmVkIHBsdWdpbnMgY2FuIGJlIGluc3RhbnRpYXRlZC4KICAgICAgLy8KICAgICAgLy8gSW4gdGhlIGZpcnN0IHN0ZXAsIGFsbCBwbHVnaW4gY29uc3RydWN0b3JzLCBhdmFpbGFibGUgaW4gdGhlIHByb3ZpZGVkIGBwbHVnaW5zYCBhcnJheSBhbmQgaW5zaWRlCiAgICAgIC8vIHBsdWdpbidzIGRlcGVuZGVuY2llcyAoZnJvbSB0aGUgYFBsdWdpbi5yZXF1aXJlc2AgYXJyYXkpLCBhcmUgcmVjdXJzaXZlbHkgY29sbGVjdGVkIGFuZCBhZGRlZCB0byB0aGUgZXhpc3RpbmcKICAgICAgLy8gYHRoaXMuX2F2YWlsYWJsZVBsdWdpbnNgIG1hcCwgYnV0IHdpdGhvdXQgYW55IHZlcmlmaWNhdGlvbiBhdCB0aGUgZ2l2ZW4gbW9tZW50LiBQZXJmb3JtaW5nIHRoZSB2ZXJpZmljYXRpb24KICAgICAgLy8gYXQgdGhpcyBwb2ludCAoZHVyaW5nIHRoZSBwbHVnaW4gY29uc3RydWN0b3Igc2VhcmNoaW5nKSB3b3VsZCBjYXVzZSBmYWxzZSBlcnJvcnMgdG8gb2NjdXIsIHRoYXQgc29tZSBwbHVnaW4KICAgICAgLy8gaXMgbWlzc2luZyBidXQgaW4gZmFjdCBpdCBtYXkgYmUgZGVmaW5lZCBmdXJ0aGVyIGluIHRoZSBhcnJheSBhcyB0aGUgZGVwZW5kZW5jeSBvZiBvdGhlciBwbHVnaW4uIEFmdGVyCiAgICAgIC8vIHRyYXZlcnNpbmcgdGhlIGVudGlyZSBkZXBlbmRlbmN5IHRyZWUsIGl0IHdpbGwgYmUgY2hlY2tlZCBpZiBhbGwgcmVxdWlyZWQgInRvcCBsZXZlbCIgcGx1Z2lucyBhcmUgYXZhaWxhYmxlLgogICAgICAvLwogICAgICAvLyBJbiB0aGUgc2Vjb25kIHN0ZXAsIHRoZSBsaXN0IG9mIHBsdWdpbnMgdGhhdCBoYXZlIG5vdCBiZWVuIGV4cGxpY2l0bHkgcmVtb3ZlZCBpcyB0cmF2ZXJzZWQgdG8gZ2V0IGFsbCB0aGUKICAgICAgLy8gcGx1Z2luIGNvbnN0cnVjdG9ycyB0byBiZSBpbnN0YW50aWF0ZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIgYW5kIHRvIHZhbGlkYXRlIGFnYWluc3Qgc29tZSBydWxlcy4gRmluYWxseSwgaWYKICAgICAgLy8gbm8gcGx1Z2luIGlzIG1pc3NpbmcgYW5kIG5vIG90aGVyIGVycm9yIGhhcyBiZWVuIGZvdW5kLCB0aGV5IGFsbCB3aWxsIGJlIGluc3RhbnRpYXRlZC4KICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB2YXIgY29udGV4dCA9IHRoaXMuX2NvbnRleHQ7CiAgICAgIGZpbmRBdmFpbGFibGVQbHVnaW5Db25zdHJ1Y3RvcnMocGx1Z2lucyk7CiAgICAgIHZhbGlkYXRlUGx1Z2lucyhwbHVnaW5zKTsKICAgICAgdmFyIHBsdWdpbnNUb0xvYWQgPSBwbHVnaW5zLmZpbHRlcihmdW5jdGlvbiAocGx1Z2luKSB7CiAgICAgICAgcmV0dXJuICFpc1BsdWdpblJlbW92ZWQocGx1Z2luLCBwbHVnaW5zVG9SZW1vdmUpOwogICAgICB9KTsKCiAgICAgIHZhciBwbHVnaW5Db25zdHJ1Y3RvcnMgPSBfdG9Db25zdW1hYmxlQXJyYXkoZ2V0UGx1Z2luQ29uc3RydWN0b3JzKHBsdWdpbnNUb0xvYWQpKTsKCiAgICAgIHN1YnN0aXR1dGVQbHVnaW5zKHBsdWdpbkNvbnN0cnVjdG9ycywgcGx1Z2luc1N1YnN0aXR1dGlvbnMpOwogICAgICB2YXIgcGx1Z2luSW5zdGFuY2VzID0gbG9hZFBsdWdpbnMocGx1Z2luQ29uc3RydWN0b3JzKTsKICAgICAgcmV0dXJuIGluaXRQbHVnaW5zKHBsdWdpbkluc3RhbmNlcywgJ2luaXQnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gaW5pdFBsdWdpbnMocGx1Z2luSW5zdGFuY2VzLCAnYWZ0ZXJJbml0Jyk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBwbHVnaW5JbnN0YW5jZXM7CiAgICAgIH0pOwoKICAgICAgZnVuY3Rpb24gaXNQbHVnaW5Db25zdHJ1Y3RvcihwbHVnaW4pIHsKICAgICAgICByZXR1cm4gdHlwZW9mIHBsdWdpbiA9PT0gJ2Z1bmN0aW9uJzsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gaXNDb250ZXh0UGx1Z2luKHBsdWdpbikgewogICAgICAgIHJldHVybiBpc1BsdWdpbkNvbnN0cnVjdG9yKHBsdWdpbikgJiYgcGx1Z2luLmlzQ29udGV4dFBsdWdpbjsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gaXNQbHVnaW5SZW1vdmVkKHBsdWdpbiwgcGx1Z2luc1RvUmVtb3ZlKSB7CiAgICAgICAgcmV0dXJuIHBsdWdpbnNUb1JlbW92ZS5zb21lKGZ1bmN0aW9uIChyZW1vdmVkUGx1Z2luKSB7CiAgICAgICAgICBpZiAocmVtb3ZlZFBsdWdpbiA9PT0gcGx1Z2luKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChnZXRQbHVnaW5OYW1lKHBsdWdpbikgPT09IHJlbW92ZWRQbHVnaW4pIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGdldFBsdWdpbk5hbWUocmVtb3ZlZFBsdWdpbikgPT09IHBsdWdpbikgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGdldFBsdWdpbk5hbWUocGx1Z2luKSB7CiAgICAgICAgcmV0dXJuIGlzUGx1Z2luQ29uc3RydWN0b3IocGx1Z2luKSA/IHBsdWdpbi5wbHVnaW5OYW1lIHx8IHBsdWdpbi5uYW1lIDogcGx1Z2luOwogICAgICB9CgogICAgICBmdW5jdGlvbiBmaW5kQXZhaWxhYmxlUGx1Z2luQ29uc3RydWN0b3JzKHBsdWdpbnMpIHsKICAgICAgICB2YXIgcHJvY2Vzc2VkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBuZXcgU2V0KCk7CiAgICAgICAgcGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHsKICAgICAgICAgIGlmICghaXNQbHVnaW5Db25zdHJ1Y3RvcihwbHVnaW4pKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocHJvY2Vzc2VkLmhhcyhwbHVnaW4pKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBwcm9jZXNzZWQuYWRkKHBsdWdpbik7CgogICAgICAgICAgaWYgKHBsdWdpbi5wbHVnaW5OYW1lICYmICF0aGF0Ll9hdmFpbGFibGVQbHVnaW5zLmhhcyhwbHVnaW4ucGx1Z2luTmFtZSkpIHsKICAgICAgICAgICAgdGhhdC5fYXZhaWxhYmxlUGx1Z2lucy5zZXQocGx1Z2luLnBsdWdpbk5hbWUsIHBsdWdpbik7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHBsdWdpbi5yZXF1aXJlcykgewogICAgICAgICAgICBmaW5kQXZhaWxhYmxlUGx1Z2luQ29uc3RydWN0b3JzKHBsdWdpbi5yZXF1aXJlcywgcHJvY2Vzc2VkKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0UGx1Z2luQ29uc3RydWN0b3JzKHBsdWdpbnMpIHsKICAgICAgICB2YXIgcHJvY2Vzc2VkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBuZXcgU2V0KCk7CiAgICAgICAgcmV0dXJuIHBsdWdpbnMubWFwKGZ1bmN0aW9uIChwbHVnaW4pIHsKICAgICAgICAgIHJldHVybiBpc1BsdWdpbkNvbnN0cnVjdG9yKHBsdWdpbikgPyBwbHVnaW4gOiB0aGF0Ll9hdmFpbGFibGVQbHVnaW5zLmdldChwbHVnaW4pOwogICAgICAgIH0pLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCBwbHVnaW4pIHsKICAgICAgICAgIGlmIChwcm9jZXNzZWQuaGFzKHBsdWdpbikpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgIH0KCiAgICAgICAgICBwcm9jZXNzZWQuYWRkKHBsdWdpbik7CgogICAgICAgICAgaWYgKHBsdWdpbi5yZXF1aXJlcykgewogICAgICAgICAgICB2YWxpZGF0ZVBsdWdpbnMocGx1Z2luLnJlcXVpcmVzLCBwbHVnaW4pOwogICAgICAgICAgICBnZXRQbHVnaW5Db25zdHJ1Y3RvcnMocGx1Z2luLnJlcXVpcmVzLCBwcm9jZXNzZWQpLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbikgewogICAgICAgICAgICAgIHJldHVybiByZXN1bHQuYWRkKHBsdWdpbik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZXN1bHQuYWRkKHBsdWdpbik7CiAgICAgICAgfSwgbmV3IFNldCgpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdmFsaWRhdGVQbHVnaW5zKHBsdWdpbnMpIHsKICAgICAgICB2YXIgcGFyZW50UGx1Z2luQ29uc3RydWN0b3IgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7CiAgICAgICAgcGx1Z2lucy5tYXAoZnVuY3Rpb24gKHBsdWdpbikgewogICAgICAgICAgcmV0dXJuIGlzUGx1Z2luQ29uc3RydWN0b3IocGx1Z2luKSA/IHBsdWdpbiA6IHRoYXQuX2F2YWlsYWJsZVBsdWdpbnMuZ2V0KHBsdWdpbikgfHwgcGx1Z2luOwogICAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbikgewogICAgICAgICAgY2hlY2tNaXNzaW5nUGx1Z2luKHBsdWdpbiwgcGFyZW50UGx1Z2luQ29uc3RydWN0b3IpOwogICAgICAgICAgY2hlY2tDb250ZXh0UGx1Z2luKHBsdWdpbiwgcGFyZW50UGx1Z2luQ29uc3RydWN0b3IpOwogICAgICAgICAgY2hlY2tSZW1vdmVkUGx1Z2luKHBsdWdpbiwgcGFyZW50UGx1Z2luQ29uc3RydWN0b3IpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBmdW5jdGlvbiBjaGVja01pc3NpbmdQbHVnaW4ocGx1Z2luLCBwYXJlbnRQbHVnaW5Db25zdHJ1Y3RvcikgewogICAgICAgIGlmIChpc1BsdWdpbkNvbnN0cnVjdG9yKHBsdWdpbikpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChwYXJlbnRQbHVnaW5Db25zdHJ1Y3RvcikgewogICAgICAgICAgLyoqCiAgICAgICAgICAgKiBBIHJlcXVpcmVkICJzb2Z0IiBkZXBlbmRlbmN5IHdhcyBub3QgZm91bmQgb24gdGhlIHBsdWdpbiBsaXN0LgogICAgICAgICAgICoKICAgICAgICAgICAqIFdoZW4gY29uZmlndXJpbmcgdGhlIGVkaXRvciwgZWl0aGVyIHByaW9yIHRvIGJ1aWxkaW5nICh2aWEKICAgICAgICAgICAqIHtAbGluayBtb2R1bGU6Y29yZS9lZGl0b3IvZWRpdG9yfkVkaXRvci5idWlsdGluUGx1Z2lucyBgRWRpdG9yLmJ1aWx0aW5QbHVnaW5zYH0pIG9yIHdoZW4KICAgICAgICAgICAqIGNyZWF0aW5nIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBlZGl0b3IgKGUuZy4gdmlhCiAgICAgICAgICAgKiB7QGxpbmsgbW9kdWxlOmNvcmUvZWRpdG9yL2VkaXRvcmNvbmZpZ35FZGl0b3JDb25maWcjcGx1Z2lucyBgY29uZmlnLnBsdWdpbnNgfSksIHlvdSBuZWVkIHRvIHByb3ZpZGUKICAgICAgICAgICAqIHNvbWUgb2YgdGhlIGRlcGVuZGVuY2llcyBmb3Igb3RoZXIgcGx1Z2lucyB0aGF0IHlvdSB1c2VkLgogICAgICAgICAgICoKICAgICAgICAgICAqIFRoaXMgZXJyb3IgaXMgdGhyb3duIHdoZW4gb25lIG9mIHRoZXNlIGRlcGVuZGVuY2llcyB3YXMgbm90IHByb3ZpZGVkLiBUaGUgbmFtZSBvZiB0aGUgbWlzc2luZyBwbHVnaW4KICAgICAgICAgICAqIGNhbiBiZSBmb3VuZCBpbiBgbWlzc2luZ1BsdWdpbmAgYW5kIHRoZSBwbHVnaW4gdGhhdCByZXF1aXJlZCBpdCBpbiBgcmVxdWlyZWRCeWAuCiAgICAgICAgICAgKgogICAgICAgICAgICogSW4gb3JkZXIgdG8gcmVzb2x2ZSBpdCwgeW91IG5lZWQgdG8gaW1wb3J0IHRoZSBtaXNzaW5nIHBsdWdpbiBhbmQgYWRkIGl0IHRvIHRoZQogICAgICAgICAgICogY3VycmVudCBsaXN0IG9mIHBsdWdpbnMgKGBFZGl0b3IuYnVpbHRpblBsdWdpbnNgIG9yIGBjb25maWcucGx1Z2luc2AvYGNvbmZpZy5leHRyYVBsdWdpbnNgKS4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBTb2Z0IHJlcXVpcmVtZW50cyB3ZXJlIGludHJvZHVjZWQgaW4gdmVyc2lvbiAyNi4wLjAuIElmIHlvdSBoYXBwZW4gdG8gc3R1bWJsZSB1cG9uIHRoaXMgZXJyb3IKICAgICAgICAgICAqIHdoZW4gdXBncmFkaW5nIHRvIHZlcnNpb24gMjYuMC4wLCByZWFkIGFsc28gdGhlCiAgICAgICAgICAgKiB7QGdsaW5rIGJ1aWxkcy9ndWlkZXMvbWlncmF0aW9uL21pZ3JhdGlvbi10by0yNi4wLjAgTWlncmF0aW9uIHRvIDI2LjAuMH0gZ3VpZGUuCiAgICAgICAgICAgKgogICAgICAgICAgICogQGVycm9yIHBsdWdpbmNvbGxlY3Rpb24tc29mdC1yZXF1aXJlZAogICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG1pc3NpbmdQbHVnaW4gVGhlIG5hbWUgb2YgdGhlIHJlcXVpcmVkIHBsdWdpbi4KICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1aXJlZEJ5IFRoZSBuYW1lIG9mIHRoZSBwbHVnaW4gdGhhdCByZXF1aXJlcyB0aGUgb3RoZXIgcGx1Z2luLgogICAgICAgICAgICovCiAgICAgICAgICB0aHJvdyBuZXcgQ0tFZGl0b3JFcnJvcigncGx1Z2luY29sbGVjdGlvbi1zb2Z0LXJlcXVpcmVkJywgY29udGV4dCwgewogICAgICAgICAgICBtaXNzaW5nUGx1Z2luOiBwbHVnaW4sCiAgICAgICAgICAgIHJlcXVpcmVkQnk6IGdldFBsdWdpbk5hbWUocGFyZW50UGx1Z2luQ29uc3RydWN0b3IpCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQSBwbHVnaW4gaXMgbm90IGF2YWlsYWJsZSBhbmQgY291bGQgbm90IGJlIGxvYWRlZC4KICAgICAgICAgKgogICAgICAgICAqIFBsdWdpbiBjbGFzc2VzIChjb25zdHJ1Y3RvcnMpIG5lZWQgdG8gYmUgcHJvdmlkZWQgdG8gdGhlIGVkaXRvciBiZWZvcmUgdGhleSBjYW4gYmUgbG9hZGVkIGJ5IG5hbWUuCiAgICAgICAgICogVGhpcyBpcyB1c3VhbGx5IGRvbmUgaW4gQ0tFZGl0b3IgNSBidWlsZHMgYnkgc2V0dGluZyB0aGUge0BsaW5rIG1vZHVsZTpjb3JlL2VkaXRvci9lZGl0b3J+RWRpdG9yLmJ1aWx0aW5QbHVnaW5zfQogICAgICAgICAqIHByb3BlcnR5LgogICAgICAgICAqCiAgICAgICAgICogKipJZiB5b3Ugc2VlIHRoaXMgd2FybmluZyB3aGVuIHVzaW5nIG9uZSBvZiB0aGUge0BnbGluayBidWlsZHMvaW5kZXggQ0tFZGl0b3IgNSBCdWlsZHN9KiosIGl0IG1lYW5zCiAgICAgICAgICogdGhhdCB5b3UgdHJ5IHRvIGVuYWJsZSBhIHBsdWdpbiB3aGljaCB3YXMgbm90IGluY2x1ZGVkIGluIHRoYXQgYnVpbGQuIFRoaXMgbWF5IGJlIGR1ZSB0byBhIHR5cG8KICAgICAgICAgKiBpbiB0aGUgcGx1Z2luIG5hbWUgb3Igc2ltcGx5IGJlY2F1c2UgdGhhdCBwbHVnaW4gaXMgbm90IGEgcGFydCBvZiB0aGlzIGJ1aWxkLiBJbiB0aGUgbGF0dGVyIHNjZW5hcmlvLAogICAgICAgICAqIHJlYWQgbW9yZSBhYm91dCB7QGdsaW5rIGJ1aWxkcy9ndWlkZXMvZGV2ZWxvcG1lbnQvY3VzdG9tLWJ1aWxkcyBjdXN0b20gYnVpbGRzfS4KICAgICAgICAgKgogICAgICAgICAqICoqSWYgeW91IHNlZSB0aGlzIHdhcm5pbmcgd2hlbiB1c2luZyBvbmUgb2YgdGhlIGVkaXRvciBjcmVhdG9ycyBkaXJlY3RseSoqIChub3QgYSBidWlsZCksIHRoZW4gaXQgbWVhbnMKICAgICAgICAgKiB0aGF0IHlvdSB0cmllZCBsb2FkaW5nIHBsdWdpbnMgYnkgbmFtZS4gSG93ZXZlciwgdW5saWtlIENLRWRpdG9yIDQsIENLRWRpdG9yIDUgZG9lcyBub3QgaW1wbGVtZW50IGEgInBsdWdpbiBsb2FkZXIiLgogICAgICAgICAqIFRoaXMgbWVhbnMgdGhhdCBDS0VkaXRvciA1IGRvZXMgbm90IGtub3cgd2hlcmUgdG8gbG9hZCB0aGUgcGx1Z2luIG1vZHVsZXMgZnJvbS4gVGhlcmVmb3JlLCB5b3UgbmVlZCB0bwogICAgICAgICAqIHByb3ZpZGUgZWFjaCBwbHVnaW4gdGhyb3VnaCBhIHJlZmVyZW5jZSAoYXMgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbikuIENoZWNrIG91dCB0aGUgZXhhbXBsZXMgaW4KICAgICAgICAgKiB7QGdsaW5rIGJ1aWxkcy9ndWlkZXMvaW50ZWdyYXRpb24vYWR2YW5jZWQtc2V0dXAjc2NlbmFyaW8tMi1idWlsZGluZy1mcm9tLXNvdXJjZSAiQnVpbGRpbmcgZnJvbSBzb3VyY2UifS4KICAgICAgICAgKgogICAgICAgICAqIEBlcnJvciBwbHVnaW5jb2xsZWN0aW9uLXBsdWdpbi1ub3QtZm91bmQKICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGx1Z2luIFRoZSBuYW1lIG9mIHRoZSBwbHVnaW4gd2hpY2ggY291bGQgbm90IGJlIGxvYWRlZC4KICAgICAgICAgKi8KCgogICAgICAgIHRocm93IG5ldyBDS0VkaXRvckVycm9yKCdwbHVnaW5jb2xsZWN0aW9uLXBsdWdpbi1ub3QtZm91bmQnLCBjb250ZXh0LCB7CiAgICAgICAgICBwbHVnaW46IHBsdWdpbgogICAgICAgIH0pOwogICAgICB9CgogICAgICBmdW5jdGlvbiBjaGVja0NvbnRleHRQbHVnaW4ocGx1Z2luLCBwYXJlbnRQbHVnaW5Db25zdHJ1Y3RvcikgewogICAgICAgIGlmICghaXNDb250ZXh0UGx1Z2luKHBhcmVudFBsdWdpbkNvbnN0cnVjdG9yKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGlzQ29udGV4dFBsdWdpbihwbHVnaW4pKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIElmIGEgcGx1Z2luIGlzIGEgY29udGV4dCBwbHVnaW4sIGFsbCBwbHVnaW5zIGl0IHJlcXVpcmVzIHNob3VsZCBhbHNvIGJlIGNvbnRleHQgcGx1Z2lucwogICAgICAgICAqIGluc3RlYWQgb2YgcGx1Z2lucy4gSW4gb3RoZXIgd29yZHMsIGlmIG9uZSBwbHVnaW4gY2FuIGJlIHVzZWQgaW4gdGhlIGNvbnRleHQsCiAgICAgICAgICogYWxsIGl0cyByZXF1aXJlbWVudHMgc2hvdWxkIGFsc28gYmUgcmVhZHkgdG8gYmUgdXNlZCBpbiB0aGUgY29udGV4dC4gTm90ZSB0aGF0IHRoZSBjb250ZXh0CiAgICAgICAgICogcHJvdmlkZXMgb25seSBhIHBhcnQgb2YgdGhlIEFQSSBwcm92aWRlZCBieSB0aGUgZWRpdG9yLiBJZiBvbmUgcGx1Z2luIG5lZWRzIGEgZnVsbAogICAgICAgICAqIGVkaXRvciBBUEksIGFsbCBwbHVnaW5zIHdoaWNoIHJlcXVpcmUgaXQgYXJlIGNvbnNpZGVyZWQgYXMgcGx1Z2lucyB0aGF0IG5lZWQgYSBmdWxsCiAgICAgICAgICogZWRpdG9yIEFQSS4KICAgICAgICAgKgogICAgICAgICAqIEBlcnJvciBwbHVnaW5jb2xsZWN0aW9uLWNvbnRleHQtcmVxdWlyZWQKICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGx1Z2luIFRoZSBuYW1lIG9mIHRoZSByZXF1aXJlZCBwbHVnaW4uCiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVpcmVkQnkgVGhlIG5hbWUgb2YgdGhlIHBhcmVudCBwbHVnaW4uCiAgICAgICAgICovCgoKICAgICAgICB0aHJvdyBuZXcgQ0tFZGl0b3JFcnJvcigncGx1Z2luY29sbGVjdGlvbi1jb250ZXh0LXJlcXVpcmVkJywgY29udGV4dCwgewogICAgICAgICAgcGx1Z2luOiBnZXRQbHVnaW5OYW1lKHBsdWdpbiksCiAgICAgICAgICByZXF1aXJlZEJ5OiBnZXRQbHVnaW5OYW1lKHBhcmVudFBsdWdpbkNvbnN0cnVjdG9yKQogICAgICAgIH0pOwogICAgICB9CgogICAgICBmdW5jdGlvbiBjaGVja1JlbW92ZWRQbHVnaW4ocGx1Z2luLCBwYXJlbnRQbHVnaW5Db25zdHJ1Y3RvcikgewogICAgICAgIGlmICghcGFyZW50UGx1Z2luQ29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghaXNQbHVnaW5SZW1vdmVkKHBsdWdpbiwgcGx1Z2luc1RvUmVtb3ZlKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDYW5ub3QgbG9hZCBhIHBsdWdpbiBiZWNhdXNlIG9uZSBvZiBpdHMgZGVwZW5kZW5jaWVzIGlzIGxpc3RlZCBpbiB0aGUgYHJlbW92ZVBsdWdpbnNgIG9wdGlvbi4KICAgICAgICAgKgogICAgICAgICAqIEBlcnJvciBwbHVnaW5jb2xsZWN0aW9uLXJlcXVpcmVkCiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHBsdWdpbiBUaGUgbmFtZSBvZiB0aGUgcmVxdWlyZWQgcGx1Z2luLgogICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1aXJlZEJ5IFRoZSBuYW1lIG9mIHRoZSBwYXJlbnQgcGx1Z2luLgogICAgICAgICAqLwoKCiAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ3BsdWdpbmNvbGxlY3Rpb24tcmVxdWlyZWQnLCBjb250ZXh0LCB7CiAgICAgICAgICBwbHVnaW46IGdldFBsdWdpbk5hbWUocGx1Z2luKSwKICAgICAgICAgIHJlcXVpcmVkQnk6IGdldFBsdWdpbk5hbWUocGFyZW50UGx1Z2luQ29uc3RydWN0b3IpCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGxvYWRQbHVnaW5zKHBsdWdpbkNvbnN0cnVjdG9ycykgewogICAgICAgIHJldHVybiBwbHVnaW5Db25zdHJ1Y3RvcnMubWFwKGZ1bmN0aW9uIChQbHVnaW5Db25zdHJ1Y3RvcikgewogICAgICAgICAgdmFyIHBsdWdpbkluc3RhbmNlID0gdGhhdC5fY29udGV4dFBsdWdpbnMuZ2V0KFBsdWdpbkNvbnN0cnVjdG9yKSB8fCBuZXcgUGx1Z2luQ29uc3RydWN0b3IoY29udGV4dCk7CgogICAgICAgICAgdGhhdC5fYWRkKFBsdWdpbkNvbnN0cnVjdG9yLCBwbHVnaW5JbnN0YW5jZSk7CgogICAgICAgICAgcmV0dXJuIHBsdWdpbkluc3RhbmNlOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBmdW5jdGlvbiBpbml0UGx1Z2lucyhwbHVnaW5JbnN0YW5jZXMsIG1ldGhvZCkgewogICAgICAgIHJldHVybiBwbHVnaW5JbnN0YW5jZXMucmVkdWNlKGZ1bmN0aW9uIChwcm9taXNlLCBwbHVnaW4pIHsKICAgICAgICAgIGlmICghcGx1Z2luW21ldGhvZF0pIHsKICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoYXQuX2NvbnRleHRQbHVnaW5zLmhhcyhwbHVnaW4pKSB7CiAgICAgICAgICAgIHJldHVybiBwcm9taXNlOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4ocGx1Z2luW21ldGhvZF0uYmluZChwbHVnaW4pKTsKICAgICAgICB9LCBQcm9taXNlLnJlc29sdmUoKSk7CiAgICAgIH0gLy8gUmVwbGFjZXMgcGx1Z2luIGNvbnN0cnVjdG9ycyB3aXRoIHRoZSBzcGVjaWZpZWQgc2V0IG9mIHBsdWdpbnMuCiAgICAgIC8vCiAgICAgIC8vIEBwYXJhbSB7QXJyYXkuPEZ1bmN0aW9uPn0gcGx1Z2luQ29uc3RydWN0b3JzCiAgICAgIC8vIEBwYXJhbSB7QXJyYXkuPEZ1bmN0aW9uPn0gcGx1Z2luc1N1YnN0aXR1dGlvbnMKCgogICAgICBmdW5jdGlvbiBzdWJzdGl0dXRlUGx1Z2lucyhwbHVnaW5Db25zdHJ1Y3RvcnMsIHBsdWdpbnNTdWJzdGl0dXRpb25zKSB7CiAgICAgICAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihwbHVnaW5zU3Vic3RpdHV0aW9ucyksCiAgICAgICAgICAgIF9zdGVwNDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBwbHVnaW5JdGVtID0gX3N0ZXA0LnZhbHVlOwoKICAgICAgICAgICAgaWYgKHR5cGVvZiBwbHVnaW5JdGVtICE9ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBUaGUgcGx1Z2luIHJlcGxhY2luZyBhbiBleGlzdGluZyBwbHVnaW4gbXVzdCBiZSBhIGZ1bmN0aW9uLgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQGVycm9yIHBsdWdpbmNvbGxlY3Rpb24tcmVwbGFjZS1wbHVnaW4taW52YWxpZC10eXBlCiAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ3BsdWdpbmNvbGxlY3Rpb24tcmVwbGFjZS1wbHVnaW4taW52YWxpZC10eXBlJywgbnVsbCwgewogICAgICAgICAgICAgICAgcGx1Z2luSXRlbTogcGx1Z2luSXRlbQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgcGx1Z2luTmFtZSA9IHBsdWdpbkl0ZW0ucGx1Z2luTmFtZTsKCiAgICAgICAgICAgIGlmICghcGx1Z2luTmFtZSkgewogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIFRoZSBwbHVnaW4gcmVwbGFjaW5nIGFuIGV4aXN0aW5nIHBsdWdpbiBtdXN0IGhhdmUgYSBuYW1lLgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQGVycm9yIHBsdWdpbmNvbGxlY3Rpb24tcmVwbGFjZS1wbHVnaW4tbWlzc2luZy1uYW1lCiAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ3BsdWdpbmNvbGxlY3Rpb24tcmVwbGFjZS1wbHVnaW4tbWlzc2luZy1uYW1lJywgbnVsbCwgewogICAgICAgICAgICAgICAgcGx1Z2luSXRlbTogcGx1Z2luSXRlbQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocGx1Z2luSXRlbS5yZXF1aXJlcyAmJiBwbHVnaW5JdGVtLnJlcXVpcmVzLmxlbmd0aCkgewogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIFRoZSBwbHVnaW4gcmVwbGFjaW5nIGFuIGV4aXN0aW5nIHBsdWdpbiBjYW5ub3QgZGVwZW5kIG9uIG90aGVyIHBsdWdpbnMuCiAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgKiBAZXJyb3IgcGx1Z2luY29sbGVjdGlvbi1wbHVnaW4tZm9yLXJlcGxhY2luZy1jYW5ub3QtaGF2ZS1kZXBlbmRlbmNpZXMKICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICB0aHJvdyBuZXcgQ0tFZGl0b3JFcnJvcigncGx1Z2luY29sbGVjdGlvbi1wbHVnaW4tZm9yLXJlcGxhY2luZy1jYW5ub3QtaGF2ZS1kZXBlbmRlbmNpZXMnLCBudWxsLCB7CiAgICAgICAgICAgICAgICBwbHVnaW5OYW1lOiBwbHVnaW5OYW1lCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBwbHVnaW5Ub1JlcGxhY2UgPSB0aGF0Ll9hdmFpbGFibGVQbHVnaW5zLmdldChwbHVnaW5OYW1lKTsKCiAgICAgICAgICAgIGlmICghcGx1Z2luVG9SZXBsYWNlKSB7CiAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICogVGhlIHJlcGxhY2VkIHBsdWdpbiBkb2VzIG5vdCBleGlzdCBpbiB0aGUKICAgICAgICAgICAgICAgKiB7QGxpbmsgbW9kdWxlOmNvcmUvcGx1Z2luY29sbGVjdGlvbn5QbHVnaW5Db2xsZWN0aW9uIGF2YWlsYWJsZSBwbHVnaW5zfSBjb2xsZWN0aW9uLgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQGVycm9yIHBsdWdpbmNvbGxlY3Rpb24tcGx1Z2luLWZvci1yZXBsYWNpbmctbm90LWV4aXN0CiAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ3BsdWdpbmNvbGxlY3Rpb24tcGx1Z2luLWZvci1yZXBsYWNpbmctbm90LWV4aXN0JywgbnVsbCwgewogICAgICAgICAgICAgICAgcGx1Z2luTmFtZTogcGx1Z2luTmFtZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgaW5kZXhJblBsdWdpbkNvbnN0cnVjdG9ycyA9IHBsdWdpbkNvbnN0cnVjdG9ycy5pbmRleE9mKHBsdWdpblRvUmVwbGFjZSk7CgogICAgICAgICAgICBpZiAoaW5kZXhJblBsdWdpbkNvbnN0cnVjdG9ycyA9PT0gLTEpIHsKICAgICAgICAgICAgICAvLyBUaGUgQ29udGV4dCBmZWF0dXJlIGNhbiBzdWJzdGl0dXRlIHBsdWdpbnMgYXMgd2VsbC4KICAgICAgICAgICAgICAvLyBJdCBtYXkgaGFwcGVuIHRoYXQgdGhlIGVkaXRvciB3aWxsIGJlIGNyZWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCwgd2hlcmUgdGhlIHBsdWdpbiBmb3Igc3Vic3RpdHV0ZQogICAgICAgICAgICAgIC8vIHdhcyBhbHJlYWR5IHJlcGxhY2VkLiBJbiBzdWNoIGEgY2FzZSwgd2UgZG9uJ3Qgd2FudCB0byBkbyBpdCBhZ2Fpbi4KICAgICAgICAgICAgICBpZiAodGhhdC5fY29udGV4dFBsdWdpbnMuaGFzKHBsdWdpblRvUmVwbGFjZSkpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICogVGhlIHJlcGxhY2VkIHBsdWdpbiB3aWxsIG5vdCBiZSBsb2FkZWQgc28gaXQgY2Fubm90IGJlIHJlcGxhY2VkLgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQGVycm9yIHBsdWdpbmNvbGxlY3Rpb24tcGx1Z2luLWZvci1yZXBsYWNpbmctbm90LWxvYWRlZAogICAgICAgICAgICAgICAqLwoKCiAgICAgICAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ3BsdWdpbmNvbGxlY3Rpb24tcGx1Z2luLWZvci1yZXBsYWNpbmctbm90LWxvYWRlZCcsIG51bGwsIHsKICAgICAgICAgICAgICAgIHBsdWdpbk5hbWU6IHBsdWdpbk5hbWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHBsdWdpblRvUmVwbGFjZS5yZXF1aXJlcyAmJiBwbHVnaW5Ub1JlcGxhY2UucmVxdWlyZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICogVGhlIHJlcGxhY2VkIHBsdWdpbiBjYW5ub3QgZGVwZW5kIG9uIG90aGVyIHBsdWdpbnMuCiAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgKiBAZXJyb3IgcGx1Z2luY29sbGVjdGlvbi1yZXBsYWNlZC1wbHVnaW4tY2Fubm90LWhhdmUtZGVwZW5kZW5jaWVzCiAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ3BsdWdpbmNvbGxlY3Rpb24tcmVwbGFjZWQtcGx1Z2luLWNhbm5vdC1oYXZlLWRlcGVuZGVuY2llcycsIG51bGwsIHsKICAgICAgICAgICAgICAgIHBsdWdpbk5hbWU6IHBsdWdpbk5hbWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcGx1Z2luQ29uc3RydWN0b3JzLnNwbGljZShpbmRleEluUGx1Z2luQ29uc3RydWN0b3JzLCAxLCBwbHVnaW5JdGVtKTsKCiAgICAgICAgICAgIHRoYXQuX2F2YWlsYWJsZVBsdWdpbnMuc2V0KHBsdWdpbk5hbWUsIHBsdWdpbkl0ZW0pOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBEZXN0cm95cyBhbGwgbG9hZGVkIHBsdWdpbnMuCiAgICAgKgogICAgICogQHJldHVybnMge1Byb21pc2V9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZGVzdHJveSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsKICAgICAgdmFyIHByb21pc2VzID0gW107CgogICAgICB2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMpLAogICAgICAgICAgX3N0ZXA1OwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjUucygpOyAhKF9zdGVwNSA9IF9pdGVyYXRvcjUubigpKS5kb25lOykgewogICAgICAgICAgdmFyIF9zdGVwNSR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwNS52YWx1ZSwgMiksCiAgICAgICAgICAgICAgcGx1Z2luSW5zdGFuY2UgPSBfc3RlcDUkdmFsdWVbMV07CgogICAgICAgICAgaWYgKHR5cGVvZiBwbHVnaW5JbnN0YW5jZS5kZXN0cm95ID09ICdmdW5jdGlvbicgJiYgIXRoaXMuX2NvbnRleHRQbHVnaW5zLmhhcyhwbHVnaW5JbnN0YW5jZSkpIHsKICAgICAgICAgICAgcHJvbWlzZXMucHVzaChwbHVnaW5JbnN0YW5jZS5kZXN0cm95KCkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNS5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNS5mKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgdGhlIHBsdWdpbiB0byB0aGUgY29sbGVjdGlvbi4gRXhwb3NlZCBtYWlubHkgZm9yIHRlc3RpbmcgcHVycG9zZXMuCiAgICAgKgogICAgICogQHByb3RlY3RlZAogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gUGx1Z2luQ29uc3RydWN0b3IgVGhlIHBsdWdpbiBjb25zdHJ1Y3Rvci4KICAgICAqIEBwYXJhbSB7bW9kdWxlOmNvcmUvcGx1Z2luflBsdWdpbkludGVyZmFjZX0gcGx1Z2luIFRoZSBpbnN0YW5jZSBvZiB0aGUgcGx1Z2luLgogICAgICovCgogIH0sIHsKICAgIGtleTogIl9hZGQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hZGQoUGx1Z2luQ29uc3RydWN0b3IsIHBsdWdpbikgewogICAgICB0aGlzLl9wbHVnaW5zLnNldChQbHVnaW5Db25zdHJ1Y3RvciwgcGx1Z2luKTsKCiAgICAgIHZhciBwbHVnaW5OYW1lID0gUGx1Z2luQ29uc3RydWN0b3IucGx1Z2luTmFtZTsKCiAgICAgIGlmICghcGx1Z2luTmFtZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX3BsdWdpbnMuaGFzKHBsdWdpbk5hbWUpKSB7CiAgICAgICAgLyoqCiAgICAgICAgICogVHdvIHBsdWdpbnMgd2l0aCB0aGUgc2FtZSB7QGxpbmsgbW9kdWxlOmNvcmUvcGx1Z2luflBsdWdpbkludGVyZmFjZS5wbHVnaW5OYW1lfSB3ZXJlIGxvYWRlZC4KICAgICAgICAgKiBUaGlzIHdpbGwgbGVhZCB0byBydW50aW1lIGNvbmZsaWN0cyBiZXR3ZWVuIHRoZXNlIHBsdWdpbnMuCiAgICAgICAgICoKICAgICAgICAgKiBJbiBwcmFjdGljZSwgdGhpcyB3YXJuaW5nIHVzdWFsbHkgbWVhbnMgdGhhdCBuZXcgcGx1Z2lucyB3ZXJlIGFkZGVkIHRvIGFuIGV4aXN0aW5nIENLRWRpdG9yIDUgYnVpbGQuCiAgICAgICAgICogUGx1Z2lucyBzaG91bGQgYWx3YXlzIGJlIGFkZGVkIHRvIGEgc291cmNlIHZlcnNpb24gb2YgdGhlIGVkaXRvciAoYEBja2VkaXRvci9ja2VkaXRvcjUtZWRpdG9yLSpgKSwKICAgICAgICAgKiBub3QgdG8gYW4gZWRpdG9yIGltcG9ydGVkIGZyb20gb25lIG9mIHRoZSBgQGNrZWRpdG9yL2NrZWRpdG9yNS1idWlsZC0qYCBwYWNrYWdlcy4KICAgICAgICAgKgogICAgICAgICAqIENoZWNrIHlvdXIgaW1wb3J0IHBhdGhzIGFuZCB0aGUgbGlzdCBvZiBwbHVnaW5zIHBhc3NlZCB0bwogICAgICAgICAqIHtAbGluayBtb2R1bGU6Y29yZS9lZGl0b3IvZWRpdG9yfkVkaXRvci5jcmVhdGUgYEVkaXRvci5jcmVhdGUoKWB9CiAgICAgICAgICogb3Igc3BlY2lmaWVkIGluIHtAbGluayBtb2R1bGU6Y29yZS9lZGl0b3IvZWRpdG9yfkVkaXRvci5idWlsdGluUGx1Z2lucyBgRWRpdG9yLmJ1aWx0aW5QbHVnaW5zYH0uCiAgICAgICAgICoKICAgICAgICAgKiBUaGUgc2Vjb25kIG9wdGlvbiBpcyB0aGF0IHlvdXIgYG5vZGVfbW9kdWxlcy9gIGRpcmVjdG9yeSBjb250YWlucyBkdXBsaWNhdGVkIHZlcnNpb25zIG9mIHRoZSBzYW1lCiAgICAgICAgICogQ0tFZGl0b3IgNSBwYWNrYWdlcy4gTm9ybWFsbHksIG9uIGNsZWFuIGluc3RhbGxhdGlvbnMsIG5wbSBkZWR1cGxpY2F0ZXMgcGFja2FnZXMgaW4gYG5vZGVfbW9kdWxlcy9gLCBzbwogICAgICAgICAqIGl0IG1heSBiZSBlbm91Z2ggdG8gY2FsbCBgcm0gLXJmIG5vZGVfbW9kdWxlcyAmJiBucG0gaWAuIEhvd2V2ZXIsIGlmIHlvdSBpbnN0YWxsZWQgY29uZmxpY3RpbmcgdmVyc2lvbnMKICAgICAgICAgKiBvZiBzb21lIHBhY2thZ2VzLCB0aGVpciBkZXBlbmRlbmNpZXMgbWF5IG5lZWQgdG8gYmUgaW5zdGFsbGVkIGluIG1vcmUgdGhhbiBvbmUgdmVyc2lvbiB3aGljaCBtYXkgbGVhZCB0byB0aGlzCiAgICAgICAgICogd2FybmluZy4KICAgICAgICAgKgogICAgICAgICAqIFRlY2huaWNhbGx5IHNwZWFraW5nLCB0aGlzIGVycm9yIG9jY3VycyBiZWNhdXNlIGFmdGVyIGFkZGluZyBhIHBsdWdpbiB0byBhbiBleGlzdGluZyBlZGl0b3IgYnVpbGQKICAgICAgICAgKiB0aGUgZGVwZW5kZW5jaWVzIG9mIHRoaXMgcGx1Z2luIGFyZSBiZWluZyBkdXBsaWNhdGVkLgogICAgICAgICAqIFRoZXkgYXJlIGFscmVhZHkgYnVpbHQgaW50byB0aGF0IGVkaXRvciBidWlsZCBhbmQgbm93IGdldCBhZGRlZCBmb3IgdGhlIHNlY29uZCB0aW1lIGFzIGRlcGVuZGVuY2llcwogICAgICAgICAqIG9mIHRoZSBwbHVnaW4geW91IGFyZSBpbnN0YWxsaW5nLgogICAgICAgICAqCiAgICAgICAgICogUmVhZCBtb3JlIGFib3V0IHtAZ2xpbmsgYnVpbGRzL2d1aWRlcy9pbnRlZ3JhdGlvbi9pbnN0YWxsaW5nLXBsdWdpbnMgaW5zdGFsbGluZyBwbHVnaW5zfS4KICAgICAgICAgKgogICAgICAgICAqIEBlcnJvciBwbHVnaW5jb2xsZWN0aW9uLXBsdWdpbi1uYW1lLWNvbmZsaWN0CiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHBsdWdpbk5hbWUgVGhlIGR1cGxpY2F0ZWQgcGx1Z2luIG5hbWUuCiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcGx1Z2luMSBUaGUgZmlyc3QgcGx1Z2luIGNvbnN0cnVjdG9yLgogICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHBsdWdpbjIgVGhlIHNlY29uZCBwbHVnaW4gY29uc3RydWN0b3IuCiAgICAgICAgICovCiAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ3BsdWdpbmNvbGxlY3Rpb24tcGx1Z2luLW5hbWUtY29uZmxpY3QnLCBudWxsLCB7CiAgICAgICAgICBwbHVnaW5OYW1lOiBwbHVnaW5OYW1lLAogICAgICAgICAgcGx1Z2luMTogdGhpcy5fcGx1Z2lucy5nZXQocGx1Z2luTmFtZSkuY29uc3RydWN0b3IsCiAgICAgICAgICBwbHVnaW4yOiBQbHVnaW5Db25zdHJ1Y3RvcgogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLl9wbHVnaW5zLnNldChwbHVnaW5OYW1lLCBwbHVnaW4pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBsdWdpbkNvbGxlY3Rpb247Cn0oKTsKCmV4cG9ydCB7IFBsdWdpbkNvbGxlY3Rpb24gYXMgZGVmYXVsdCB9OwptaXgoUGx1Z2luQ29sbGVjdGlvbiwgRW1pdHRlck1peGluKTs="},{"version":3,"sources":["/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-core/src/plugincollection.js"],"names":["CKEditorError","EmitterMixin","mix","PluginCollection","context","availablePlugins","contextPlugins","_context","_plugins","Map","_availablePlugins","PluginConstructor","pluginName","set","_contextPlugins","pluginInstance","Symbol","iterator","entry","key","plugin","get","name","has","plugins","pluginsToRemove","pluginsSubstitutions","that","findAvailablePluginConstructors","validatePlugins","pluginsToLoad","filter","isPluginRemoved","pluginConstructors","getPluginConstructors","substitutePlugins","pluginInstances","loadPlugins","initPlugins","then","isPluginConstructor","isContextPlugin","some","removedPlugin","getPluginName","processed","Set","forEach","add","requires","map","reduce","result","parentPluginConstructor","checkMissingPlugin","checkContextPlugin","checkRemovedPlugin","missingPlugin","requiredBy","_add","method","promise","bind","Promise","resolve","pluginItem","length","pluginToReplace","indexInPluginConstructors","indexOf","splice","promises","destroy","push","all","plugin1","constructor","plugin2"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module core/plugincollection\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport EmitterMixin from '@ckeditor/ckeditor5-utils/src/emittermixin';\nimport mix from '@ckeditor/ckeditor5-utils/src/mix';\n\n/**\n * Manages a list of CKEditor plugins, including loading, resolving dependencies and initialization.\n *\n * @mixes module:utils/emittermixin~EmitterMixin\n */\nexport default class PluginCollection {\n\t/**\n\t * Creates an instance of the plugin collection class.\n\t * Allows loading and initializing plugins and their dependencies.\n\t * Allows providing a list of already loaded plugins. These plugins will not be destroyed along with this collection.\n\t *\n\t * @param {module:core/editor/editor~Editor|module:core/context~Context} context\n\t * @param {Array.<Function>} [availablePlugins] Plugins (constructors) which the collection will be able to use\n\t * when {@link module:core/plugincollection~PluginCollection#init} is used with the plugin names (strings, instead of constructors).\n\t * Usually, the editor will pass its built-in plugins to the collection so they can later be\n\t * used in `config.plugins` or `config.removePlugins` by names.\n\t * @param {Iterable.<Array>} contextPlugins A list of already initialized plugins represented by a\n\t * `[ PluginConstructor, pluginInstance ]` pair.\n\t */\n\tconstructor( context, availablePlugins = [], contextPlugins = [] ) {\n\t\t/**\n\t\t * @protected\n\t\t * @type {module:core/editor/editor~Editor|module:core/context~Context}\n\t\t */\n\t\tthis._context = context;\n\n\t\t/**\n\t\t * @protected\n\t\t * @type {Map}\n\t\t */\n\t\tthis._plugins = new Map();\n\n\t\t/**\n\t\t * A map of plugin constructors that can be retrieved by their names.\n\t\t *\n\t\t * @protected\n\t\t * @type {Map.<String|Function,Function>}\n\t\t */\n\t\tthis._availablePlugins = new Map();\n\n\t\tfor ( const PluginConstructor of availablePlugins ) {\n\t\t\tif ( PluginConstructor.pluginName ) {\n\t\t\t\tthis._availablePlugins.set( PluginConstructor.pluginName, PluginConstructor );\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Map of {@link module:core/contextplugin~ContextPlugin context plugins} which can be retrieved by their constructors or instances.\n\t\t *\n\t\t * @protected\n\t\t * @type {Map<Function,Function>}\n\t\t */\n\t\tthis._contextPlugins = new Map();\n\n\t\tfor ( const [ PluginConstructor, pluginInstance ] of contextPlugins ) {\n\t\t\tthis._contextPlugins.set( PluginConstructor, pluginInstance );\n\t\t\tthis._contextPlugins.set( pluginInstance, PluginConstructor );\n\n\t\t\t// To make it possible to require a plugin by its name.\n\t\t\tif ( PluginConstructor.pluginName ) {\n\t\t\t\tthis._availablePlugins.set( PluginConstructor.pluginName, PluginConstructor );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Iterable interface.\n\t *\n\t * Returns `[ PluginConstructor, pluginInstance ]` pairs.\n\t *\n\t * @returns {Iterable.<Array>}\n\t */\n\t* [ Symbol.iterator ]() {\n\t\tfor ( const entry of this._plugins ) {\n\t\t\tif ( typeof entry[ 0 ] == 'function' ) {\n\t\t\t\tyield entry;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets the plugin instance by its constructor or name.\n\t *\n\t *\t\t// Check if 'Clipboard' plugin was loaded.\n\t *\t\tif ( editor.plugins.has( 'ClipboardPipeline' ) ) {\n\t *\t\t\t// Get clipboard plugin instance\n\t *\t\t\tconst clipboard = editor.plugins.get( 'ClipboardPipeline' );\n\t *\n\t *\t\t\tthis.listenTo( clipboard, 'inputTransformation', ( evt, data ) => {\n\t *\t\t\t\t// Do something on clipboard input.\n\t *\t\t\t} );\n\t *\t\t}\n\t *\n\t * **Note**: This method will throw an error if a plugin is not loaded. Use `{@link #has editor.plugins.has()}`\n\t * to check if a plugin is available.\n\t *\n\t * @param {Function|String} key The plugin constructor or {@link module:core/plugin~PluginInterface.pluginName name}.\n\t * @returns {module:core/plugin~PluginInterface}\n\t */\n\tget( key ) {\n\t\tconst plugin = this._plugins.get( key );\n\n\t\tif ( !plugin ) {\n\t\t\tlet pluginName = key;\n\n\t\t\tif ( typeof key == 'function' ) {\n\t\t\t\tpluginName = key.pluginName || key.name;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * The plugin is not loaded and could not be obtained.\n\t\t\t *\n\t\t\t * Plugin classes (constructors) need to be provided to the editor and must be loaded before they can be obtained from\n\t\t\t * the plugin collection.\n\t\t\t * This is usually done in CKEditor 5 builds by setting the {@link module:core/editor/editor~Editor.builtinPlugins}\n\t\t\t * property.\n\t\t\t *\n\t\t\t * **Note**: You can use `{@link module:core/plugincollection~PluginCollection#has editor.plugins.has()}`\n\t\t\t * to check if a plugin was loaded.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-not-loaded\n\t\t\t * @param {String} plugin The name of the plugin which is not loaded.\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'plugincollection-plugin-not-loaded', this._context, { plugin: pluginName } );\n\t\t}\n\n\t\treturn plugin;\n\t}\n\n\t/**\n\t * Checks if a plugin is loaded.\n\t *\n\t *\t\t// Check if the 'Clipboard' plugin was loaded.\n\t *\t\tif ( editor.plugins.has( 'ClipboardPipeline' ) ) {\n\t *\t\t\t// Now use the clipboard plugin instance:\n\t *\t\t\tconst clipboard = editor.plugins.get( 'ClipboardPipeline' );\n\t *\n\t *\t\t\t// ...\n\t *\t\t}\n\t *\n\t * @param {Function|String} key The plugin constructor or {@link module:core/plugin~PluginInterface.pluginName name}.\n\t * @returns {Boolean}\n\t */\n\thas( key ) {\n\t\treturn this._plugins.has( key );\n\t}\n\n\t/**\n\t * Initializes a set of plugins and adds them to the collection.\n\t *\n\t * @param {Array.<Function|String>} plugins An array of {@link module:core/plugin~PluginInterface plugin constructors}\n\t * or {@link module:core/plugin~PluginInterface.pluginName plugin names}.\n\t * @param {Array.<String|Function>} [pluginsToRemove] Names of the plugins or plugin constructors\n\t * that should not be loaded (despite being specified in the `plugins` array).\n\t * @param {Array.<Function>} [pluginsSubstitutions] An array of {@link module:core/plugin~PluginInterface plugin constructors}\n\t * that will be used to replace plugins of the same names that were passed in `plugins` or that are in their dependency tree.\n\t * A useful option for replacing built-in plugins while creating tests (for mocking their APIs). Plugins that will be replaced\n\t * must follow these rules:\n\t *   * The new plugin must be a class.\n\t *   * The new plugin must be named.\n\t *   * Both plugins must not depend on other plugins.\n\t * @returns {Promise.<module:core/plugin~LoadedPlugins>} A promise which gets resolved once all plugins are loaded\n\t * and available in the collection.\n\t */\n\tinit( plugins, pluginsToRemove = [], pluginsSubstitutions = [] ) {\n\t\t// Plugin initialization procedure consists of 2 main steps:\n\t\t// 1) collecting all available plugin constructors,\n\t\t// 2) verification whether all required plugins can be instantiated.\n\t\t//\n\t\t// In the first step, all plugin constructors, available in the provided `plugins` array and inside\n\t\t// plugin's dependencies (from the `Plugin.requires` array), are recursively collected and added to the existing\n\t\t// `this._availablePlugins` map, but without any verification at the given moment. Performing the verification\n\t\t// at this point (during the plugin constructor searching) would cause false errors to occur, that some plugin\n\t\t// is missing but in fact it may be defined further in the array as the dependency of other plugin. After\n\t\t// traversing the entire dependency tree, it will be checked if all required \"top level\" plugins are available.\n\t\t//\n\t\t// In the second step, the list of plugins that have not been explicitly removed is traversed to get all the\n\t\t// plugin constructors to be instantiated in the correct order and to validate against some rules. Finally, if\n\t\t// no plugin is missing and no other error has been found, they all will be instantiated.\n\t\tconst that = this;\n\t\tconst context = this._context;\n\n\t\tfindAvailablePluginConstructors( plugins );\n\n\t\tvalidatePlugins( plugins );\n\n\t\tconst pluginsToLoad = plugins.filter( plugin => !isPluginRemoved( plugin, pluginsToRemove ) );\n\n\t\tconst pluginConstructors = [ ...getPluginConstructors( pluginsToLoad ) ];\n\n\t\tsubstitutePlugins( pluginConstructors, pluginsSubstitutions );\n\n\t\tconst pluginInstances = loadPlugins( pluginConstructors );\n\n\t\treturn initPlugins( pluginInstances, 'init' )\n\t\t\t.then( () => initPlugins( pluginInstances, 'afterInit' ) )\n\t\t\t.then( () => pluginInstances );\n\n\t\tfunction isPluginConstructor( plugin ) {\n\t\t\treturn typeof plugin === 'function';\n\t\t}\n\n\t\tfunction isContextPlugin( plugin ) {\n\t\t\treturn isPluginConstructor( plugin ) && plugin.isContextPlugin;\n\t\t}\n\n\t\tfunction isPluginRemoved( plugin, pluginsToRemove ) {\n\t\t\treturn pluginsToRemove.some( removedPlugin => {\n\t\t\t\tif ( removedPlugin === plugin ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif ( getPluginName( plugin ) === removedPlugin ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif ( getPluginName( removedPlugin ) === plugin ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t} );\n\t\t}\n\n\t\tfunction getPluginName( plugin ) {\n\t\t\treturn isPluginConstructor( plugin ) ?\n\t\t\t\tplugin.pluginName || plugin.name :\n\t\t\t\tplugin;\n\t\t}\n\n\t\tfunction findAvailablePluginConstructors( plugins, processed = new Set() ) {\n\t\t\tplugins.forEach( plugin => {\n\t\t\t\tif ( !isPluginConstructor( plugin ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( processed.has( plugin ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tprocessed.add( plugin );\n\n\t\t\t\tif ( plugin.pluginName && !that._availablePlugins.has( plugin.pluginName ) ) {\n\t\t\t\t\tthat._availablePlugins.set( plugin.pluginName, plugin );\n\t\t\t\t}\n\n\t\t\t\tif ( plugin.requires ) {\n\t\t\t\t\tfindAvailablePluginConstructors( plugin.requires, processed );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction getPluginConstructors( plugins, processed = new Set() ) {\n\t\t\treturn plugins\n\t\t\t\t.map( plugin => {\n\t\t\t\t\treturn isPluginConstructor( plugin ) ?\n\t\t\t\t\t\tplugin :\n\t\t\t\t\t\tthat._availablePlugins.get( plugin );\n\t\t\t\t} )\n\t\t\t\t.reduce( ( result, plugin ) => {\n\t\t\t\t\tif ( processed.has( plugin ) ) {\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\n\t\t\t\t\tprocessed.add( plugin );\n\n\t\t\t\t\tif ( plugin.requires ) {\n\t\t\t\t\t\tvalidatePlugins( plugin.requires, plugin );\n\n\t\t\t\t\t\tgetPluginConstructors( plugin.requires, processed ).forEach( plugin => result.add( plugin ) );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn result.add( plugin );\n\t\t\t\t}, new Set() );\n\t\t}\n\n\t\tfunction validatePlugins( plugins, parentPluginConstructor = null ) {\n\t\t\tplugins\n\t\t\t\t.map( plugin => {\n\t\t\t\t\treturn isPluginConstructor( plugin ) ?\n\t\t\t\t\t\tplugin :\n\t\t\t\t\t\tthat._availablePlugins.get( plugin ) || plugin;\n\t\t\t\t} )\n\t\t\t\t.forEach( plugin => {\n\t\t\t\t\tcheckMissingPlugin( plugin, parentPluginConstructor );\n\t\t\t\t\tcheckContextPlugin( plugin, parentPluginConstructor );\n\t\t\t\t\tcheckRemovedPlugin( plugin, parentPluginConstructor );\n\t\t\t\t} );\n\t\t}\n\n\t\tfunction checkMissingPlugin( plugin, parentPluginConstructor ) {\n\t\t\tif ( isPluginConstructor( plugin ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( parentPluginConstructor ) {\n\t\t\t\t/**\n\t\t\t\t * A required \"soft\" dependency was not found on the plugin list.\n\t\t\t\t *\n\t\t\t\t * When configuring the editor, either prior to building (via\n\t\t\t\t * {@link module:core/editor/editor~Editor.builtinPlugins `Editor.builtinPlugins`}) or when\n\t\t\t\t * creating a new instance of the editor (e.g. via\n\t\t\t\t * {@link module:core/editor/editorconfig~EditorConfig#plugins `config.plugins`}), you need to provide\n\t\t\t\t * some of the dependencies for other plugins that you used.\n\t\t\t\t *\n\t\t\t\t * This error is thrown when one of these dependencies was not provided. The name of the missing plugin\n\t\t\t\t * can be found in `missingPlugin` and the plugin that required it in `requiredBy`.\n\t\t\t\t *\n\t\t\t\t * In order to resolve it, you need to import the missing plugin and add it to the\n\t\t\t\t * current list of plugins (`Editor.builtinPlugins` or `config.plugins`/`config.extraPlugins`).\n\t\t\t\t *\n\t\t\t\t * Soft requirements were introduced in version 26.0.0. If you happen to stumble upon this error\n\t\t\t\t * when upgrading to version 26.0.0, read also the\n\t\t\t\t * {@glink builds/guides/migration/migration-to-26.0.0 Migration to 26.0.0} guide.\n\t\t\t\t *\n\t\t\t\t * @error plugincollection-soft-required\n\t\t\t\t * @param {String} missingPlugin The name of the required plugin.\n\t\t\t\t * @param {String} requiredBy The name of the plugin that requires the other plugin.\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'plugincollection-soft-required',\n\t\t\t\t\tcontext,\n\t\t\t\t\t{ missingPlugin: plugin, requiredBy: getPluginName( parentPluginConstructor ) }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * A plugin is not available and could not be loaded.\n\t\t\t *\n\t\t\t * Plugin classes (constructors) need to be provided to the editor before they can be loaded by name.\n\t\t\t * This is usually done in CKEditor 5 builds by setting the {@link module:core/editor/editor~Editor.builtinPlugins}\n\t\t\t * property.\n\t\t\t *\n\t\t\t * **If you see this warning when using one of the {@glink builds/index CKEditor 5 Builds}**, it means\n\t\t\t * that you try to enable a plugin which was not included in that build. This may be due to a typo\n\t\t\t * in the plugin name or simply because that plugin is not a part of this build. In the latter scenario,\n\t\t\t * read more about {@glink builds/guides/development/custom-builds custom builds}.\n\t\t\t *\n\t\t\t * **If you see this warning when using one of the editor creators directly** (not a build), then it means\n\t\t\t * that you tried loading plugins by name. However, unlike CKEditor 4, CKEditor 5 does not implement a \"plugin loader\".\n\t\t\t * This means that CKEditor 5 does not know where to load the plugin modules from. Therefore, you need to\n\t\t\t * provide each plugin through a reference (as a constructor function). Check out the examples in\n\t\t\t * {@glink builds/guides/integration/advanced-setup#scenario-2-building-from-source \"Building from source\"}.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-not-found\n\t\t\t * @param {String} plugin The name of the plugin which could not be loaded.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'plugincollection-plugin-not-found',\n\t\t\t\tcontext,\n\t\t\t\t{ plugin }\n\t\t\t);\n\t\t}\n\n\t\tfunction checkContextPlugin( plugin, parentPluginConstructor ) {\n\t\t\tif ( !isContextPlugin( parentPluginConstructor ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isContextPlugin( plugin ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * If a plugin is a context plugin, all plugins it requires should also be context plugins\n\t\t\t * instead of plugins. In other words, if one plugin can be used in the context,\n\t\t\t * all its requirements should also be ready to be used in the context. Note that the context\n\t\t\t * provides only a part of the API provided by the editor. If one plugin needs a full\n\t\t\t * editor API, all plugins which require it are considered as plugins that need a full\n\t\t\t * editor API.\n\t\t\t *\n\t\t\t * @error plugincollection-context-required\n\t\t\t * @param {String} plugin The name of the required plugin.\n\t\t\t * @param {String} requiredBy The name of the parent plugin.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'plugincollection-context-required',\n\t\t\t\tcontext,\n\t\t\t\t{ plugin: getPluginName( plugin ), requiredBy: getPluginName( parentPluginConstructor ) }\n\t\t\t);\n\t\t}\n\n\t\tfunction checkRemovedPlugin( plugin, parentPluginConstructor ) {\n\t\t\tif ( !parentPluginConstructor ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( !isPluginRemoved( plugin, pluginsToRemove ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Cannot load a plugin because one of its dependencies is listed in the `removePlugins` option.\n\t\t\t *\n\t\t\t * @error plugincollection-required\n\t\t\t * @param {String} plugin The name of the required plugin.\n\t\t\t * @param {String} requiredBy The name of the parent plugin.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'plugincollection-required',\n\t\t\t\tcontext,\n\t\t\t\t{ plugin: getPluginName( plugin ), requiredBy: getPluginName( parentPluginConstructor ) }\n\t\t\t);\n\t\t}\n\n\t\tfunction loadPlugins( pluginConstructors ) {\n\t\t\treturn pluginConstructors.map( PluginConstructor => {\n\t\t\t\tconst pluginInstance = that._contextPlugins.get( PluginConstructor ) || new PluginConstructor( context );\n\n\t\t\t\tthat._add( PluginConstructor, pluginInstance );\n\n\t\t\t\treturn pluginInstance;\n\t\t\t} );\n\t\t}\n\n\t\tfunction initPlugins( pluginInstances, method ) {\n\t\t\treturn pluginInstances.reduce( ( promise, plugin ) => {\n\t\t\t\tif ( !plugin[ method ] ) {\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\n\t\t\t\tif ( that._contextPlugins.has( plugin ) ) {\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\n\t\t\t\treturn promise.then( plugin[ method ].bind( plugin ) );\n\t\t\t}, Promise.resolve() );\n\t\t}\n\n\t\t// Replaces plugin constructors with the specified set of plugins.\n\t\t//\n\t\t// @param {Array.<Function>} pluginConstructors\n\t\t// @param {Array.<Function>} pluginsSubstitutions\n\t\tfunction substitutePlugins( pluginConstructors, pluginsSubstitutions ) {\n\t\t\tfor ( const pluginItem of pluginsSubstitutions ) {\n\t\t\t\tif ( typeof pluginItem != 'function' ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * The plugin replacing an existing plugin must be a function.\n\t\t\t\t\t *\n\t\t\t\t\t * @error plugincollection-replace-plugin-invalid-type\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError( 'plugincollection-replace-plugin-invalid-type', null, { pluginItem } );\n\t\t\t\t}\n\t\t\t\tconst pluginName = pluginItem.pluginName;\n\n\t\t\t\tif ( !pluginName ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * The plugin replacing an existing plugin must have a name.\n\t\t\t\t\t *\n\t\t\t\t\t * @error plugincollection-replace-plugin-missing-name\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError( 'plugincollection-replace-plugin-missing-name', null, { pluginItem } );\n\t\t\t\t}\n\n\t\t\t\tif ( pluginItem.requires && pluginItem.requires.length ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * The plugin replacing an existing plugin cannot depend on other plugins.\n\t\t\t\t\t *\n\t\t\t\t\t * @error plugincollection-plugin-for-replacing-cannot-have-dependencies\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError( 'plugincollection-plugin-for-replacing-cannot-have-dependencies', null, { pluginName } );\n\t\t\t\t}\n\n\t\t\t\tconst pluginToReplace = that._availablePlugins.get( pluginName );\n\n\t\t\t\tif ( !pluginToReplace ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * The replaced plugin does not exist in the\n\t\t\t\t\t * {@link module:core/plugincollection~PluginCollection available plugins} collection.\n\t\t\t\t\t *\n\t\t\t\t\t * @error plugincollection-plugin-for-replacing-not-exist\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError( 'plugincollection-plugin-for-replacing-not-exist', null, { pluginName } );\n\t\t\t\t}\n\n\t\t\t\tconst indexInPluginConstructors = pluginConstructors.indexOf( pluginToReplace );\n\n\t\t\t\tif ( indexInPluginConstructors === -1 ) {\n\t\t\t\t\t// The Context feature can substitute plugins as well.\n\t\t\t\t\t// It may happen that the editor will be created with the given context, where the plugin for substitute\n\t\t\t\t\t// was already replaced. In such a case, we don't want to do it again.\n\t\t\t\t\tif ( that._contextPlugins.has( pluginToReplace ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t/**\n\t\t\t\t\t * The replaced plugin will not be loaded so it cannot be replaced.\n\t\t\t\t\t *\n\t\t\t\t\t * @error plugincollection-plugin-for-replacing-not-loaded\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError( 'plugincollection-plugin-for-replacing-not-loaded', null, { pluginName } );\n\t\t\t\t}\n\n\t\t\t\tif ( pluginToReplace.requires && pluginToReplace.requires.length ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * The replaced plugin cannot depend on other plugins.\n\t\t\t\t\t *\n\t\t\t\t\t * @error plugincollection-replaced-plugin-cannot-have-dependencies\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError( 'plugincollection-replaced-plugin-cannot-have-dependencies', null, { pluginName } );\n\t\t\t\t}\n\n\t\t\t\tpluginConstructors.splice( indexInPluginConstructors, 1, pluginItem );\n\t\t\t\tthat._availablePlugins.set( pluginName, pluginItem );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Destroys all loaded plugins.\n\t *\n\t * @returns {Promise}\n\t */\n\tdestroy() {\n\t\tconst promises = [];\n\n\t\tfor ( const [ , pluginInstance ] of this ) {\n\t\t\tif ( typeof pluginInstance.destroy == 'function' && !this._contextPlugins.has( pluginInstance ) ) {\n\t\t\t\tpromises.push( pluginInstance.destroy() );\n\t\t\t}\n\t\t}\n\n\t\treturn Promise.all( promises );\n\t}\n\n\t/**\n\t * Adds the plugin to the collection. Exposed mainly for testing purposes.\n\t *\n\t * @protected\n\t * @param {Function} PluginConstructor The plugin constructor.\n\t * @param {module:core/plugin~PluginInterface} plugin The instance of the plugin.\n\t */\n\t_add( PluginConstructor, plugin ) {\n\t\tthis._plugins.set( PluginConstructor, plugin );\n\n\t\tconst pluginName = PluginConstructor.pluginName;\n\n\t\tif ( !pluginName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this._plugins.has( pluginName ) ) {\n\t\t\t/**\n\t\t\t * Two plugins with the same {@link module:core/plugin~PluginInterface.pluginName} were loaded.\n\t\t\t * This will lead to runtime conflicts between these plugins.\n\t\t\t *\n\t\t\t * In practice, this warning usually means that new plugins were added to an existing CKEditor 5 build.\n\t\t\t * Plugins should always be added to a source version of the editor (`@ckeditor/ckeditor5-editor-*`),\n\t\t\t * not to an editor imported from one of the `@ckeditor/ckeditor5-build-*` packages.\n\t\t\t *\n\t\t\t * Check your import paths and the list of plugins passed to\n\t\t\t * {@link module:core/editor/editor~Editor.create `Editor.create()`}\n\t\t\t * or specified in {@link module:core/editor/editor~Editor.builtinPlugins `Editor.builtinPlugins`}.\n\t\t\t *\n\t\t\t * The second option is that your `node_modules/` directory contains duplicated versions of the same\n\t\t\t * CKEditor 5 packages. Normally, on clean installations, npm deduplicates packages in `node_modules/`, so\n\t\t\t * it may be enough to call `rm -rf node_modules && npm i`. However, if you installed conflicting versions\n\t\t\t * of some packages, their dependencies may need to be installed in more than one version which may lead to this\n\t\t\t * warning.\n\t\t\t *\n\t\t\t * Technically speaking, this error occurs because after adding a plugin to an existing editor build\n\t\t\t * the dependencies of this plugin are being duplicated.\n\t\t\t * They are already built into that editor build and now get added for the second time as dependencies\n\t\t\t * of the plugin you are installing.\n\t\t\t *\n\t\t\t * Read more about {@glink builds/guides/integration/installing-plugins installing plugins}.\n\t\t\t *\n\t\t\t * @error plugincollection-plugin-name-conflict\n\t\t\t * @param {String} pluginName The duplicated plugin name.\n\t\t\t * @param {Function} plugin1 The first plugin constructor.\n\t\t\t * @param {Function} plugin2 The second plugin constructor.\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'plugincollection-plugin-name-conflict',\n\t\t\t\tnull,\n\t\t\t\t{ pluginName, plugin1: this._plugins.get( pluginName ).constructor, plugin2: PluginConstructor }\n\t\t\t);\n\t\t}\n\n\t\tthis._plugins.set( pluginName, plugin );\n\t}\n}\n\nmix( PluginCollection, EmitterMixin );\n"]}]}