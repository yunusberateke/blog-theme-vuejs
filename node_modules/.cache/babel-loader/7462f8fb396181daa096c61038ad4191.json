{"remainingRequest":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js?{}!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/view/position.js","dependencies":[{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/view/position.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS9la2ViZXJhdC9ZYW5kZXguRGlzay9Qcm9qZWxlcmltL0JlbmltUHJvamVsZXJpbS93ZWJzaXRlbS93ZWJzaXRlbS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9la2ViZXJhdC9ZYW5kZXguRGlzay9Qcm9qZWxlcmltL0JlbmltUHJvamVsZXJpbS93ZWJzaXRlbS93ZWJzaXRlbS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKCi8qKgogKiBAbGljZW5zZSBDb3B5cmlnaHQgKGMpIDIwMDMtMjAyMSwgQ0tTb3VyY2UgLSBGcmVkZXJpY28gS25hYmJlbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogRm9yIGxpY2Vuc2luZywgc2VlIExJQ0VOU0UubWQgb3IgaHR0cHM6Ly9ja2VkaXRvci5jb20vbGVnYWwvY2tlZGl0b3Itb3NzLWxpY2Vuc2UKICovCgovKioKICogQG1vZHVsZSBlbmdpbmUvdmlldy9wb3NpdGlvbgogKi8KaW1wb3J0IFRyZWVXYWxrZXIgZnJvbSAnLi90cmVld2Fsa2VyJzsKaW1wb3J0IGNvbXBhcmVBcnJheXMgZnJvbSAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvY29tcGFyZWFycmF5cyc7CmltcG9ydCBDS0VkaXRvckVycm9yIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtdXRpbHMvc3JjL2NrZWRpdG9yZXJyb3InOwppbXBvcnQgRWRpdGFibGVFbGVtZW50IGZyb20gJy4vZWRpdGFibGVlbGVtZW50JzsgLy8gVG8gY2hlY2sgaWYgY29tcG9uZW50IGlzIGxvYWRlZCBtb3JlIHRoYW4gb25jZS4KCmltcG9ydCAnQGNrZWRpdG9yL2NrZWRpdG9yNS11dGlscy9zcmMvdmVyc2lvbic7Ci8qKgogKiBQb3NpdGlvbiBpbiB0aGUgdmlldyB0cmVlLiBQb3NpdGlvbiBpcyByZXByZXNlbnRlZCBieSBpdHMgcGFyZW50IG5vZGUgYW5kIGFuIG9mZnNldCBpbiB0aGlzIHBhcmVudC4KICoKICogSW4gb3JkZXIgdG8gY3JlYXRlIGEgbmV3IHBvc2l0aW9uIGluc3RhbmNlIHVzZSB0aGUgYGNyZWF0ZVBvc2l0aW9uKigpYCBmYWN0b3J5IG1ldGhvZHMgYXZhaWxhYmxlIGluOgogKgogKiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvdmlld35WaWV3fQogKiAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZG93bmNhc3R3cml0ZXJ+RG93bmNhc3RXcml0ZXJ9CiAqICoge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy91cGNhc3R3cml0ZXJ+VXBjYXN0V3JpdGVyfQogKi8KCnZhciBQb3NpdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgLyoqCiAgICogQ3JlYXRlcyBhIHBvc2l0aW9uLgogICAqCiAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvbm9kZX5Ob2RlfG1vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudGZyYWdtZW50fkRvY3VtZW50RnJhZ21lbnR9IHBhcmVudCBQb3NpdGlvbiBwYXJlbnQuCiAgICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBQb3NpdGlvbiBvZmZzZXQuCiAgICovCiAgZnVuY3Rpb24gUG9zaXRpb24ocGFyZW50LCBvZmZzZXQpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQb3NpdGlvbik7CgogICAgLyoqCiAgICAgKiBQb3NpdGlvbiBwYXJlbnQuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHttb2R1bGU6ZW5naW5lL3ZpZXcvbm9kZX5Ob2RlfG1vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudGZyYWdtZW50fkRvY3VtZW50RnJhZ21lbnR9CiAgICAgKiBtb2R1bGU6ZW5naW5lL3ZpZXcvcG9zaXRpb25+UG9zaXRpb24jcGFyZW50CiAgICAgKi8KICAgIHRoaXMucGFyZW50ID0gcGFyZW50OwogICAgLyoqCiAgICAgKiBQb3NpdGlvbiBvZmZzZXQuCiAgICAgKgogICAgICogQHJlYWRvbmx5CiAgICAgKiBAbWVtYmVyIHtOdW1iZXJ9IG1vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbiNvZmZzZXQKICAgICAqLwoKICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0OwogIH0KICAvKioKICAgKiBOb2RlIGRpcmVjdGx5IGFmdGVyIHRoZSBwb3NpdGlvbi4gRXF1YWxzIGBudWxsYCB3aGVuIHRoZXJlIGlzIG5vIG5vZGUgYWZ0ZXIgcG9zaXRpb24gb3IgcG9zaXRpb24gaXMgbG9jYXRlZAogICAqIGluc2lkZSB0ZXh0IG5vZGUuCiAgICoKICAgKiBAcmVhZG9ubHkKICAgKiBAdHlwZSB7bW9kdWxlOmVuZ2luZS92aWV3L25vZGV+Tm9kZXxudWxsfQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFBvc2l0aW9uLCBbewogICAga2V5OiAibm9kZUFmdGVyIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAodGhpcy5wYXJlbnQuaXMoJyR0ZXh0JykpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldENoaWxkKHRoaXMub2Zmc2V0KSB8fCBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBOb2RlIGRpcmVjdGx5IGJlZm9yZSB0aGUgcG9zaXRpb24uIEVxdWFscyBgbnVsbGAgd2hlbiB0aGVyZSBpcyBubyBub2RlIGJlZm9yZSBwb3NpdGlvbiBvciBwb3NpdGlvbiBpcyBsb2NhdGVkCiAgICAgKiBpbnNpZGUgdGV4dCBub2RlLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQHR5cGUge21vZHVsZTplbmdpbmUvdmlldy9ub2Rlfk5vZGV8bnVsbH0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJub2RlQmVmb3JlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAodGhpcy5wYXJlbnQuaXMoJyR0ZXh0JykpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldENoaWxkKHRoaXMub2Zmc2V0IC0gMSkgfHwgbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogSXMgYHRydWVgIGlmIHBvc2l0aW9uIGlzIGF0IHRoZSBiZWdpbm5pbmcgb2YgaXRzIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvcG9zaXRpb25+UG9zaXRpb24jcGFyZW50IHBhcmVudH0sIGBmYWxzZWAgb3RoZXJ3aXNlLgogICAgICoKICAgICAqIEByZWFkb25seQogICAgICogQHR5cGUge0Jvb2xlYW59CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaXNBdFN0YXJ0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5vZmZzZXQgPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIElzIGB0cnVlYCBpZiBwb3NpdGlvbiBpcyBhdCB0aGUgZW5kIG9mIGl0cyB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3Bvc2l0aW9uflBvc2l0aW9uI3BhcmVudCBwYXJlbnR9LCBgZmFsc2VgIG90aGVyd2lzZS4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEB0eXBlIHtCb29sZWFufQogICAgICovCgogIH0sIHsKICAgIGtleTogImlzQXRFbmQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBlbmRPZmZzZXQgPSB0aGlzLnBhcmVudC5pcygnJHRleHQnKSA/IHRoaXMucGFyZW50LmRhdGEubGVuZ3RoIDogdGhpcy5wYXJlbnQuY2hpbGRDb3VudDsKICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ID09PSBlbmRPZmZzZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFBvc2l0aW9uJ3Mgcm9vdCwgdGhhdCBpcyB0aGUgcm9vdCBvZiB0aGUgcG9zaXRpb24ncyBwYXJlbnQgZWxlbWVudC4KICAgICAqCiAgICAgKiBAcmVhZG9ubHkKICAgICAqIEB0eXBlIHttb2R1bGU6ZW5naW5lL3ZpZXcvbm9kZX5Ob2RlfG1vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudGZyYWdtZW50fkRvY3VtZW50RnJhZ21lbnR9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicm9vdCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFyZW50LnJvb3Q7CiAgICB9CiAgICAvKioKICAgICAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvZWRpdGFibGVlbGVtZW50fkVkaXRhYmxlRWxlbWVudCBFZGl0YWJsZUVsZW1lbnR9IGluc3RhbmNlIHRoYXQgY29udGFpbnMgdGhpcyBwb3NpdGlvbiwgb3IgYG51bGxgIGlmCiAgICAgKiBwb3NpdGlvbiBpcyBub3QgaW5zaWRlIGFuIGVkaXRhYmxlIGVsZW1lbnQuCiAgICAgKgogICAgICogQHR5cGUge21vZHVsZTplbmdpbmUvdmlldy9lZGl0YWJsZWVsZW1lbnR+RWRpdGFibGVFbGVtZW50fG51bGx9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZWRpdGFibGVFbGVtZW50IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgZWRpdGFibGUgPSB0aGlzLnBhcmVudDsKCiAgICAgIHdoaWxlICghKGVkaXRhYmxlIGluc3RhbmNlb2YgRWRpdGFibGVFbGVtZW50KSkgewogICAgICAgIGlmIChlZGl0YWJsZS5wYXJlbnQpIHsKICAgICAgICAgIGVkaXRhYmxlID0gZWRpdGFibGUucGFyZW50OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBlZGl0YWJsZTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhIG5ldyBpbnN0YW5jZSBvZiBQb3NpdGlvbiB3aXRoIG9mZnNldCBpbmNyZW1lbnRlZCBieSBgc2hpZnRgIHZhbHVlLgogICAgICoKICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzaGlmdCBIb3cgcG9zaXRpb24gb2Zmc2V0IHNob3VsZCBnZXQgY2hhbmdlZC4gQWNjZXB0cyBuZWdhdGl2ZSB2YWx1ZXMuCiAgICAgKiBAcmV0dXJucyB7bW9kdWxlOmVuZ2luZS92aWV3L3Bvc2l0aW9uflBvc2l0aW9ufSBTaGlmdGVkIHBvc2l0aW9uLgogICAgICovCgogIH0sIHsKICAgIGtleTogImdldFNoaWZ0ZWRCeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2hpZnRlZEJ5KHNoaWZ0KSB7CiAgICAgIHZhciBzaGlmdGVkID0gUG9zaXRpb24uX2NyZWF0ZUF0KHRoaXMpOwoKICAgICAgdmFyIG9mZnNldCA9IHNoaWZ0ZWQub2Zmc2V0ICsgc2hpZnQ7CiAgICAgIHNoaWZ0ZWQub2Zmc2V0ID0gb2Zmc2V0IDwgMCA/IDAgOiBvZmZzZXQ7CiAgICAgIHJldHVybiBzaGlmdGVkOwogICAgfQogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBmYXJ0aGVzdCBwb3NpdGlvbiB3aGljaCBtYXRjaGVzIHRoZSBjYWxsYmFjayB1c2luZwogICAgICoge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy90cmVld2Fsa2VyflRyZWVXYWxrZXIgVHJlZVdhbGtlcn0uCiAgICAgKgogICAgICogRm9yIGV4YW1wbGU6CiAgICAgKgogICAgICogCQlnZXRMYXN0TWF0Y2hpbmdQb3NpdGlvbiggdmFsdWUgPT4gdmFsdWUudHlwZSA9PSAndGV4dCcgKTsgLy8gPHA+e31mb288L3A+IC0+IDxwPmZvb1tdPC9wPgogICAgICogCQlnZXRMYXN0TWF0Y2hpbmdQb3NpdGlvbiggdmFsdWUgPT4gdmFsdWUudHlwZSA9PSAndGV4dCcsIHsgZGlyZWN0aW9uOiAnYmFja3dhcmQnIH0gKTsgLy8gPHA+Zm9vW108L3A+IC0+IDxwPnt9Zm9vPC9wPgogICAgICogCQlnZXRMYXN0TWF0Y2hpbmdQb3NpdGlvbiggdmFsdWUgPT4gZmFsc2UgKTsgLy8gRG8gbm90IG1vdmUgdGhlIHBvc2l0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNraXAgQ2FsbGJhY2sgZnVuY3Rpb24uIEdldHMge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy90cmVld2Fsa2VyflRyZWVXYWxrZXJWYWx1ZX0gYW5kIHNob3VsZAogICAgICogcmV0dXJuIGB0cnVlYCBpZiB0aGUgdmFsdWUgc2hvdWxkIGJlIHNraXBwZWQgb3IgYGZhbHNlYCBpZiBub3QuCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPYmplY3Qgd2l0aCBjb25maWd1cmF0aW9uIG9wdGlvbnMuIFNlZSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3RyZWV3YWxrZXJ+VHJlZVdhbGtlcn0uCiAgICAgKgogICAgICogQHJldHVybnMge21vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbn0gVGhlIHBvc2l0aW9uIGFmdGVyIHRoZSBsYXN0IGl0ZW0gd2hpY2ggbWF0Y2hlcyB0aGUgYHNraXBgIGNhbGxiYWNrIHRlc3QuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0TGFzdE1hdGNoaW5nUG9zaXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldExhc3RNYXRjaGluZ1Bvc2l0aW9uKHNraXApIHsKICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICBvcHRpb25zLnN0YXJ0UG9zaXRpb24gPSB0aGlzOwogICAgICB2YXIgdHJlZVdhbGtlciA9IG5ldyBUcmVlV2Fsa2VyKG9wdGlvbnMpOwogICAgICB0cmVlV2Fsa2VyLnNraXAoc2tpcCk7CiAgICAgIHJldHVybiB0cmVlV2Fsa2VyLnBvc2l0aW9uOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuY2VzdG9ycyBhcnJheSBvZiB0aGlzIHBvc2l0aW9uLCB0aGF0IGlzIHRoaXMgcG9zaXRpb24ncyBwYXJlbnQgYW5kIGl0J3MgYW5jZXN0b3JzLgogICAgICoKICAgICAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgd2l0aCBhbmNlc3RvcnMuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0QW5jZXN0b3JzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBbmNlc3RvcnMoKSB7CiAgICAgIGlmICh0aGlzLnBhcmVudC5pcygnZG9jdW1lbnRGcmFnbWVudCcpKSB7CiAgICAgICAgcmV0dXJuIFt0aGlzLnBhcmVudF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldEFuY2VzdG9ycyh7CiAgICAgICAgICBpbmNsdWRlU2VsZjogdHJ1ZQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L25vZGV+Tm9kZX0gb3Ige0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudGZyYWdtZW50fkRvY3VtZW50RnJhZ21lbnR9CiAgICAgKiB3aGljaCBpcyBhIGNvbW1vbiBhbmNlc3RvciBvZiBib3RoIHBvc2l0aW9ucy4KICAgICAqCiAgICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbn0gcG9zaXRpb24KICAgICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL3ZpZXcvbm9kZX5Ob2RlfG1vZHVsZTplbmdpbmUvdmlldy9kb2N1bWVudGZyYWdtZW50fkRvY3VtZW50RnJhZ21lbnR8bnVsbH0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRDb21tb25BbmNlc3RvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29tbW9uQW5jZXN0b3IocG9zaXRpb24pIHsKICAgICAgdmFyIGFuY2VzdG9yc0EgPSB0aGlzLmdldEFuY2VzdG9ycygpOwogICAgICB2YXIgYW5jZXN0b3JzQiA9IHBvc2l0aW9uLmdldEFuY2VzdG9ycygpOwogICAgICB2YXIgaSA9IDA7CgogICAgICB3aGlsZSAoYW5jZXN0b3JzQVtpXSA9PSBhbmNlc3RvcnNCW2ldICYmIGFuY2VzdG9yc0FbaV0pIHsKICAgICAgICBpKys7CiAgICAgIH0KCiAgICAgIHJldHVybiBpID09PSAwID8gbnVsbCA6IGFuY2VzdG9yc0FbaSAtIDFdOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVja3Mgd2hldGhlciB0aGlzIG9iamVjdCBpcyBvZiB0aGUgZ2l2ZW4gdHlwZS4KICAgICAqCiAgICAgKgkJcG9zaXRpb24uaXMoICdwb3NpdGlvbicgKTsgLy8gLT4gdHJ1ZQogICAgICoJCXBvc2l0aW9uLmlzKCAndmlldzpwb3NpdGlvbicgKTsgLy8gLT4gdHJ1ZQogICAgICoKICAgICAqCQlwb3NpdGlvbi5pcyggJ21vZGVsOnBvc2l0aW9uJyApOyAvLyAtPiBmYWxzZQogICAgICoJCXBvc2l0aW9uLmlzKCAnZWxlbWVudCcgKTsgLy8gLT4gZmFsc2UKICAgICAqCQlwb3NpdGlvbi5pcyggJ3JhbmdlJyApOyAvLyAtPiBmYWxzZQogICAgICoKICAgICAqIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvbm9kZX5Ob2RlI2lzIENoZWNrIHRoZSBlbnRpcmUgbGlzdCBvZiB2aWV3IG9iamVjdHN9IHdoaWNoIGltcGxlbWVudCB0aGUgYGlzKClgIG1ldGhvZC4KICAgICAqCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZQogICAgICogQHJldHVybnMge0Jvb2xlYW59CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzKHR5cGUpIHsKICAgICAgcmV0dXJuIHR5cGUgPT09ICdwb3NpdGlvbicgfHwgdHlwZSA9PT0gJ3ZpZXc6cG9zaXRpb24nOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVja3Mgd2hldGhlciB0aGlzIHBvc2l0aW9uIGVxdWFscyBnaXZlbiBwb3NpdGlvbi4KICAgICAqCiAgICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbn0gb3RoZXJQb3NpdGlvbiBQb3NpdGlvbiB0byBjb21wYXJlIHdpdGguCiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiBwb3NpdGlvbnMgYXJlIHNhbWUuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaXNFcXVhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNFcXVhbChvdGhlclBvc2l0aW9uKSB7CiAgICAgIHJldHVybiB0aGlzLnBhcmVudCA9PSBvdGhlclBvc2l0aW9uLnBhcmVudCAmJiB0aGlzLm9mZnNldCA9PSBvdGhlclBvc2l0aW9uLm9mZnNldDsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIHdoZXRoZXIgdGhpcyBwb3NpdGlvbiBpcyBsb2NhdGVkIGJlZm9yZSBnaXZlbiBwb3NpdGlvbi4gV2hlbiBtZXRob2QgcmV0dXJucyBgZmFsc2VgIGl0IGRvZXMgbm90IG1lYW4gdGhhdAogICAgICogdGhpcyBwb3NpdGlvbiBpcyBhZnRlciBnaXZlIG9uZS4gVHdvIHBvc2l0aW9ucyBtYXkgYmUgbG9jYXRlZCBpbnNpZGUgc2VwYXJhdGUgcm9vdHMgYW5kIGluIHRoYXQgc2l0dWF0aW9uIHRoaXMKICAgICAqIG1ldGhvZCB3aWxsIHN0aWxsIHJldHVybiBgZmFsc2VgLgogICAgICoKICAgICAqIEBzZWUgbW9kdWxlOmVuZ2luZS92aWV3L3Bvc2l0aW9uflBvc2l0aW9uI2lzQWZ0ZXIKICAgICAqIEBzZWUgbW9kdWxlOmVuZ2luZS92aWV3L3Bvc2l0aW9uflBvc2l0aW9uI2NvbXBhcmVXaXRoCiAgICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbn0gb3RoZXJQb3NpdGlvbiBQb3NpdGlvbiB0byBjb21wYXJlIHdpdGguCiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhpcyBwb3NpdGlvbiBpcyBiZWZvcmUgZ2l2ZW4gcG9zaXRpb24uCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaXNCZWZvcmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQmVmb3JlKG90aGVyUG9zaXRpb24pIHsKICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZVdpdGgob3RoZXJQb3NpdGlvbikgPT0gJ2JlZm9yZSc7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrcyB3aGV0aGVyIHRoaXMgcG9zaXRpb24gaXMgbG9jYXRlZCBhZnRlciBnaXZlbiBwb3NpdGlvbi4gV2hlbiBtZXRob2QgcmV0dXJucyBgZmFsc2VgIGl0IGRvZXMgbm90IG1lYW4gdGhhdAogICAgICogdGhpcyBwb3NpdGlvbiBpcyBiZWZvcmUgZ2l2ZSBvbmUuIFR3byBwb3NpdGlvbnMgbWF5IGJlIGxvY2F0ZWQgaW5zaWRlIHNlcGFyYXRlIHJvb3RzIGFuZCBpbiB0aGF0IHNpdHVhdGlvbiB0aGlzCiAgICAgKiBtZXRob2Qgd2lsbCBzdGlsbCByZXR1cm4gYGZhbHNlYC4KICAgICAqCiAgICAgKiBAc2VlIG1vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbiNpc0JlZm9yZQogICAgICogQHNlZSBtb2R1bGU6ZW5naW5lL3ZpZXcvcG9zaXRpb25+UG9zaXRpb24jY29tcGFyZVdpdGgKICAgICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L3Bvc2l0aW9uflBvc2l0aW9ufSBvdGhlclBvc2l0aW9uIFBvc2l0aW9uIHRvIGNvbXBhcmUgd2l0aC4KICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGlzIHBvc2l0aW9uIGlzIGFmdGVyIGdpdmVuIHBvc2l0aW9uLgogICAgICovCgogIH0sIHsKICAgIGtleTogImlzQWZ0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQWZ0ZXIob3RoZXJQb3NpdGlvbikgewogICAgICByZXR1cm4gdGhpcy5jb21wYXJlV2l0aChvdGhlclBvc2l0aW9uKSA9PSAnYWZ0ZXInOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVja3Mgd2hldGhlciB0aGlzIHBvc2l0aW9uIGlzIGJlZm9yZSwgYWZ0ZXIgb3IgaW4gc2FtZSBwb3NpdGlvbiB0aGF0IG90aGVyIHBvc2l0aW9uLiBUd28gcG9zaXRpb25zIG1heSBiZSBhbHNvCiAgICAgKiBkaWZmZXJlbnQgd2hlbiB0aGV5IGFyZSBsb2NhdGVkIGluIHNlcGFyYXRlIHJvb3RzLgogICAgICoKICAgICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L3Bvc2l0aW9uflBvc2l0aW9ufSBvdGhlclBvc2l0aW9uIFBvc2l0aW9uIHRvIGNvbXBhcmUgd2l0aC4KICAgICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL3ZpZXcvcG9zaXRpb25+UG9zaXRpb25SZWxhdGlvbn0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjb21wYXJlV2l0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcGFyZVdpdGgob3RoZXJQb3NpdGlvbikgewogICAgICBpZiAodGhpcy5yb290ICE9PSBvdGhlclBvc2l0aW9uLnJvb3QpIHsKICAgICAgICByZXR1cm4gJ2RpZmZlcmVudCc7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmlzRXF1YWwob3RoZXJQb3NpdGlvbikpIHsKICAgICAgICByZXR1cm4gJ3NhbWUnOwogICAgICB9IC8vIEdldCBwYXRoIGZyb20gcm9vdCB0byBwb3NpdGlvbidzIHBhcmVudCBlbGVtZW50LgoKCiAgICAgIHZhciB0aGlzUGF0aCA9IHRoaXMucGFyZW50LmlzKCdub2RlJykgPyB0aGlzLnBhcmVudC5nZXRQYXRoKCkgOiBbXTsKICAgICAgdmFyIG90aGVyUGF0aCA9IG90aGVyUG9zaXRpb24ucGFyZW50LmlzKCdub2RlJykgPyBvdGhlclBvc2l0aW9uLnBhcmVudC5nZXRQYXRoKCkgOiBbXTsgLy8gQWRkIHRoZSBwb3NpdGlvbnMnIG9mZnNldHMgdG8gdGhlIHBhcmVudHMgb2Zmc2V0cy4KCiAgICAgIHRoaXNQYXRoLnB1c2godGhpcy5vZmZzZXQpOwogICAgICBvdGhlclBhdGgucHVzaChvdGhlclBvc2l0aW9uLm9mZnNldCk7IC8vIENvbXBhcmUgYm90aCBwYXRoIGFycmF5cyB0byBmaW5kIGNvbW1vbiBhbmNlc3Rvci4KCiAgICAgIHZhciByZXN1bHQgPSBjb21wYXJlQXJyYXlzKHRoaXNQYXRoLCBvdGhlclBhdGgpOwoKICAgICAgc3dpdGNoIChyZXN1bHQpIHsKICAgICAgICBjYXNlICdwcmVmaXgnOgogICAgICAgICAgcmV0dXJuICdiZWZvcmUnOwoKICAgICAgICBjYXNlICdleHRlbnNpb24nOgogICAgICAgICAgcmV0dXJuICdhZnRlcic7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gdGhpc1BhdGhbcmVzdWx0XSA8IG90aGVyUGF0aFtyZXN1bHRdID8gJ2JlZm9yZScgOiAnYWZ0ZXInOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZXMgYSB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3RyZWV3YWxrZXJ+VHJlZVdhbGtlciBUcmVlV2Fsa2VyfSBpbnN0YW5jZSB3aXRoIHRoaXMgcG9zaXRpb25zIGFzIGEgc3RhcnQgcG9zaXRpb24uCiAgICAgKgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT2JqZWN0IHdpdGggY29uZmlndXJhdGlvbiBvcHRpb25zLiBTZWUge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy90cmVld2Fsa2VyflRyZWVXYWxrZXJ9CiAgICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9yYW5nZX5SYW5nZX0gW29wdGlvbnMuYm91bmRhcmllcz1udWxsXSBSYW5nZSB0byBkZWZpbmUgYm91bmRhcmllcyBvZiB0aGUgaXRlcmF0b3IuCiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNpbmdsZUNoYXJhY3RlcnM9ZmFsc2VdCiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNoYWxsb3c9ZmFsc2VdCiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmlnbm9yZUVsZW1lbnRFbmQ9ZmFsc2VdCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0V2Fsa2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRXYWxrZXIoKSB7CiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgb3B0aW9ucy5zdGFydFBvc2l0aW9uID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBUcmVlV2Fsa2VyKG9wdGlvbnMpOwogICAgfQogIH0sIHsKICAgIGtleTogImNsb25lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9uZSgpIHsKICAgICAgcmV0dXJuIG5ldyBQb3NpdGlvbih0aGlzLnBhcmVudCwgdGhpcy5vZmZzZXQpOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGVzIHBvc2l0aW9uIGF0IHRoZSBnaXZlbiBsb2NhdGlvbi4gVGhlIGxvY2F0aW9uIGNhbiBiZSBzcGVjaWZpZWQgYXM6CiAgICAgKgogICAgICogKiBhIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvcG9zaXRpb25+UG9zaXRpb24gcG9zaXRpb259LAogICAgICogKiBwYXJlbnQgZWxlbWVudCBhbmQgb2Zmc2V0IChvZmZzZXQgZGVmYXVsdHMgdG8gYDBgKSwKICAgICAqICogcGFyZW50IGVsZW1lbnQgYW5kIGAnZW5kJ2AgKHNldHMgcG9zaXRpb24gYXQgdGhlIGVuZCBvZiB0aGF0IGVsZW1lbnQpLAogICAgICogKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L2l0ZW1+SXRlbSB2aWV3IGl0ZW19IGFuZCBgJ2JlZm9yZSdgIG9yIGAnYWZ0ZXInYCAoc2V0cyBwb3NpdGlvbiBiZWZvcmUgb3IgYWZ0ZXIgZ2l2ZW4gdmlldyBpdGVtKS4KICAgICAqCiAgICAgKiBUaGlzIG1ldGhvZCBpcyBhIHNob3J0Y3V0IHRvIG90aGVyIGNvbnN0cnVjdG9ycyBzdWNoIGFzOgogICAgICoKICAgICAqICoge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbi5fY3JlYXRlQmVmb3JlfSwKICAgICAqICoge0BsaW5rIG1vZHVsZTplbmdpbmUvdmlldy9wb3NpdGlvbn5Qb3NpdGlvbi5fY3JlYXRlQWZ0ZXJ9LgogICAgICoKICAgICAqIEBwcm90ZWN0ZWQKICAgICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2l0ZW1+SXRlbXxtb2R1bGU6ZW5naW5lL3ZpZXcvcG9zaXRpb25+UG9zaXRpb259IGl0ZW1PclBvc2l0aW9uCiAgICAgKiBAcGFyYW0ge051bWJlcnwnZW5kJ3wnYmVmb3JlJ3wnYWZ0ZXInfSBbb2Zmc2V0XSBPZmZzZXQgb3Igb25lIG9mIHRoZSBmbGFncy4gVXNlZCBvbmx5IHdoZW4KICAgICAqIGZpcnN0IHBhcmFtZXRlciBpcyBhIHtAbGluayBtb2R1bGU6ZW5naW5lL3ZpZXcvaXRlbX5JdGVtIHZpZXcgaXRlbX0uCiAgICAgKi8KCiAgfV0sIFt7CiAgICBrZXk6ICJfY3JlYXRlQXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVBdChpdGVtT3JQb3NpdGlvbiwgb2Zmc2V0KSB7CiAgICAgIGlmIChpdGVtT3JQb3NpdGlvbiBpbnN0YW5jZW9mIFBvc2l0aW9uKSB7CiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKGl0ZW1PclBvc2l0aW9uLnBhcmVudCwgaXRlbU9yUG9zaXRpb24ub2Zmc2V0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbm9kZSA9IGl0ZW1PclBvc2l0aW9uOwoKICAgICAgICBpZiAob2Zmc2V0ID09ICdlbmQnKSB7CiAgICAgICAgICBvZmZzZXQgPSBub2RlLmlzKCckdGV4dCcpID8gbm9kZS5kYXRhLmxlbmd0aCA6IG5vZGUuY2hpbGRDb3VudDsKICAgICAgICB9IGVsc2UgaWYgKG9mZnNldCA9PSAnYmVmb3JlJykgewogICAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUJlZm9yZShub2RlKTsKICAgICAgICB9IGVsc2UgaWYgKG9mZnNldCA9PSAnYWZ0ZXInKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlQWZ0ZXIobm9kZSk7CiAgICAgICAgfSBlbHNlIGlmIChvZmZzZXQgIT09IDAgJiYgIW9mZnNldCkgewogICAgICAgICAgLyoqCiAgICAgICAgICAgKiB7QGxpbmsgbW9kdWxlOmVuZ2luZS92aWV3L3ZpZXd+VmlldyNjcmVhdGVQb3NpdGlvbkF0IGBWaWV3I2NyZWF0ZVBvc2l0aW9uQXQoKWB9CiAgICAgICAgICAgKiByZXF1aXJlcyB0aGUgb2Zmc2V0IHRvIGJlIHNwZWNpZmllZCB3aGVuIHRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgYSB2aWV3IGl0ZW0uCiAgICAgICAgICAgKgogICAgICAgICAgICogQGVycm9yIHZpZXctY3JlYXRlcG9zaXRpb25hdC1vZmZzZXQtcmVxdWlyZWQKICAgICAgICAgICAqLwogICAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ3ZpZXctY3JlYXRlcG9zaXRpb25hdC1vZmZzZXQtcmVxdWlyZWQnLCBub2RlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBuZXcgUG9zaXRpb24obm9kZSwgb2Zmc2V0KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbmV3IHBvc2l0aW9uIGFmdGVyIGdpdmVuIHZpZXcgaXRlbS4KICAgICAqCiAgICAgKiBAcHJvdGVjdGVkCiAgICAgKiBAcGFyYW0ge21vZHVsZTplbmdpbmUvdmlldy9pdGVtfkl0ZW19IGl0ZW0gVmlldyBpdGVtIGFmdGVyIHdoaWNoIHRoZSBwb3NpdGlvbiBzaG91bGQgYmUgbG9jYXRlZC4KICAgICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL3ZpZXcvcG9zaXRpb25+UG9zaXRpb259CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiX2NyZWF0ZUFmdGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlQWZ0ZXIoaXRlbSkgewogICAgICAvLyBUZXh0UHJveHkgaXMgbm90IGEgaW5zdGFuY2Ugb2YgTm9kZSBzbyB3ZSBuZWVkIGRvIGhhbmRsZSBpdCBpbiBzcGVjaWZpYyB3YXkuCiAgICAgIGlmIChpdGVtLmlzKCckdGV4dFByb3h5JykpIHsKICAgICAgICByZXR1cm4gbmV3IFBvc2l0aW9uKGl0ZW0udGV4dE5vZGUsIGl0ZW0ub2Zmc2V0SW5UZXh0ICsgaXRlbS5kYXRhLmxlbmd0aCk7CiAgICAgIH0KCiAgICAgIGlmICghaXRlbS5wYXJlbnQpIHsKICAgICAgICAvKioKICAgICAgICAgKiBZb3UgY2FuIG5vdCBtYWtlIGEgcG9zaXRpb24gYWZ0ZXIgYSByb290LgogICAgICAgICAqCiAgICAgICAgICogQGVycm9yIHZpZXctcG9zaXRpb24tYWZ0ZXItcm9vdAogICAgICAgICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L25vZGV+Tm9kZX0gcm9vdAogICAgICAgICAqLwogICAgICAgIHRocm93IG5ldyBDS0VkaXRvckVycm9yKCd2aWV3LXBvc2l0aW9uLWFmdGVyLXJvb3QnLCBpdGVtLCB7CiAgICAgICAgICByb290OiBpdGVtCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgUG9zaXRpb24oaXRlbS5wYXJlbnQsIGl0ZW0uaW5kZXggKyAxKTsKICAgIH0KICAgIC8qKgogICAgICogQ3JlYXRlcyBhIG5ldyBwb3NpdGlvbiBiZWZvcmUgZ2l2ZW4gdmlldyBpdGVtLgogICAgICoKICAgICAqIEBwcm90ZWN0ZWQKICAgICAqIEBwYXJhbSB7bW9kdWxlOmVuZ2luZS92aWV3L2l0ZW1+SXRlbX0gaXRlbSBWaWV3IGl0ZW0gYmVmb3JlIHdoaWNoIHRoZSBwb3NpdGlvbiBzaG91bGQgYmUgbG9jYXRlZC4KICAgICAqIEByZXR1cm5zIHttb2R1bGU6ZW5naW5lL3ZpZXcvcG9zaXRpb25+UG9zaXRpb259CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiX2NyZWF0ZUJlZm9yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUJlZm9yZShpdGVtKSB7CiAgICAgIC8vIFRleHRQcm94eSBpcyBub3QgYSBpbnN0YW5jZSBvZiBOb2RlIHNvIHdlIG5lZWQgZG8gaGFuZGxlIGl0IGluIHNwZWNpZmljIHdheS4KICAgICAgaWYgKGl0ZW0uaXMoJyR0ZXh0UHJveHknKSkgewogICAgICAgIHJldHVybiBuZXcgUG9zaXRpb24oaXRlbS50ZXh0Tm9kZSwgaXRlbS5vZmZzZXRJblRleHQpOwogICAgICB9CgogICAgICBpZiAoIWl0ZW0ucGFyZW50KSB7CiAgICAgICAgLyoqCiAgICAgICAgICogWW91IGNhbm5vdCBtYWtlIGEgcG9zaXRpb24gYmVmb3JlIGEgcm9vdC4KICAgICAgICAgKgogICAgICAgICAqIEBlcnJvciB2aWV3LXBvc2l0aW9uLWJlZm9yZS1yb290CiAgICAgICAgICogQHBhcmFtIHttb2R1bGU6ZW5naW5lL3ZpZXcvbm9kZX5Ob2RlfSByb290CiAgICAgICAgICovCiAgICAgICAgdGhyb3cgbmV3IENLRWRpdG9yRXJyb3IoJ3ZpZXctcG9zaXRpb24tYmVmb3JlLXJvb3QnLCBpdGVtLCB7CiAgICAgICAgICByb290OiBpdGVtCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgUG9zaXRpb24oaXRlbS5wYXJlbnQsIGl0ZW0uaW5kZXgpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBvc2l0aW9uOwp9KCk7Ci8qKgogKiBBIGZsYWcgaW5kaWNhdGluZyB3aGV0aGVyIHRoaXMgcG9zaXRpb24gaXMgYCdiZWZvcmUnYCBvciBgJ2FmdGVyJ2Agb3IgYCdzYW1lJ2AgYXMgZ2l2ZW4gcG9zaXRpb24uCiAqIElmIHBvc2l0aW9ucyBhcmUgaW4gZGlmZmVyZW50IHJvb3RzIGAnZGlmZmVyZW50J2AgZmxhZyBpcyByZXR1cm5lZC4KICoKICogQHR5cGVkZWYge1N0cmluZ30gbW9kdWxlOmVuZ2luZS92aWV3L3Bvc2l0aW9uflBvc2l0aW9uUmVsYXRpb24KICovCgoKZXhwb3J0IHsgUG9zaXRpb24gYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-engine/src/view/position.js"],"names":["TreeWalker","compareArrays","CKEditorError","EditableElement","Position","parent","offset","is","getChild","endOffset","data","length","childCount","root","editable","shift","shifted","_createAt","skip","options","startPosition","treeWalker","position","getAncestors","includeSelf","ancestorsA","ancestorsB","i","type","otherPosition","compareWith","isEqual","thisPath","getPath","otherPath","push","result","itemOrPosition","node","_createBefore","_createAfter","item","textNode","offsetInText","index"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/position\n */\n\nimport TreeWalker from './treewalker';\n\nimport compareArrays from '@ckeditor/ckeditor5-utils/src/comparearrays';\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport EditableElement from './editableelement';\n\n// To check if component is loaded more than once.\nimport '@ckeditor/ckeditor5-utils/src/version';\n\n/**\n * Position in the view tree. Position is represented by its parent node and an offset in this parent.\n *\n * In order to create a new position instance use the `createPosition*()` factory methods available in:\n *\n * * {@link module:engine/view/view~View}\n * * {@link module:engine/view/downcastwriter~DowncastWriter}\n * * {@link module:engine/view/upcastwriter~UpcastWriter}\n */\nexport default class Position {\n\t/**\n\t * Creates a position.\n\t *\n\t * @param {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment} parent Position parent.\n\t * @param {Number} offset Position offset.\n\t */\n\tconstructor( parent, offset ) {\n\t\t/**\n\t\t * Position parent.\n\t\t *\n\t\t * @readonly\n\t\t * @member {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t\t * module:engine/view/position~Position#parent\n\t\t */\n\t\tthis.parent = parent;\n\n\t\t/**\n\t\t * Position offset.\n\t\t *\n\t\t * @readonly\n\t\t * @member {Number} module:engine/view/position~Position#offset\n\t\t */\n\t\tthis.offset = offset;\n\t}\n\n\t/**\n\t * Node directly after the position. Equals `null` when there is no node after position or position is located\n\t * inside text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget nodeAfter() {\n\t\tif ( this.parent.is( '$text' ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.parent.getChild( this.offset ) || null;\n\t}\n\n\t/**\n\t * Node directly before the position. Equals `null` when there is no node before position or position is located\n\t * inside text node.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|null}\n\t */\n\tget nodeBefore() {\n\t\tif ( this.parent.is( '$text' ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.parent.getChild( this.offset - 1 ) || null;\n\t}\n\n\t/**\n\t * Is `true` if position is at the beginning of its {@link module:engine/view/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtStart() {\n\t\treturn this.offset === 0;\n\t}\n\n\t/**\n\t * Is `true` if position is at the end of its {@link module:engine/view/position~Position#parent parent}, `false` otherwise.\n\t *\n\t * @readonly\n\t * @type {Boolean}\n\t */\n\tget isAtEnd() {\n\t\tconst endOffset = this.parent.is( '$text' ) ? this.parent.data.length : this.parent.childCount;\n\n\t\treturn this.offset === endOffset;\n\t}\n\n\t/**\n\t * Position's root, that is the root of the position's parent element.\n\t *\n\t * @readonly\n\t * @type {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment}\n\t */\n\tget root() {\n\t\treturn this.parent.root;\n\t}\n\n\t/**\n\t * {@link module:engine/view/editableelement~EditableElement EditableElement} instance that contains this position, or `null` if\n\t * position is not inside an editable element.\n\t *\n\t * @type {module:engine/view/editableelement~EditableElement|null}\n\t */\n\tget editableElement() {\n\t\tlet editable = this.parent;\n\n\t\twhile ( !( editable instanceof EditableElement ) ) {\n\t\t\tif ( editable.parent ) {\n\t\t\t\teditable = editable.parent;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\treturn editable;\n\t}\n\n\t/**\n\t * Returns a new instance of Position with offset incremented by `shift` value.\n\t *\n\t * @param {Number} shift How position offset should get changed. Accepts negative values.\n\t * @returns {module:engine/view/position~Position} Shifted position.\n\t */\n\tgetShiftedBy( shift ) {\n\t\tconst shifted = Position._createAt( this );\n\n\t\tconst offset = shifted.offset + shift;\n\t\tshifted.offset = offset < 0 ? 0 : offset;\n\n\t\treturn shifted;\n\t}\n\n\t/**\n\t * Gets the farthest position which matches the callback using\n\t * {@link module:engine/view/treewalker~TreeWalker TreeWalker}.\n\t *\n\t * For example:\n\t *\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text' ); // <p>{}foo</p> -> <p>foo[]</p>\n\t * \t\tgetLastMatchingPosition( value => value.type == 'text', { direction: 'backward' } ); // <p>foo[]</p> -> <p>{}foo</p>\n\t * \t\tgetLastMatchingPosition( value => false ); // Do not move the position.\n\t *\n\t * @param {Function} skip Callback function. Gets {@link module:engine/view/treewalker~TreeWalkerValue} and should\n\t * return `true` if the value should be skipped or `false` if not.\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}.\n\t *\n\t * @returns {module:engine/view/position~Position} The position after the last item which matches the `skip` callback test.\n\t */\n\tgetLastMatchingPosition( skip, options = {} ) {\n\t\toptions.startPosition = this;\n\n\t\tconst treeWalker = new TreeWalker( options );\n\t\ttreeWalker.skip( skip );\n\n\t\treturn treeWalker.position;\n\t}\n\n\t/**\n\t * Returns ancestors array of this position, that is this position's parent and it's ancestors.\n\t *\n\t * @returns {Array} Array with ancestors.\n\t */\n\tgetAncestors() {\n\t\tif ( this.parent.is( 'documentFragment' ) ) {\n\t\t\treturn [ this.parent ];\n\t\t} else {\n\t\t\treturn this.parent.getAncestors( { includeSelf: true } );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a {@link module:engine/view/node~Node} or {@link module:engine/view/documentfragment~DocumentFragment}\n\t * which is a common ancestor of both positions.\n\t *\n\t * @param {module:engine/view/position~Position} position\n\t * @returns {module:engine/view/node~Node|module:engine/view/documentfragment~DocumentFragment|null}\n\t */\n\tgetCommonAncestor( position ) {\n\t\tconst ancestorsA = this.getAncestors();\n\t\tconst ancestorsB = position.getAncestors();\n\n\t\tlet i = 0;\n\n\t\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n\t}\n\n\t/**\n\t * Checks whether this object is of the given type.\n\t *\n\t *\t\tposition.is( 'position' ); // -> true\n\t *\t\tposition.is( 'view:position' ); // -> true\n\t *\n\t *\t\tposition.is( 'model:position' ); // -> false\n\t *\t\tposition.is( 'element' ); // -> false\n\t *\t\tposition.is( 'range' ); // -> false\n\t *\n\t * {@link module:engine/view/node~Node#is Check the entire list of view objects} which implement the `is()` method.\n\t *\n\t * @param {String} type\n\t * @returns {Boolean}\n\t */\n\tis( type ) {\n\t\treturn type === 'position' || type === 'view:position';\n\t}\n\n\t/**\n\t * Checks whether this position equals given position.\n\t *\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} True if positions are same.\n\t */\n\tisEqual( otherPosition ) {\n\t\treturn ( this.parent == otherPosition.parent && this.offset == otherPosition.offset );\n\t}\n\n\t/**\n\t * Checks whether this position is located before given position. When method returns `false` it does not mean that\n\t * this position is after give one. Two positions may be located inside separate roots and in that situation this\n\t * method will still return `false`.\n\t *\n\t * @see module:engine/view/position~Position#isAfter\n\t * @see module:engine/view/position~Position#compareWith\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} Returns `true` if this position is before given position.\n\t */\n\tisBefore( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'before';\n\t}\n\n\t/**\n\t * Checks whether this position is located after given position. When method returns `false` it does not mean that\n\t * this position is before give one. Two positions may be located inside separate roots and in that situation this\n\t * method will still return `false`.\n\t *\n\t * @see module:engine/view/position~Position#isBefore\n\t * @see module:engine/view/position~Position#compareWith\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {Boolean} Returns `true` if this position is after given position.\n\t */\n\tisAfter( otherPosition ) {\n\t\treturn this.compareWith( otherPosition ) == 'after';\n\t}\n\n\t/**\n\t * Checks whether this position is before, after or in same position that other position. Two positions may be also\n\t * different when they are located in separate roots.\n\t *\n\t * @param {module:engine/view/position~Position} otherPosition Position to compare with.\n\t * @returns {module:engine/view/position~PositionRelation}\n\t */\n\tcompareWith( otherPosition ) {\n\t\tif ( this.root !== otherPosition.root ) {\n\t\t\treturn 'different';\n\t\t}\n\n\t\tif ( this.isEqual( otherPosition ) ) {\n\t\t\treturn 'same';\n\t\t}\n\n\t\t// Get path from root to position's parent element.\n\t\tconst thisPath = this.parent.is( 'node' ) ? this.parent.getPath() : [];\n\t\tconst otherPath = otherPosition.parent.is( 'node' ) ? otherPosition.parent.getPath() : [];\n\n\t\t// Add the positions' offsets to the parents offsets.\n\t\tthisPath.push( this.offset );\n\t\totherPath.push( otherPosition.offset );\n\n\t\t// Compare both path arrays to find common ancestor.\n\t\tconst result = compareArrays( thisPath, otherPath );\n\n\t\tswitch ( result ) {\n\t\t\tcase 'prefix':\n\t\t\t\treturn 'before';\n\n\t\t\tcase 'extension':\n\t\t\t\treturn 'after';\n\n\t\t\tdefault:\n\t\t\t\treturn thisPath[ result ] < otherPath[ result ] ? 'before' : 'after';\n\t\t}\n\t}\n\n\t/**\n\t * Creates a {@link module:engine/view/treewalker~TreeWalker TreeWalker} instance with this positions as a start position.\n\t *\n\t * @param {Object} options Object with configuration options. See {@link module:engine/view/treewalker~TreeWalker}\n\t * @param {module:engine/view/range~Range} [options.boundaries=null] Range to define boundaries of the iterator.\n\t * @param {Boolean} [options.singleCharacters=false]\n\t * @param {Boolean} [options.shallow=false]\n\t * @param {Boolean} [options.ignoreElementEnd=false]\n\t */\n\tgetWalker( options = {} ) {\n\t\toptions.startPosition = this;\n\n\t\treturn new TreeWalker( options );\n\t}\n\n\tclone() {\n\t\treturn new Position( this.parent, this.offset );\n\t}\n\n\t/**\n\t * Creates position at the given location. The location can be specified as:\n\t *\n\t * * a {@link module:engine/view/position~Position position},\n\t * * parent element and offset (offset defaults to `0`),\n\t * * parent element and `'end'` (sets position at the end of that element),\n\t * * {@link module:engine/view/item~Item view item} and `'before'` or `'after'` (sets position before or after given view item).\n\t *\n\t * This method is a shortcut to other constructors such as:\n\t *\n\t * * {@link module:engine/view/position~Position._createBefore},\n\t * * {@link module:engine/view/position~Position._createAfter}.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item|module:engine/view/position~Position} itemOrPosition\n\t * @param {Number|'end'|'before'|'after'} [offset] Offset or one of the flags. Used only when\n\t * first parameter is a {@link module:engine/view/item~Item view item}.\n\t */\n\tstatic _createAt( itemOrPosition, offset ) {\n\t\tif ( itemOrPosition instanceof Position ) {\n\t\t\treturn new this( itemOrPosition.parent, itemOrPosition.offset );\n\t\t} else {\n\t\t\tconst node = itemOrPosition;\n\n\t\t\tif ( offset == 'end' ) {\n\t\t\t\toffset = node.is( '$text' ) ? node.data.length : node.childCount;\n\t\t\t} else if ( offset == 'before' ) {\n\t\t\t\treturn this._createBefore( node );\n\t\t\t} else if ( offset == 'after' ) {\n\t\t\t\treturn this._createAfter( node );\n\t\t\t} else if ( offset !== 0 && !offset ) {\n\t\t\t\t/**\n\t\t\t\t * {@link module:engine/view/view~View#createPositionAt `View#createPositionAt()`}\n\t\t\t\t * requires the offset to be specified when the first parameter is a view item.\n\t\t\t\t *\n\t\t\t\t * @error view-createpositionat-offset-required\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'view-createpositionat-offset-required', node );\n\t\t\t}\n\n\t\t\treturn new Position( node, offset );\n\t\t}\n\t}\n\n\t/**\n\t * Creates a new position after given view item.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item} item View item after which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tstatic _createAfter( item ) {\n\t\t// TextProxy is not a instance of Node so we need do handle it in specific way.\n\t\tif ( item.is( '$textProxy' ) ) {\n\t\t\treturn new Position( item.textNode, item.offsetInText + item.data.length );\n\t\t}\n\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You can not make a position after a root.\n\t\t\t *\n\t\t\t * @error view-position-after-root\n\t\t\t * @param {module:engine/view/node~Node} root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-position-after-root', item, { root: item } );\n\t\t}\n\n\t\treturn new Position( item.parent, item.index + 1 );\n\t}\n\n\t/**\n\t * Creates a new position before given view item.\n\t *\n\t * @protected\n\t * @param {module:engine/view/item~Item} item View item before which the position should be located.\n\t * @returns {module:engine/view/position~Position}\n\t */\n\tstatic _createBefore( item ) {\n\t\t// TextProxy is not a instance of Node so we need do handle it in specific way.\n\t\tif ( item.is( '$textProxy' ) ) {\n\t\t\treturn new Position( item.textNode, item.offsetInText );\n\t\t}\n\n\t\tif ( !item.parent ) {\n\t\t\t/**\n\t\t\t * You cannot make a position before a root.\n\t\t\t *\n\t\t\t * @error view-position-before-root\n\t\t\t * @param {module:engine/view/node~Node} root\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'view-position-before-root', item, { root: item } );\n\t\t}\n\n\t\treturn new Position( item.parent, item.index );\n\t}\n}\n\n/**\n * A flag indicating whether this position is `'before'` or `'after'` or `'same'` as given position.\n * If positions are in different roots `'different'` flag is returned.\n *\n * @typedef {String} module:engine/view/position~PositionRelation\n */\n"]}]}