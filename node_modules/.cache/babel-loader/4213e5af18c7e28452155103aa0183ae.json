{"remainingRequest":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js?{}!/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-typing/src/delete.js","dependencies":[{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-typing/src/delete.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-dev-webpack-plugin/lib/translatesourceloader.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2VrZWJlcmF0L1lhbmRleC5EaXNrL1Byb2plbGVyaW0vQmVuaW1Qcm9qZWxlcmltL3dlYnNpdGVtL3dlYnNpdGVtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvZWtlYmVyYXQvWWFuZGV4LkRpc2svUHJvamVsZXJpbS9CZW5pbVByb2plbGVyaW0vd2Vic2l0ZW0vd2Vic2l0ZW0td2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvZWtlYmVyYXQvWWFuZGV4LkRpc2svUHJvamVsZXJpbS9CZW5pbVByb2plbGVyaW0vd2Vic2l0ZW0vd2Vic2l0ZW0td2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL2hvbWUvZWtlYmVyYXQvWWFuZGV4LkRpc2svUHJvamVsZXJpbS9CZW5pbVByb2plbGVyaW0vd2Vic2l0ZW0vd2Vic2l0ZW0td2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL2hvbWUvZWtlYmVyYXQvWWFuZGV4LkRpc2svUHJvamVsZXJpbS9CZW5pbVByb2plbGVyaW0vd2Vic2l0ZW0vd2Vic2l0ZW0td2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CgovKioKICogQGxpY2Vuc2UgQ29weXJpZ2h0IChjKSAyMDAzLTIwMjEsIENLU291cmNlIC0gRnJlZGVyaWNvIEtuYWJiZW4uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIEZvciBsaWNlbnNpbmcsIHNlZSBMSUNFTlNFLm1kIG9yIGh0dHBzOi8vY2tlZGl0b3IuY29tL2xlZ2FsL2NrZWRpdG9yLW9zcy1saWNlbnNlCiAqLwoKLyoqCiAqIEBtb2R1bGUgdHlwaW5nL2RlbGV0ZQogKi8KaW1wb3J0IFBsdWdpbiBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LWNvcmUvc3JjL3BsdWdpbic7CmltcG9ydCBEZWxldGVDb21tYW5kIGZyb20gJy4vZGVsZXRlY29tbWFuZCc7CmltcG9ydCBEZWxldGVPYnNlcnZlciBmcm9tICcuL2RlbGV0ZW9ic2VydmVyJzsKaW1wb3J0IGVudiBmcm9tICdAY2tlZGl0b3IvY2tlZGl0b3I1LXV0aWxzL3NyYy9lbnYnOwovKioKICogVGhlIGRlbGV0ZSBhbmQgYmFja3NwYWNlIGZlYXR1cmUuIEhhbmRsZXMgdGhlIDxrYmQ+RGVsZXRlPC9rYmQ+IGFuZCA8a2JkPkJhY2tzcGFjZTwva2JkPiBrZXlzIGluIHRoZSBlZGl0b3IuCiAqCiAqIEBleHRlbmRzIG1vZHVsZTpjb3JlL3BsdWdpbn5QbHVnaW4KICovCgp2YXIgRGVsZXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUGx1Z2luKSB7CiAgX2luaGVyaXRzKERlbGV0ZSwgX1BsdWdpbik7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRGVsZXRlKTsKCiAgZnVuY3Rpb24gRGVsZXRlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERlbGV0ZSk7CgogICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKERlbGV0ZSwgW3sKICAgIGtleTogImluaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciBlZGl0b3IgPSB0aGlzLmVkaXRvcjsKICAgICAgdmFyIHZpZXcgPSBlZGl0b3IuZWRpdGluZy52aWV3OwogICAgICB2YXIgdmlld0RvY3VtZW50ID0gdmlldy5kb2N1bWVudDsKICAgICAgdmlldy5hZGRPYnNlcnZlcihEZWxldGVPYnNlcnZlcik7CiAgICAgIHZhciBkZWxldGVGb3J3YXJkQ29tbWFuZCA9IG5ldyBEZWxldGVDb21tYW5kKGVkaXRvciwgJ2ZvcndhcmQnKTsgLy8gUmVnaXN0ZXIgYGRlbGV0ZUZvcndhcmRgIGNvbW1hbmQgYW5kIGFkZCBgZm9yd2FyZERlbGV0ZWAgY29tbWFuZCBhcyBhbiBhbGlhcyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS4KCiAgICAgIGVkaXRvci5jb21tYW5kcy5hZGQoJ2RlbGV0ZUZvcndhcmQnLCBkZWxldGVGb3J3YXJkQ29tbWFuZCk7CiAgICAgIGVkaXRvci5jb21tYW5kcy5hZGQoJ2ZvcndhcmREZWxldGUnLCBkZWxldGVGb3J3YXJkQ29tbWFuZCk7CiAgICAgIGVkaXRvci5jb21tYW5kcy5hZGQoJ2RlbGV0ZScsIG5ldyBEZWxldGVDb21tYW5kKGVkaXRvciwgJ2JhY2t3YXJkJykpOwogICAgICB0aGlzLmxpc3RlblRvKHZpZXdEb2N1bWVudCwgJ2RlbGV0ZScsIGZ1bmN0aW9uIChldnQsIGRhdGEpIHsKICAgICAgICB2YXIgZGVsZXRlQ29tbWFuZFBhcmFtcyA9IHsKICAgICAgICAgIHVuaXQ6IGRhdGEudW5pdCwKICAgICAgICAgIHNlcXVlbmNlOiBkYXRhLnNlcXVlbmNlCiAgICAgICAgfTsgLy8gSWYgYSBzcGVjaWZpYyAodmlldykgc2VsZWN0aW9uIHRvIHJlbW92ZSB3YXMgc2V0LCBjb252ZXJ0IGl0IHRvIGEgbW9kZWwgc2VsZWN0aW9uIGFuZCBzZXQgYXMgYSBwYXJhbWV0ZXIgZm9yIGBEZWxldGVDb21tYW5kYC4KCiAgICAgICAgaWYgKGRhdGEuc2VsZWN0aW9uVG9SZW1vdmUpIHsKICAgICAgICAgIHZhciBtb2RlbFNlbGVjdGlvbiA9IGVkaXRvci5tb2RlbC5jcmVhdGVTZWxlY3Rpb24oKTsKICAgICAgICAgIHZhciByYW5nZXMgPSBbXTsKCiAgICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZGF0YS5zZWxlY3Rpb25Ub1JlbW92ZS5nZXRSYW5nZXMoKSksCiAgICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICB2YXIgdmlld1JhbmdlID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgcmFuZ2VzLnB1c2goZWRpdG9yLmVkaXRpbmcubWFwcGVyLnRvTW9kZWxSYW5nZSh2aWV3UmFuZ2UpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgICAgfQoKICAgICAgICAgIG1vZGVsU2VsZWN0aW9uLnNldFRvKHJhbmdlcyk7CiAgICAgICAgICBkZWxldGVDb21tYW5kUGFyYW1zLnNlbGVjdGlvbiA9IG1vZGVsU2VsZWN0aW9uOwogICAgICAgIH0KCiAgICAgICAgZWRpdG9yLmV4ZWN1dGUoZGF0YS5kaXJlY3Rpb24gPT0gJ2ZvcndhcmQnID8gJ2RlbGV0ZUZvcndhcmQnIDogJ2RlbGV0ZScsIGRlbGV0ZUNvbW1hbmRQYXJhbXMpOwogICAgICAgIGRhdGEucHJldmVudERlZmF1bHQoKTsKICAgICAgICB2aWV3LnNjcm9sbFRvVGhlU2VsZWN0aW9uKCk7CiAgICAgIH0sIHsKICAgICAgICBwcmlvcml0eTogJ2xvdycKICAgICAgfSk7IC8vIEFuZHJvaWQgSU1FcyBoYXZlIGEgcXVpcmsgLSB0aGV5IGNoYW5nZSBET00gc2VsZWN0aW9uIGFmdGVyIHRoZSBpbnB1dCBjaGFuZ2VzIHdlcmUgcGVyZm9ybWVkIGJ5IHRoZSBicm93c2VyLgogICAgICAvLyBUaGlzIGhhcHBlbnMgb24gYGtleXVwYCBldmVudC4gQW5kcm9pZCBkb2Vzbid0IGtub3cgYW55dGhpbmcgYWJvdXQgb3VyIGRlbGV0aW9uIGFuZCBzZWxlY3Rpb24gaGFuZGxpbmcuIEV2ZW4gaWYgdGhlIHNlbGVjdGlvbgogICAgICAvLyB3YXMgY2hhbmdlZCBkdXJpbmcgaW5wdXQgZXZlbnRzLCBJTUUgcmVtZW1iZXJzIHRoZSBwb3NpdGlvbiB3aGVyZSB0aGUgc2VsZWN0aW9uICJzaG91bGQiIGJlIHBsYWNlZCBhbmQgbW92ZXMgaXQgdGhlcmUuCiAgICAgIC8vCiAgICAgIC8vIFRvIHByZXZlbnQgaW5jb3JyZWN0IHNlbGVjdGlvbiwgd2Ugc2F2ZSB0aGUgc2VsZWN0aW9uIGFmdGVyIGRlbGV0aW5nIGhlcmUgYW5kIHRoZW4gcmUtc2V0IGl0IG9uIGBrZXl1cGAuIFRoaXMgaGFzIHRvIGJlIGRvbmUKICAgICAgLy8gb24gRE9NIHNlbGVjdGlvbiBsZXZlbCwgYmVjYXVzZSBvbiBga2V5dXBgIHRoZSBtb2RlbCBzZWxlY3Rpb24gaXMgc3RpbGwgdGhlIHNhbWUgYXMgaXQgd2FzIGp1c3QgYWZ0ZXIgZGVsZXRpb24sIHNvIGl0CiAgICAgIC8vIHdvdWxkbid0IGJlIGNoYW5nZWQgYW5kIHRoZSBmaXggd291bGQgZG8gbm90aGluZy4KICAgICAgLy8KCiAgICAgIGlmIChlbnYuaXNBbmRyb2lkKSB7CiAgICAgICAgdmFyIGRvbVNlbGVjdGlvbkFmdGVyRGVsZXRpb24gPSBudWxsOwogICAgICAgIHRoaXMubGlzdGVuVG8odmlld0RvY3VtZW50LCAnZGVsZXRlJywgZnVuY3Rpb24gKGV2dCwgZGF0YSkgewogICAgICAgICAgdmFyIGRvbVNlbGVjdGlvbiA9IGRhdGEuZG9tVGFyZ2V0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgICBkb21TZWxlY3Rpb25BZnRlckRlbGV0aW9uID0gewogICAgICAgICAgICBhbmNob3JOb2RlOiBkb21TZWxlY3Rpb24uYW5jaG9yTm9kZSwKICAgICAgICAgICAgYW5jaG9yT2Zmc2V0OiBkb21TZWxlY3Rpb24uYW5jaG9yT2Zmc2V0LAogICAgICAgICAgICBmb2N1c05vZGU6IGRvbVNlbGVjdGlvbi5mb2N1c05vZGUsCiAgICAgICAgICAgIGZvY3VzT2Zmc2V0OiBkb21TZWxlY3Rpb24uZm9jdXNPZmZzZXQKICAgICAgICAgIH07CiAgICAgICAgfSwgewogICAgICAgICAgcHJpb3JpdHk6ICdsb3dlc3QnCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5saXN0ZW5Ubyh2aWV3RG9jdW1lbnQsICdrZXl1cCcsIGZ1bmN0aW9uIChldnQsIGRhdGEpIHsKICAgICAgICAgIGlmIChkb21TZWxlY3Rpb25BZnRlckRlbGV0aW9uKSB7CiAgICAgICAgICAgIHZhciBkb21TZWxlY3Rpb24gPSBkYXRhLmRvbVRhcmdldC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldFNlbGVjdGlvbigpOwogICAgICAgICAgICBkb21TZWxlY3Rpb24uY29sbGFwc2UoZG9tU2VsZWN0aW9uQWZ0ZXJEZWxldGlvbi5hbmNob3JOb2RlLCBkb21TZWxlY3Rpb25BZnRlckRlbGV0aW9uLmFuY2hvck9mZnNldCk7CiAgICAgICAgICAgIGRvbVNlbGVjdGlvbi5leHRlbmQoZG9tU2VsZWN0aW9uQWZ0ZXJEZWxldGlvbi5mb2N1c05vZGUsIGRvbVNlbGVjdGlvbkFmdGVyRGVsZXRpb24uZm9jdXNPZmZzZXQpOwogICAgICAgICAgICBkb21TZWxlY3Rpb25BZnRlckRlbGV0aW9uID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH1dLCBbewogICAga2V5OiAicGx1Z2luTmFtZSIsCiAgICBnZXQ6CiAgICAvKioKICAgICAqIEBpbmhlcml0RG9jCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuICdEZWxldGUnOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIERlbGV0ZTsKfShQbHVnaW4pOwoKZXhwb3J0IHsgRGVsZXRlIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/home/ekeberat/Yandex.Disk/Projelerim/BenimProjelerim/websitem/websitem-web/node_modules/@ckeditor/ckeditor5-typing/src/delete.js"],"names":["Plugin","DeleteCommand","DeleteObserver","env","Delete","editor","view","editing","viewDocument","document","addObserver","deleteForwardCommand","commands","add","listenTo","evt","data","deleteCommandParams","unit","sequence","selectionToRemove","modelSelection","model","createSelection","ranges","getRanges","viewRange","push","mapper","toModelRange","setTo","selection","execute","direction","preventDefault","scrollToTheSelection","priority","isAndroid","domSelectionAfterDeletion","domSelection","domTarget","ownerDocument","defaultView","getSelection","anchorNode","anchorOffset","focusNode","focusOffset","collapse","extend"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module typing/delete\n */\n\nimport Plugin from '@ckeditor/ckeditor5-core/src/plugin';\nimport DeleteCommand from './deletecommand';\nimport DeleteObserver from './deleteobserver';\nimport env from '@ckeditor/ckeditor5-utils/src/env';\n\n/**\n * The delete and backspace feature. Handles the <kbd>Delete</kbd> and <kbd>Backspace</kbd> keys in the editor.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class Delete extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Delete';\n\t}\n\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst view = editor.editing.view;\n\t\tconst viewDocument = view.document;\n\n\t\tview.addObserver( DeleteObserver );\n\n\t\tconst deleteForwardCommand = new DeleteCommand( editor, 'forward' );\n\n\t\t// Register `deleteForward` command and add `forwardDelete` command as an alias for backward compatibility.\n\t\teditor.commands.add( 'deleteForward', deleteForwardCommand );\n\t\teditor.commands.add( 'forwardDelete', deleteForwardCommand );\n\n\t\teditor.commands.add( 'delete', new DeleteCommand( editor, 'backward' ) );\n\n\t\tthis.listenTo( viewDocument, 'delete', ( evt, data ) => {\n\t\t\tconst deleteCommandParams = { unit: data.unit, sequence: data.sequence };\n\n\t\t\t// If a specific (view) selection to remove was set, convert it to a model selection and set as a parameter for `DeleteCommand`.\n\t\t\tif ( data.selectionToRemove ) {\n\t\t\t\tconst modelSelection = editor.model.createSelection();\n\t\t\t\tconst ranges = [];\n\n\t\t\t\tfor ( const viewRange of data.selectionToRemove.getRanges() ) {\n\t\t\t\t\tranges.push( editor.editing.mapper.toModelRange( viewRange ) );\n\t\t\t\t}\n\n\t\t\t\tmodelSelection.setTo( ranges );\n\n\t\t\t\tdeleteCommandParams.selection = modelSelection;\n\t\t\t}\n\n\t\t\teditor.execute( data.direction == 'forward' ? 'deleteForward' : 'delete', deleteCommandParams );\n\n\t\t\tdata.preventDefault();\n\n\t\t\tview.scrollToTheSelection();\n\t\t}, { priority: 'low' } );\n\n\t\t// Android IMEs have a quirk - they change DOM selection after the input changes were performed by the browser.\n\t\t// This happens on `keyup` event. Android doesn't know anything about our deletion and selection handling. Even if the selection\n\t\t// was changed during input events, IME remembers the position where the selection \"should\" be placed and moves it there.\n\t\t//\n\t\t// To prevent incorrect selection, we save the selection after deleting here and then re-set it on `keyup`. This has to be done\n\t\t// on DOM selection level, because on `keyup` the model selection is still the same as it was just after deletion, so it\n\t\t// wouldn't be changed and the fix would do nothing.\n\t\t//\n\t\tif ( env.isAndroid ) {\n\t\t\tlet domSelectionAfterDeletion = null;\n\n\t\t\tthis.listenTo( viewDocument, 'delete', ( evt, data ) => {\n\t\t\t\tconst domSelection = data.domTarget.ownerDocument.defaultView.getSelection();\n\n\t\t\t\tdomSelectionAfterDeletion = {\n\t\t\t\t\tanchorNode: domSelection.anchorNode,\n\t\t\t\t\tanchorOffset: domSelection.anchorOffset,\n\t\t\t\t\tfocusNode: domSelection.focusNode,\n\t\t\t\t\tfocusOffset: domSelection.focusOffset\n\t\t\t\t};\n\t\t\t}, { priority: 'lowest' } );\n\n\t\t\tthis.listenTo( viewDocument, 'keyup', ( evt, data ) => {\n\t\t\t\tif ( domSelectionAfterDeletion ) {\n\t\t\t\t\tconst domSelection = data.domTarget.ownerDocument.defaultView.getSelection();\n\n\t\t\t\t\tdomSelection.collapse( domSelectionAfterDeletion.anchorNode, domSelectionAfterDeletion.anchorOffset );\n\t\t\t\t\tdomSelection.extend( domSelectionAfterDeletion.focusNode, domSelectionAfterDeletion.focusOffset );\n\n\t\t\t\t\tdomSelectionAfterDeletion = null;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n}\n"]}]}